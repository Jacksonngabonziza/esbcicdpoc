<?xml version="1.0" encoding="UTF-8"?>
<target:target xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:target="http://fiorano.com/environment/1.0" xsi:schemaLocation="http://fiorano.com/environment/1.0 env.xsd">
  <target:instance name="XML2MT1">
    <target:instance-properties>
      <target:deployment cache="true" nodes="fes"/>
    </target:instance-properties>
    <target:configuration-properties>
      <target:property configurationType="resource" encrypt="false" name="MessageSchema Directory Configuration" type="NamedObject">SwiftMTSchemaDirectory</target:property>
    </target:configuration-properties>
  </target:instance>
  <target:instance name="SwiftTranslator">
    <target:instance-properties>
      <target:deployment cache="true" nodes="fes"/>
    </target:instance-properties>
    <target:configuration-properties>
      <target:property encrypt="false" name="XSL" type="java.lang.String">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?>
&lt;xsl:stylesheet version=&quot;1.0&quot; xmlns:xalan=&quot;http://xml.apache.org/xslt&quot; xmlns:datetime=&quot;http://exslt.org/dates-and-times&quot; xmlns:math=&quot;http://exslt.org/math&quot; xmlns:xsl=&quot;http://www.w3.org/1999/XSL/Transform&quot; xmlns:lxslt=&quot;http://xml.apache.org/xslt&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:java=&quot;http://xml.apache.org/xslt/java&quot; xmlns:set=&quot;http://exslt.org/sets&quot; exclude-result-prefixes=&quot;xalan java lxslt&quot; xmlns:ns4=&quot;urn:iso:std:iso:20022:tech:xsd:head.001.001.02&quot; xmlns:ns6=&quot;http://www.w3.org/2001/XMLSchema&quot; xmlns:ns2=&quot;urn:swift:xsd:fin.942.2020&quot; xmlns:ns5=&quot;urn:swift:xsd:mtmsg.2020&quot; xmlns:ns3=&quot;urn:iso:std:iso:20022:tech:xsd:camt.052.001.08&quot; xmlns:ns1=&quot;urn:swift:xsd:envelope&quot; xmlns:MT2MX=&quot;http://xml.apache.org/xslt/java&quot; xmlns:MTtoMX=&quot;http://xml.apache.org/xslt/java&quot; xmlns:MTtoMXUtil=&quot;http://xml.apache.org/xslt/java&quot; xmlns:MX2MT=&quot;http://xml.apache.org/xslt/java&quot; xmlns:MXToMT=&quot;http://xml.apache.org/xslt/java&quot; xmlns:MXtoMT=&quot;http://xml.apache.org/xslt/java&quot; xmlns:QueryGenerator=&quot;QueryGenerator&quot; xmlns:dateConversion=&quot;dateConversion&quot; xmlns:myext=&quot;myext&quot; xmlns:signature=&quot;http://xml.apache.org/xslt/java&quot; xmlns:strings=&quot;strings&quot; extension-element-prefixes=&quot;datetime set math MT2MX MTtoMX MTtoMXUtil MX2MT MXToMT MXtoMT QueryGenerator dateConversion myext signature strings&quot;>
  &lt;xsl:import href=&quot;GLOBAL_FUNCLET_PATH&quot;>&lt;/xsl:import>
  &lt;xsl:output method=&quot;xml&quot; indent=&quot;yes&quot; encoding=&quot;UTF-8&quot; xalan:indent-amount=&quot;2&quot; omit-xml-declaration=&quot;no&quot;>&lt;/xsl:output>
  &lt;xsl:variable name=&quot;document&quot; select=&quot;/&quot;>&lt;/xsl:variable>
  &lt;xsl:variable name=&quot;document_Input1&quot; select=&quot;document('Input1')&quot;>&lt;/xsl:variable>
  &lt;xsl:template match=&quot;/&quot;>
    &lt;ns5:FinMessage>
      &lt;ns5:Block1>&lt;ns5:ApplicationIdentifier>&#xD;
          &lt;xsl:value-of select=&quot;'F'&quot;>&lt;/xsl:value-of>&#xD;
        &lt;/ns5:ApplicationIdentifier>&#xD;
        &lt;ns5:ServiceIdentifier>&#xD;
          &lt;xsl:value-of select=&quot;'01'&quot;>&lt;/xsl:value-of>&#xD;
        &lt;/ns5:ServiceIdentifier>&#xD;
        &lt;ns5:LogicalTerminalAddress>&#xD;
          &lt;xsl:variable name=&quot;if0&quot;>&#xD;
            &lt;xsl:choose>&#xD;
              &lt;xsl:when test=&quot;((java:_getStringProperty($_TIF_MESSAGE_, 'ApplicationMode'))!=('I') or not(string-length(java:_getStringProperty($_TIF_MESSAGE_, 'ApplicationMode'))))&quot;>&#xD;
                &lt;xsl:value-of select=&quot;$document_Input1/ns1:Envelope/ns4:AppHdr/ns4:To/ns4:FIId/ns4:FinInstnId/ns4:BICFI&quot;>&lt;/xsl:value-of>&#xD;
              &lt;/xsl:when>&#xD;
              &lt;xsl:otherwise>&#xD;
                &lt;xsl:value-of select=&quot;$document_Input1/ns1:Envelope/ns4:AppHdr/ns4:Fr/ns4:FIId/ns4:FinInstnId/ns4:BICFI&quot;>&lt;/xsl:value-of>&#xD;
              &lt;/xsl:otherwise>&#xD;
            &lt;/xsl:choose>&#xD;
          &lt;/xsl:variable>&#xD;
          &lt;xsl:value-of select=&quot;MXToMT:com.fiorano.funclet.MXtoMT.MX_To_MT_BICFI_LogicalAddress(string($if0))&quot;>&lt;/xsl:value-of>&#xD;
        &lt;/ns5:LogicalTerminalAddress>&#xD;
 &lt;ns5:SessionNumber>&#xD;
	&lt;xsl:value-of select=&quot;substring(java:_getStringProperty($_TIF_MESSAGE_, 'SequenceNumber'),'1','4')&quot;/>&#xD;
&lt;/ns5:SessionNumber>&#xD;
&lt;ns5:SequenceNumber>&#xD;
	&lt;xsl:value-of select=&quot;substring(java:_getStringProperty($_TIF_MESSAGE_, 'SequenceNumber'),'5','6')&quot;/>&#xD;
&lt;/ns5:SequenceNumber>&lt;/ns5:Block1>
      &lt;ns5:Block2>&lt;!-- User code ends here -->&#xD;
&#xD;
        &lt;ns5:InputIdentifier>&#xD;
          &lt;xsl:variable name=&quot;if1&quot;>&#xD;
            &lt;xsl:choose>&#xD;
              &lt;xsl:when test=&quot;(java:_getStringProperty($_TIF_MESSAGE_, 'ApplicationMode'))=('I')&quot;>&#xD;
                &lt;xsl:value-of select=&quot;'I'&quot;>&lt;/xsl:value-of>&#xD;
              &lt;/xsl:when>&#xD;
            &lt;/xsl:choose>&#xD;
          &lt;/xsl:variable>&#xD;
          &lt;xsl:value-of select=&quot;$if1&quot;>&lt;/xsl:value-of>&#xD;
        &lt;/ns5:InputIdentifier>&#xD;
        &lt;ns5:MessageType>&#xD;
          &lt;xsl:variable name=&quot;if2&quot;>&#xD;
            &lt;xsl:choose>&#xD;
              &lt;xsl:when test=&quot;(java:_getStringProperty($_TIF_MESSAGE_, 'ApplicationMode'))=('I')&quot;>&#xD;
                &lt;xsl:value-of select=&quot;'942'&quot;>&lt;/xsl:value-of>&#xD;
              &lt;/xsl:when>&#xD;
            &lt;/xsl:choose>&#xD;
          &lt;/xsl:variable>&#xD;
          &lt;xsl:value-of select=&quot;$if2&quot;>&lt;/xsl:value-of>&#xD;
        &lt;/ns5:MessageType>&#xD;
        &lt;ns5:DestinationAddress>&#xD;
          &lt;xsl:variable name=&quot;if3&quot;>&#xD;
            &lt;xsl:choose>&#xD;
              &lt;xsl:when test=&quot;(java:_getStringProperty($_TIF_MESSAGE_, 'ApplicationMode'))=('I')&quot;>&#xD;
                &lt;xsl:value-of select=&quot;MX2MT:com.fiorano.funclet.MXtoMT.MX_To_MT_BICFI_LogicalAddress(string($document_Input1/ns1:Envelope/ns4:AppHdr/ns4:To/ns4:FIId/ns4:FinInstnId/ns4:BICFI))&quot;>&lt;/xsl:value-of>&#xD;
              &lt;/xsl:when>&#xD;
            &lt;/xsl:choose>&#xD;
          &lt;/xsl:variable>&#xD;
          &lt;xsl:value-of select=&quot;$if3&quot;>&lt;/xsl:value-of>&#xD;
        &lt;/ns5:DestinationAddress>&#xD;
        &lt;ns5:MessagePriority>&#xD;
          &lt;xsl:variable name=&quot;if4&quot;>&#xD;
            &lt;xsl:choose>&#xD;
              &lt;xsl:when test=&quot;(java:_getStringProperty($_TIF_MESSAGE_, 'ApplicationMode'))=('I')&quot;>&#xD;
                &lt;xsl:variable name=&quot;if5&quot;>&#xD;
                  &lt;xsl:choose>&#xD;
                    &lt;xsl:when test=&quot;($document_Input1/ns1:Envelope/ns4:AppHdr/ns4:Prty)=('HIGH')&quot;>&#xD;
                      &lt;xsl:value-of select=&quot;'U'&quot;>&lt;/xsl:value-of>&#xD;
                    &lt;/xsl:when>&#xD;
                    &lt;xsl:otherwise>&#xD;
                      &lt;xsl:value-of select=&quot;'N'&quot;>&lt;/xsl:value-of>&#xD;
                    &lt;/xsl:otherwise>&#xD;
                  &lt;/xsl:choose>&#xD;
                &lt;/xsl:variable>&#xD;
                &lt;xsl:value-of select=&quot;$if5&quot;>&lt;/xsl:value-of>&#xD;
              &lt;/xsl:when>&#xD;
            &lt;/xsl:choose>&#xD;
          &lt;/xsl:variable>&#xD;
          &lt;xsl:value-of select=&quot;$if4&quot;>&lt;/xsl:value-of>&#xD;
        &lt;/ns5:MessagePriority>&#xD;
        &lt;ns5:OutputIdentifier>&#xD;
          &lt;xsl:variable name=&quot;if6&quot;>&#xD;
            &lt;xsl:choose>&#xD;
              &lt;xsl:when test=&quot;((java:_getStringProperty($_TIF_MESSAGE_, 'ApplicationMode'))!=('I') or not(string-length(java:_getStringProperty($_TIF_MESSAGE_, 'ApplicationMode'))))&quot;>&#xD;
                &lt;xsl:value-of select=&quot;'O'&quot;>&lt;/xsl:value-of>&#xD;
              &lt;/xsl:when>&#xD;
            &lt;/xsl:choose>&#xD;
          &lt;/xsl:variable>&#xD;
          &lt;xsl:value-of select=&quot;$if6&quot;>&lt;/xsl:value-of>&#xD;
        &lt;/ns5:OutputIdentifier>&#xD;
        &lt;ns5:MessageType>&#xD;
          &lt;xsl:variable name=&quot;if7&quot;>&#xD;
            &lt;xsl:choose>&#xD;
              &lt;xsl:when test=&quot;((java:_getStringProperty($_TIF_MESSAGE_, 'ApplicationMode'))!=('I') or not(string-length(java:_getStringProperty($_TIF_MESSAGE_, 'ApplicationMode'))))&quot;>&#xD;
                &lt;xsl:value-of select=&quot;'942'&quot;>&lt;/xsl:value-of>&#xD;
              &lt;/xsl:when>&#xD;
            &lt;/xsl:choose>&#xD;
          &lt;/xsl:variable>&#xD;
          &lt;xsl:value-of select=&quot;$if7&quot;>&lt;/xsl:value-of>&#xD;
        &lt;/ns5:MessageType>&#xD;
        &lt;ns5:InputTime>&#xD;
          &lt;xsl:variable name=&quot;if8&quot;>&#xD;
            &lt;xsl:choose>&#xD;
                &lt;xsl:when test=&quot;((java:_getStringProperty($_TIF_MESSAGE_, 'ApplicationMode'))!=('I') or not(string-length(java:_getStringProperty($_TIF_MESSAGE_, 'ApplicationMode')))) and string-length(java:_getStringProperty($_TIF_MESSAGE_, 'OutputTime'))&quot;>&#xD;
                  &lt;xsl:value-of select=&quot;java:_getStringProperty($_TIF_MESSAGE_, 'OutputTime')&quot;>&lt;/xsl:value-of>&#xD;
                &lt;/xsl:when>&#xD;
				&#xD;
				 &lt;xsl:when test=&quot;((java:_getStringProperty($_TIF_MESSAGE_, 'ApplicationMode'))!=('I') or not(string-length(java:_getStringProperty($_TIF_MESSAGE_, 'ApplicationMode')))) and (not(string-length(java:_getStringProperty($_TIF_MESSAGE_, 'OutputTime'))))&quot;>&#xD;
                   &lt;xsl:value-of select=&quot;'0000'&quot;>&lt;/xsl:value-of>&#xD;
                &lt;/xsl:when>&#xD;
              &lt;/xsl:choose>&#xD;
          &lt;/xsl:variable>&#xD;
          &lt;xsl:value-of select=&quot;$if8&quot;>&lt;/xsl:value-of>&#xD;
        &lt;/ns5:InputTime>&#xD;
        &lt;ns5:MessageInputReference>&#xD;
          &lt;ns5:Date>&#xD;
            &lt;xsl:variable name=&quot;if9&quot;>&#xD;
             &lt;xsl:choose>&#xD;
                &lt;xsl:when test=&quot;((java:_getStringProperty($_TIF_MESSAGE_, 'ApplicationMode'))!=('I') or not(string-length(java:_getStringProperty($_TIF_MESSAGE_, 'ApplicationMode')))) and string-length(java:_getStringProperty($_TIF_MESSAGE_, 'OutputDate'))&quot;>&#xD;
                  &lt;xsl:value-of select=&quot;java:_getStringProperty($_TIF_MESSAGE_, 'OutputDate')&quot;>&lt;/xsl:value-of>&#xD;
                &lt;/xsl:when>&#xD;
				&#xD;
				 &lt;xsl:when test=&quot;((java:_getStringProperty($_TIF_MESSAGE_, 'ApplicationMode'))!=('I') or not(string-length(java:_getStringProperty($_TIF_MESSAGE_, 'ApplicationMode')))) and (not(string-length(java:_getStringProperty($_TIF_MESSAGE_, 'OutputDate'))))&quot;>&#xD;
                   &lt;xsl:value-of select=&quot;'991231'&quot;>&lt;/xsl:value-of>&#xD;
                &lt;/xsl:when>&#xD;
              &lt;/xsl:choose>&#xD;
            &lt;/xsl:variable>&#xD;
            &lt;xsl:value-of select=&quot;$if9&quot;>&lt;/xsl:value-of>&#xD;
          &lt;/ns5:Date>&#xD;
          &lt;ns5:LTIdentifier>&#xD;
            &lt;xsl:variable name=&quot;if10&quot;>&#xD;
              &lt;xsl:choose>&#xD;
                &lt;xsl:when test=&quot;((java:_getStringProperty($_TIF_MESSAGE_, 'ApplicationMode'))!=('I') or not(string-length(java:_getStringProperty($_TIF_MESSAGE_, 'ApplicationMode'))))&quot;>&#xD;
                  &lt;xsl:value-of select=&quot;MX2MT:com.fiorano.funclet.MXtoMT.MX_To_MT_BICFI_LTIAddress(string($document_Input1/ns1:Envelope/ns4:AppHdr/ns4:Fr/ns4:FIId/ns4:FinInstnId/ns4:BICFI))&quot;>&lt;/xsl:value-of>&#xD;
                &lt;/xsl:when>&#xD;
              &lt;/xsl:choose>&#xD;
            &lt;/xsl:variable>&#xD;
            &lt;xsl:value-of select=&quot;$if10&quot;>&lt;/xsl:value-of>&#xD;
          &lt;/ns5:LTIdentifier>&#xD;
          &lt;ns5:BranchCode>&#xD;
            &lt;xsl:variable name=&quot;if11&quot;>&#xD;
              &lt;xsl:choose>&#xD;
                &lt;xsl:when test=&quot;((java:_getStringProperty($_TIF_MESSAGE_, 'ApplicationMode'))!=('I') or not(string-length(java:_getStringProperty($_TIF_MESSAGE_, 'ApplicationMode'))))&quot;>&#xD;
                  &lt;xsl:variable name=&quot;if12&quot;>&#xD;
                    &lt;xsl:choose>&#xD;
                      &lt;xsl:when test=&quot;(string-length($document_Input1/ns1:Envelope/ns4:AppHdr/ns4:Fr/ns4:FIId/ns4:FinInstnId/ns4:BICFI))&amp;gt;=('11')&quot;>&#xD;
                        &lt;xsl:value-of select=&quot;substring($document_Input1/ns1:Envelope/ns4:AppHdr/ns4:Fr/ns4:FIId/ns4:FinInstnId/ns4:BICFI,(string-length($document_Input1/ns1:Envelope/ns4:AppHdr/ns4:Fr/ns4:FIId/ns4:FinInstnId/ns4:BICFI))-('2'),string-length($document_Input1/ns1:Envelope/ns4:AppHdr/ns4:Fr/ns4:FIId/ns4:FinInstnId/ns4:BICFI))&quot;>&lt;/xsl:value-of>&#xD;
                      &lt;/xsl:when>&#xD;
                      &lt;xsl:otherwise>&#xD;
                        &lt;xsl:value-of select=&quot;'XXX'&quot;>&lt;/xsl:value-of>&#xD;
                      &lt;/xsl:otherwise>&#xD;
                    &lt;/xsl:choose>&#xD;
                  &lt;/xsl:variable>&#xD;
                  &lt;xsl:value-of select=&quot;$if12&quot;>&lt;/xsl:value-of>&#xD;
                &lt;/xsl:when>&#xD;
              &lt;/xsl:choose>&#xD;
            &lt;/xsl:variable>&#xD;
            &lt;xsl:value-of select=&quot;$if11&quot;>&lt;/xsl:value-of>&#xD;
          &lt;/ns5:BranchCode>&#xD;
          &lt;ns5:SessionNumber>&#xD;
            &lt;xsl:variable name=&quot;if13&quot;>&#xD;
              &lt;xsl:choose>&#xD;
                &lt;xsl:when test=&quot;((java:_getStringProperty($_TIF_MESSAGE_, 'ApplicationMode'))!=('I') or not(string-length(java:_getStringProperty($_TIF_MESSAGE_, 'ApplicationMode'))))&quot;>&#xD;
                   &lt;xsl:value-of select=&quot;substring(java:_getStringProperty($_TIF_MESSAGE_, 'SequenceNumber'),'1','4')&quot;/>&#xD;
                &lt;/xsl:when>&#xD;
              &lt;/xsl:choose>&#xD;
            &lt;/xsl:variable>&#xD;
            &lt;xsl:value-of select=&quot;$if13&quot;>&lt;/xsl:value-of>&#xD;
          &lt;/ns5:SessionNumber>&#xD;
          &lt;ns5:ISN>&#xD;
            &lt;xsl:variable name=&quot;if14&quot;>&#xD;
              &lt;xsl:choose>&#xD;
                &lt;xsl:when test=&quot;((java:_getStringProperty($_TIF_MESSAGE_, 'ApplicationMode'))!=('I') or not(string-length(java:_getStringProperty($_TIF_MESSAGE_, 'ApplicationMode'))))&quot;>&#xD;
                   &lt;xsl:value-of select=&quot;substring(java:_getStringProperty($_TIF_MESSAGE_, 'SequenceNumber'),'5','6')&quot;/>&#xD;
                &lt;/xsl:when>&#xD;
              &lt;/xsl:choose>&#xD;
            &lt;/xsl:variable>&#xD;
            &lt;xsl:value-of select=&quot;$if14&quot;>&lt;/xsl:value-of>&#xD;
          &lt;/ns5:ISN>&#xD;
        &lt;/ns5:MessageInputReference>&#xD;
        &lt;ns5:Date>&#xD;
          &lt;xsl:variable name=&quot;if15&quot;>&#xD;
             &lt;xsl:choose>&#xD;
                &lt;xsl:when test=&quot;((java:_getStringProperty($_TIF_MESSAGE_, 'ApplicationMode'))!=('I') or not(string-length(java:_getStringProperty($_TIF_MESSAGE_, 'ApplicationMode')))) and string-length(java:_getStringProperty($_TIF_MESSAGE_, 'OutputDate'))&quot;>&#xD;
                  &lt;xsl:value-of select=&quot;java:_getStringProperty($_TIF_MESSAGE_, 'OutputDate')&quot;>&lt;/xsl:value-of>&#xD;
                &lt;/xsl:when>&#xD;
				&#xD;
				 &lt;xsl:when test=&quot;((java:_getStringProperty($_TIF_MESSAGE_, 'ApplicationMode'))!=('I') or not(string-length(java:_getStringProperty($_TIF_MESSAGE_, 'ApplicationMode')))) and (not(string-length(java:_getStringProperty($_TIF_MESSAGE_, 'OutputDate'))))&quot;>&#xD;
                   &lt;xsl:value-of select=&quot;'991231'&quot;>&lt;/xsl:value-of>&#xD;
                &lt;/xsl:when>&#xD;
              &lt;/xsl:choose>&#xD;
          &lt;/xsl:variable>&#xD;
          &lt;xsl:value-of select=&quot;$if15&quot;>&lt;/xsl:value-of>&#xD;
        &lt;/ns5:Date>&#xD;
        &lt;ns5:Time>&#xD;
          &lt;xsl:variable name=&quot;if16&quot;>&#xD;
             &lt;xsl:choose>&#xD;
                &lt;xsl:when test=&quot;((java:_getStringProperty($_TIF_MESSAGE_, 'ApplicationMode'))!=('I') or not(string-length(java:_getStringProperty($_TIF_MESSAGE_, 'ApplicationMode')))) and string-length(java:_getStringProperty($_TIF_MESSAGE_, 'OutputTime'))&quot;>&#xD;
                  &lt;xsl:value-of select=&quot;java:_getStringProperty($_TIF_MESSAGE_, 'OutputTime')&quot;>&lt;/xsl:value-of>&#xD;
                &lt;/xsl:when>&#xD;
				&#xD;
				 &lt;xsl:when test=&quot;((java:_getStringProperty($_TIF_MESSAGE_, 'ApplicationMode'))!=('I') or not(string-length(java:_getStringProperty($_TIF_MESSAGE_, 'ApplicationMode')))) and (not(string-length(java:_getStringProperty($_TIF_MESSAGE_, 'OutputTime'))))&quot;>&#xD;
                   &lt;xsl:value-of select=&quot;'0000'&quot;>&lt;/xsl:value-of>&#xD;
                &lt;/xsl:when>&#xD;
              &lt;/xsl:choose>&#xD;
          &lt;/xsl:variable>&#xD;
          &lt;xsl:value-of select=&quot;$if16&quot;>&lt;/xsl:value-of>&#xD;
        &lt;/ns5:Time>&#xD;
        &lt;ns5:MessagePriority>&#xD;
          &lt;xsl:variable name=&quot;if17&quot;>&#xD;
            &lt;xsl:choose>&#xD;
              &lt;xsl:when test=&quot;((java:_getStringProperty($_TIF_MESSAGE_, 'ApplicationMode'))!=('I') or not(string-length(java:_getStringProperty($_TIF_MESSAGE_, 'ApplicationMode'))))&quot;>&#xD;
                &lt;xsl:variable name=&quot;if18&quot;>&#xD;
                  &lt;xsl:choose>&#xD;
                    &lt;xsl:when test=&quot;($document_Input1/ns1:Envelope/ns4:AppHdr/ns4:Prty)=('HIGH')&quot;>&#xD;
                      &lt;xsl:value-of select=&quot;'U'&quot;>&lt;/xsl:value-of>&#xD;
                    &lt;/xsl:when>&#xD;
                    &lt;xsl:otherwise>&#xD;
                      &lt;xsl:value-of select=&quot;'N'&quot;>&lt;/xsl:value-of>&#xD;
                    &lt;/xsl:otherwise>&#xD;
                  &lt;/xsl:choose>&#xD;
                &lt;/xsl:variable>&#xD;
                &lt;xsl:value-of select=&quot;$if18&quot;>&lt;/xsl:value-of>&#xD;
              &lt;/xsl:when>&#xD;
            &lt;/xsl:choose>&#xD;
          &lt;/xsl:variable>&#xD;
          &lt;xsl:value-of select=&quot;$if17&quot;>&lt;/xsl:value-of>&#xD;
        &lt;/ns5:MessagePriority>&lt;/ns5:Block2>
      &lt;ns5:Block3>
        &lt;ns5:F121>
          &lt;xsl:value-of select=&quot;java:_setStringProperty($_TIF_MESSAGE_, 'Truncated_Fields', '')&quot;>&lt;/xsl:value-of>
        &lt;/ns5:F121>
      &lt;/ns5:Block3>
      &lt;ns5:Block4>
        &lt;ns2:Document>
          &lt;ns2:MT942>&lt;xsl:variable name=&quot;LineSeparator&quot;>&#xD;
	&lt;xsl:value-of select=&quot;'ENDOFFLINE'&quot;/>&#xD;
&lt;/xsl:variable>&#xD;
&lt;xsl:variable name=&quot;VariableSeparator&quot;>&#xD;
	&lt;xsl:value-of select=&quot;'ENDOFFVAR'&quot;/>&#xD;
&lt;/xsl:variable>
            &lt;ns2:F20a>
              &lt;ns2:F20>&lt;xsl:variable name=&quot;Resultant&quot;>&#xD;
&lt;xsl:value-of select=&quot;MX2MT:com.fiorano.funclet.MXtoMT.mx2MT_TR001withTruncate(string($document_Input1/ns1:Envelope/ns3:Document/ns3:BkToCstmrAcctRpt/ns3:Rpt/ns3:Id))&quot;>&lt;/xsl:value-of>&#xD;
&lt;/xsl:variable>&#xD;
&lt;xsl:value-of select=&quot;normalize-space(substring-before($Resultant,'ENDOFOUTPUT'))&quot;/>&#xD;
&lt;xsl:variable name=&quot;TruncTemp&quot;>&#xD;
  &lt;xsl:value-of select=&quot;java:_getStringProperty($_TIF_MESSAGE_, 'Truncated_Fields')&quot;/>&#xD;
&lt;/xsl:variable>&#xD;
&lt;xsl:value-of select=&quot;java:_setStringProperty($_TIF_MESSAGE_, 'Truncated_Fields', concat($TruncTemp,'F20_ENDOFFIELDTAG',substring-after($Resultant,'ENDOFOUTPUT'),'ENDOFTRUNCATEDFIELD'))&quot;/>&lt;/ns2:F20>
            &lt;/ns2:F20a>
            &lt;ns2:F25a>&lt;xsl:choose>&#xD;
&lt;xsl:when test=&quot;(not(string-length($document_Input1/ns1:Envelope/ns3:Document/ns3:BkToCstmrAcctRpt/ns3:Rpt/ns3:Acct/ns3:Ownr/ns3:Id/ns3:OrgId/ns3:AnyBIC)))&quot;>
              &lt;ns2:F25>&lt;xsl:value-of select=&quot;MX2MT:com.fiorano.funclet.MXtoMT.Field25_25P_Account(string($document_Input1/ns1:Envelope/ns3:Document/ns3:BkToCstmrAcctRpt/ns3:Rpt/ns3:Acct/ns3:Id/ns3:IBAN),string($document_Input1/ns1:Envelope/ns3:Document/ns3:BkToCstmrAcctRpt/ns3:Rpt/ns3:Acct/ns3:Id/ns3:Othr/ns3:Id))&quot;>&lt;/xsl:value-of>&lt;/ns2:F25>&lt;/xsl:when>&#xD;
&lt;xsl:otherwise>
              &lt;ns2:F25P>
                &lt;ns2:Account>&lt;xsl:value-of select=&quot;MX2MT:com.fiorano.funclet.MXtoMT.Field25_25P_Account(string($document_Input1/ns1:Envelope/ns3:Document/ns3:BkToCstmrAcctRpt/ns3:Rpt/ns3:Acct/ns3:Id/ns3:IBAN),string($document_Input1/ns1:Envelope/ns3:Document/ns3:BkToCstmrAcctRpt/ns3:Rpt/ns3:Acct/ns3:Id/ns3:Othr/ns3:Id))&quot;>&lt;/xsl:value-of>&lt;/ns2:Account>
                &lt;ns2:IdentifierCode>
                  &lt;xsl:variable name=&quot;if0&quot;>
                    &lt;xsl:choose>
                      &lt;xsl:when test=&quot;string-length($document_Input1/ns1:Envelope/ns3:Document/ns3:BkToCstmrAcctRpt/ns3:Rpt/ns3:Acct/ns3:Ownr/ns3:Id/ns3:OrgId/ns3:AnyBIC)&quot;>
                        &lt;xsl:value-of select=&quot;$document_Input1/ns1:Envelope/ns3:Document/ns3:BkToCstmrAcctRpt/ns3:Rpt/ns3:Acct/ns3:Ownr/ns3:Id/ns3:OrgId/ns3:AnyBIC&quot;>&lt;/xsl:value-of>
                      &lt;/xsl:when>
                    &lt;/xsl:choose>
                  &lt;/xsl:variable>
                  &lt;xsl:value-of select=&quot;$if0&quot;>&lt;/xsl:value-of>
                &lt;/ns2:IdentifierCode>
              &lt;/ns2:F25P>&lt;/xsl:otherwise>&#xD;
&lt;/xsl:choose>&lt;/ns2:F25a>
            &lt;ns2:F28a>
              &lt;ns2:F28C>
                &lt;ns2:StatementNumber>&lt;xsl:variable name=&quot;if3&quot;>&#xD;
                    &lt;xsl:choose>&#xD;
                      &lt;xsl:when test=&quot;(string-length($document_Input1/ns1:Envelope/ns3:Document/ns3:BkToCstmrAcctRpt/ns3:Rpt/ns3:LglSeqNb) and (string-length($document_Input1/ns1:Envelope/ns3:Document/ns3:BkToCstmrAcctRpt/ns3:Rpt/ns3:LglSeqNb))&amp;lt;=('5'))&quot;>&#xD;
&lt;xsl:value-of select=&quot;MX2MT:com.fiorano.funclet.MXtoMT.stringtoInteger(string($document_Input1/ns1:Envelope/ns3:Document/ns3:BkToCstmrAcctRpt/ns3:Rpt/ns3:LglSeqNb))&quot;>&lt;/xsl:value-of>&#xD;
 &lt;/xsl:when>&#xD;
                            &lt;xsl:otherwise>&#xD;
&lt;xsl:choose>&#xD;
&lt;xsl:when test=&quot;(string-length($document_Input1/ns1:Envelope/ns3:Document/ns3:BkToCstmrAcctRpt/ns3:Rpt/ns3:ElctrncSeqNb) and (string-length($document_Input1/ns1:Envelope/ns3:Document/ns3:BkToCstmrAcctRpt/ns3:Rpt/ns3:ElctrncSeqNb))&amp;lt;=('5'))&quot;>&#xD;
&lt;xsl:value-of select=&quot;MX2MT:com.fiorano.funclet.MXtoMT.stringtoInteger(string($document_Input1/ns1:Envelope/ns3:Document/ns3:BkToCstmrAcctRpt/ns3:Rpt/ns3:ElctrncSeqNb))&quot;>&lt;/xsl:value-of>&#xD;
 &lt;/xsl:when>&#xD;
   &lt;/xsl:choose>&#xD;
&lt;/xsl:otherwise>&#xD;
                    &lt;/xsl:choose>&#xD;
&lt;/xsl:variable>&#xD;
   &lt;xsl:choose>&#xD;
&lt;xsl:when test=&quot;(string-length($if3))&quot;>&#xD;
&lt;xsl:value-of select=&quot;$if3&quot;>&lt;/xsl:value-of>&#xD;
&lt;/xsl:when>&#xD;
&lt;/xsl:choose>&lt;/ns2:StatementNumber>
                &lt;ns2:SequenceNumber>
                  &lt;xsl:value-of select=&quot;MX2MT:com.fiorano.funclet.MXtoMT.stringtoInteger(string($document_Input1/ns1:Envelope/ns3:Document/ns3:BkToCstmrAcctRpt/ns3:Rpt/ns3:RptPgntn/ns3:PgNb))&quot;>&lt;/xsl:value-of>
                &lt;/ns2:SequenceNumber>
              &lt;/ns2:F28C>
            &lt;/ns2:F28a>
            &lt;ns2:F34a_1>
              &lt;ns2:F34F>
                &lt;ns2:Currency>
                  &lt;xsl:value-of select=&quot;$document_Input1/ns1:Envelope/ns3:Document/ns3:BkToCstmrAcctRpt/ns3:Rpt/ns3:Acct/ns3:Ccy&quot;>&lt;/xsl:value-of>
                &lt;/ns2:Currency>
                &lt;ns2:Amount>
                  &lt;xsl:value-of select=&quot;'0,'&quot;>&lt;/xsl:value-of>
                &lt;/ns2:Amount>
              &lt;/ns2:F34F>
            &lt;/ns2:F34a_1>
            &lt;ns2:F13a>
              &lt;ns2:F13D>
                &lt;ns2:Date>
                  &lt;xsl:variable name=&quot;if1&quot;>
                    &lt;xsl:choose>
                      &lt;xsl:when test=&quot;$document_Input1/ns1:Envelope/ns3:Document/ns3:BkToCstmrAcctRpt/ns3:Rpt/ns3:CreDtTm&quot;>
                        &lt;xsl:value-of select=&quot;$document_Input1/ns1:Envelope/ns3:Document/ns3:BkToCstmrAcctRpt/ns3:Rpt/ns3:CreDtTm&quot;>&lt;/xsl:value-of>
                      &lt;/xsl:when>
                      &lt;xsl:otherwise>
                        &lt;xsl:value-of select=&quot;$document_Input1/ns1:Envelope/ns3:Document/ns3:BkToCstmrAcctRpt/ns3:GrpHdr/ns3:CreDtTm&quot;>&lt;/xsl:value-of>
                      &lt;/xsl:otherwise>
                    &lt;/xsl:choose>
                  &lt;/xsl:variable>
                  &lt;xsl:value-of select=&quot;MX2MT:com.fiorano.funclet.MXtoMT.MX_To_MTDateTimeOffset_Date(string($if1))&quot;>&lt;/xsl:value-of>
                &lt;/ns2:Date>
                &lt;ns2:Time>
                  &lt;xsl:variable name=&quot;if2&quot;>
                    &lt;xsl:choose>
                      &lt;xsl:when test=&quot;$document_Input1/ns1:Envelope/ns3:Document/ns3:BkToCstmrAcctRpt/ns3:Rpt/ns3:CreDtTm&quot;>
                        &lt;xsl:value-of select=&quot;$document_Input1/ns1:Envelope/ns3:Document/ns3:BkToCstmrAcctRpt/ns3:Rpt/ns3:CreDtTm&quot;>&lt;/xsl:value-of>
                      &lt;/xsl:when>
                      &lt;xsl:otherwise>
                        &lt;xsl:value-of select=&quot;$document_Input1/ns1:Envelope/ns3:Document/ns3:BkToCstmrAcctRpt/ns3:GrpHdr/ns3:CreDtTm&quot;>&lt;/xsl:value-of>
                      &lt;/xsl:otherwise>
                    &lt;/xsl:choose>
                  &lt;/xsl:variable>
                  &lt;xsl:value-of select=&quot;MX2MT:com.fiorano.funclet.MXtoMT.MX_To_MTDateTimeOffset_Time(string($if2))&quot;>&lt;/xsl:value-of>
                &lt;/ns2:Time>
                &lt;ns2:Sign>
                  &lt;xsl:variable name=&quot;if3&quot;>
                    &lt;xsl:choose>
                      &lt;xsl:when test=&quot;$document_Input1/ns1:Envelope/ns3:Document/ns3:BkToCstmrAcctRpt/ns3:Rpt/ns3:CreDtTm&quot;>
                        &lt;xsl:value-of select=&quot;$document_Input1/ns1:Envelope/ns3:Document/ns3:BkToCstmrAcctRpt/ns3:Rpt/ns3:CreDtTm&quot;>&lt;/xsl:value-of>
                      &lt;/xsl:when>
                      &lt;xsl:otherwise>
                        &lt;xsl:value-of select=&quot;$document_Input1/ns1:Envelope/ns3:Document/ns3:BkToCstmrAcctRpt/ns3:GrpHdr/ns3:CreDtTm&quot;>&lt;/xsl:value-of>
                      &lt;/xsl:otherwise>
                    &lt;/xsl:choose>
                  &lt;/xsl:variable>
                  &lt;xsl:value-of select=&quot;MX2MT:com.fiorano.funclet.MXtoMT.MX_To_MTDateTimeOffset_Sign(string($if3))&quot;>&lt;/xsl:value-of>
                &lt;/ns2:Sign>
                &lt;ns2:Offset>
                  &lt;xsl:variable name=&quot;if4&quot;>
                    &lt;xsl:choose>
                      &lt;xsl:when test=&quot;$document_Input1/ns1:Envelope/ns3:Document/ns3:BkToCstmrAcctRpt/ns3:Rpt/ns3:CreDtTm&quot;>
                        &lt;xsl:value-of select=&quot;$document_Input1/ns1:Envelope/ns3:Document/ns3:BkToCstmrAcctRpt/ns3:Rpt/ns3:CreDtTm&quot;>&lt;/xsl:value-of>
                      &lt;/xsl:when>
                      &lt;xsl:otherwise>
                        &lt;xsl:value-of select=&quot;$document_Input1/ns1:Envelope/ns3:Document/ns3:BkToCstmrAcctRpt/ns3:GrpHdr/ns3:CreDtTm&quot;>&lt;/xsl:value-of>
                      &lt;/xsl:otherwise>
                    &lt;/xsl:choose>
                  &lt;/xsl:variable>
                  &lt;xsl:value-of select=&quot;MX2MT:com.fiorano.funclet.MXtoMT.MX_To_MTDateTimeOffset_Offset(string($if4))&quot;>&lt;/xsl:value-of>
                &lt;/ns2:Offset>
              &lt;/ns2:F13D>
            &lt;/ns2:F13a>&lt;xsl:variable name=&quot;AppendedEntry&quot;>&#xD;
	&lt;xsl:for-each select=&quot;$document_Input1/ns1:Envelope/ns3:Document/ns3:BkToCstmrAcctRpt/ns3:Rpt/ns3:Ntry&quot;>&#xD;
		&lt;xsl:value-of select=&quot;./ns3:ValDt/ns3:Dt&quot;/>&#xD;
		&lt;xsl:value-of select=&quot;$VariableSeparator&quot;/>&#xD;
		&lt;xsl:value-of select=&quot;./ns3:ValDt/ns3:DtTm&quot;/>&#xD;
		&lt;xsl:value-of select=&quot;$VariableSeparator&quot;/>&#xD;
		&lt;xsl:value-of select=&quot;./ns3:BookgDt/ns3:Dt&quot;/>&#xD;
		&lt;xsl:value-of select=&quot;$VariableSeparator&quot;/>&#xD;
		&lt;xsl:value-of select=&quot;./ns3:BookgDt/ns3:DtTm&quot;/>&#xD;
		&lt;xsl:value-of select=&quot;$VariableSeparator&quot;/>&#xD;
		&lt;xsl:value-of select=&quot;./ns3:CdtDbtInd&quot;/>&#xD;
		&lt;xsl:value-of select=&quot;$VariableSeparator&quot;/>&#xD;
		&lt;xsl:value-of select=&quot;./ns3:RvslInd&quot;/>&#xD;
		&lt;xsl:value-of select=&quot;$VariableSeparator&quot;/>&#xD;
		&lt;xsl:value-of select=&quot;./ns3:Amt/@Ccy&quot;/>&#xD;
		&lt;xsl:value-of select=&quot;$VariableSeparator&quot;/>&#xD;
		&lt;xsl:value-of select=&quot;./ns3:Amt&quot;/>&#xD;
		&lt;xsl:value-of select=&quot;$VariableSeparator&quot;/>&#xD;
		&lt;xsl:value-of select=&quot;./ns3:NtryDtls/ns3:TxDtls/ns3:Refs/ns3:EndToEndId&quot;/>&#xD;
		&lt;xsl:value-of select=&quot;$LineSeparator&quot;/>&#xD;
	&lt;/xsl:for-each>&#xD;
&lt;/xsl:variable>&#xD;
&#xD;
&lt;xsl:variable name=&quot;ResultantEntry&quot;>&#xD;
&lt;xsl:value-of select=&quot;MX2MT:com.fiorano.funclet.MXtoMT.MX_To_MTEntry_CAMT053withTruncate(string($AppendedEntry),string($VariableSeparator),string($LineSeparator))&quot;>&lt;/xsl:value-of>&#xD;
&lt;/xsl:variable>				&#xD;
				&#xD;
&lt;xsl:call-template name=&quot;tokenize6&quot;>&#xD;
    &lt;xsl:with-param name=&quot;text&quot; select=&quot;substring-before($ResultantEntry,'ENDOFOUTPUT')&quot;/>&#xD;
	&lt;xsl:with-param name=&quot;LineSeparator&quot; select=&quot;$LineSeparator&quot;/>&#xD;
	&lt;xsl:with-param name=&quot;VarSeparator&quot; select=&quot;$VariableSeparator&quot;/>&#xD;
&lt;/xsl:call-template>&#xD;
&lt;xsl:variable name=&quot;TruncTemp&quot;>&#xD;
  &lt;xsl:value-of select=&quot;java:_getStringProperty($_TIF_MESSAGE_, 'Truncated_Fields')&quot;/>&#xD;
&lt;/xsl:variable>&#xD;
&lt;xsl:value-of select=&quot;java:_setStringProperty($_TIF_MESSAGE_, 'Truncated_Fields', concat($TruncTemp,'F61_ENDOFFIELDTAG',substring-after($ResultantEntry,'ENDOFOUTPUT'),'ENDOFTRUNCATEDFIELD'))&quot;/>
            &lt;ns2:Loop1>
              &lt;ns2:F61a>
                &lt;ns2:F61>
                  &lt;ns2:FundsCode>
                    &lt;xsl:value-of select=&quot;''&quot;>&lt;/xsl:value-of>
                  &lt;/ns2:FundsCode>
                &lt;/ns2:F61>
              &lt;/ns2:F61a>
            &lt;/ns2:Loop1>
            &lt;ns2:F90a_1>
              &lt;ns2:F90D>
                &lt;ns2:Number>
                  &lt;xsl:variable name=&quot;if5&quot;>
                    &lt;xsl:choose>
                      &lt;xsl:when test=&quot;((MXtoMT:com.fiorano.funclet.MXtoMT.mx2MTCurrencyAmount(string($document_Input1/ns1:Envelope/ns3:Document/ns3:BkToCstmrAcctRpt/ns3:Rpt/ns3:TxsSummry/ns3:TtlDbtNtries/ns3:Sum)))&amp;gt;('15') and ($document_Input1/ns1:Envelope/ns3:Document/ns3:BkToCstmrAcctRpt/ns3:Rpt/ns3:TxsSummry/ns3:TtlDbtNtries/ns3:NbOfNtries)&amp;gt;('5'))&quot;>
                        &lt;xsl:value-of select=&quot;$document_Input1/ns1:Envelope/ns3:Document/ns3:BkToCstmrAcctRpt/ns3:Rpt/ns3:TxsSummry/ns3:TtlDbtNtries/ns3:NbOfNtries&quot;>&lt;/xsl:value-of>
                      &lt;/xsl:when>
                    &lt;/xsl:choose>
                  &lt;/xsl:variable>
                  &lt;xsl:value-of select=&quot;$if5&quot;>&lt;/xsl:value-of>
                &lt;/ns2:Number>
                &lt;ns2:Currency>
                  &lt;xsl:variable name=&quot;if6&quot;>
                    &lt;xsl:choose>
                      &lt;xsl:when test=&quot;((MXtoMT:com.fiorano.funclet.MXtoMT.mx2MTCurrencyAmount(string($document_Input1/ns1:Envelope/ns3:Document/ns3:BkToCstmrAcctRpt/ns3:Rpt/ns3:TxsSummry/ns3:TtlDbtNtries/ns3:Sum)))&amp;gt;('15') and ($document_Input1/ns1:Envelope/ns3:Document/ns3:BkToCstmrAcctRpt/ns3:Rpt/ns3:TxsSummry/ns3:TtlDbtNtries/ns3:NbOfNtries)&amp;gt;('5'))&quot;>
                        &lt;xsl:value-of select=&quot;$document_Input1/ns1:Envelope/ns3:Document/ns3:BkToCstmrAcctRpt/ns3:Rpt/ns3:Acct/ns3:Ccy&quot;>&lt;/xsl:value-of>
                      &lt;/xsl:when>
                    &lt;/xsl:choose>
                  &lt;/xsl:variable>
                  &lt;xsl:value-of select=&quot;$if6&quot;>&lt;/xsl:value-of>
                &lt;/ns2:Currency>
                &lt;ns2:Amount>
                  &lt;xsl:variable name=&quot;if7&quot;>
                    &lt;xsl:choose>
                      &lt;xsl:when test=&quot;((MXtoMT:com.fiorano.funclet.MXtoMT.mx2MTCurrencyAmount(string($document_Input1/ns1:Envelope/ns3:Document/ns3:BkToCstmrAcctRpt/ns3:Rpt/ns3:TxsSummry/ns3:TtlDbtNtries/ns3:Sum)))&amp;gt;('15') and ($document_Input1/ns1:Envelope/ns3:Document/ns3:BkToCstmrAcctRpt/ns3:Rpt/ns3:TxsSummry/ns3:TtlDbtNtries/ns3:NbOfNtries)&amp;gt;('5'))&quot;>
                        &lt;xsl:value-of select=&quot;MXtoMT:com.fiorano.funclet.MXtoMT.mx2MTCurrencyAmount(string($document_Input1/ns1:Envelope/ns3:Document/ns3:BkToCstmrAcctRpt/ns3:Rpt/ns3:TxsSummry/ns3:TtlDbtNtries/ns3:Sum))&quot;>&lt;/xsl:value-of>
                      &lt;/xsl:when>
                    &lt;/xsl:choose>
                  &lt;/xsl:variable>
                  &lt;xsl:value-of select=&quot;$if7&quot;>&lt;/xsl:value-of>
                &lt;/ns2:Amount>
              &lt;/ns2:F90D>
            &lt;/ns2:F90a_1>
            &lt;ns2:F90a_2>
              &lt;ns2:F90C>
                &lt;ns2:Number>
                  &lt;xsl:variable name=&quot;if8&quot;>
                    &lt;xsl:choose>
                      &lt;xsl:when test=&quot;((MXtoMT:com.fiorano.funclet.MXtoMT.mx2MTCurrencyAmount(string($document_Input1/ns1:Envelope/ns3:Document/ns3:BkToCstmrAcctRpt/ns3:Rpt/ns3:TxsSummry/ns3:TtlCdtNtries/ns3:Sum)))&amp;gt;('15') and ($document_Input1/ns1:Envelope/ns3:Document/ns3:BkToCstmrAcctRpt/ns3:Rpt/ns3:TxsSummry/ns3:TtlCdtNtries/ns3:NbOfNtries)&amp;gt;('5'))&quot;>
                        &lt;xsl:value-of select=&quot;$document_Input1/ns1:Envelope/ns3:Document/ns3:BkToCstmrAcctRpt/ns3:Rpt/ns3:TxsSummry/ns3:TtlCdtNtries/ns3:NbOfNtries&quot;>&lt;/xsl:value-of>
                      &lt;/xsl:when>
                    &lt;/xsl:choose>
                  &lt;/xsl:variable>
                  &lt;xsl:value-of select=&quot;$if8&quot;>&lt;/xsl:value-of>
                &lt;/ns2:Number>
                &lt;ns2:Currency>
                  &lt;xsl:variable name=&quot;if9&quot;>
                    &lt;xsl:choose>
                      &lt;xsl:when test=&quot;((MXtoMT:com.fiorano.funclet.MXtoMT.mx2MTCurrencyAmount(string($document_Input1/ns1:Envelope/ns3:Document/ns3:BkToCstmrAcctRpt/ns3:Rpt/ns3:TxsSummry/ns3:TtlCdtNtries/ns3:Sum)))&amp;gt;('15') and ($document_Input1/ns1:Envelope/ns3:Document/ns3:BkToCstmrAcctRpt/ns3:Rpt/ns3:TxsSummry/ns3:TtlCdtNtries/ns3:NbOfNtries)&amp;gt;('5'))&quot;>
                        &lt;xsl:value-of select=&quot;$document_Input1/ns1:Envelope/ns3:Document/ns3:BkToCstmrAcctRpt/ns3:Rpt/ns3:Acct/ns3:Ccy&quot;>&lt;/xsl:value-of>
                      &lt;/xsl:when>
                    &lt;/xsl:choose>
                  &lt;/xsl:variable>
                  &lt;xsl:value-of select=&quot;$if9&quot;>&lt;/xsl:value-of>
                &lt;/ns2:Currency>
                &lt;ns2:Amount>
                  &lt;xsl:variable name=&quot;if10&quot;>
                    &lt;xsl:choose>
                      &lt;xsl:when test=&quot;((MXtoMT:com.fiorano.funclet.MXtoMT.mx2MTCurrencyAmount(string($document_Input1/ns1:Envelope/ns3:Document/ns3:BkToCstmrAcctRpt/ns3:Rpt/ns3:TxsSummry/ns3:TtlCdtNtries/ns3:Sum)))&amp;gt;('15') and ($document_Input1/ns1:Envelope/ns3:Document/ns3:BkToCstmrAcctRpt/ns3:Rpt/ns3:TxsSummry/ns3:TtlCdtNtries/ns3:NbOfNtries)&amp;gt;('5'))&quot;>
                        &lt;xsl:value-of select=&quot;MXtoMT:com.fiorano.funclet.MXtoMT.mx2MTCurrencyAmount(string($document_Input1/ns1:Envelope/ns3:Document/ns3:BkToCstmrAcctRpt/ns3:Rpt/ns3:TxsSummry/ns3:TtlCdtNtries/ns3:Sum))&quot;>&lt;/xsl:value-of>
                      &lt;/xsl:when>
                    &lt;/xsl:choose>
                  &lt;/xsl:variable>
                  &lt;xsl:value-of select=&quot;$if10&quot;>&lt;/xsl:value-of>
                &lt;/ns2:Amount>
              &lt;/ns2:F90C>
            &lt;/ns2:F90a_2>
          &lt;/ns2:MT942>
        &lt;/ns2:Document>
      &lt;/ns5:Block4>
    &lt;/ns5:FinMessage>
  &lt;/xsl:template>&lt;xsl:template name=&quot;tokenize6&quot;>&#xD;
 &lt;xsl:param name=&quot;text&quot; select=&quot;.&quot;/>&#xD;
 &lt;xsl:param name=&quot;LineSeparator&quot; select=&quot;'ENDOFFLINE'&quot;/>&#xD;
 &lt;xsl:param name=&quot;VarSeparator&quot; select=&quot;'ENDOFFVAR'&quot;/>&#xD;
        &lt;xsl:choose>&#xD;
        &lt;xsl:when test=&quot;not(string-length($text))&quot;>&#xD;
        &lt;/xsl:when>&#xD;
            &lt;xsl:when test=&quot;not(contains($text, $LineSeparator))&quot;>&#xD;
            &lt;ns2:Loop1>&#xD;
			&lt;ns2:F61a>&#xD;
            &lt;ns2:F61>&#xD;
                &lt;ns2:ValueDate>&#xD;
                &lt;xsl:value-of select=&quot;substring-before($text, $VarSeparator)&quot;/>&#xD;
                &lt;/ns2:ValueDate>&#xD;
&#xD;
                &lt;xsl:variable name=&quot;Cdval11&quot;>&#xD;
                &lt;xsl:value-of select=&quot;substring-after($text, $VarSeparator)&quot;/>&#xD;
                &lt;/xsl:variable>&#xD;
&#xD;
                &lt;ns2:EntryDate>&#xD;
                &lt;xsl:value-of select=&quot;substring-before($Cdval11, $VarSeparator)&quot;/>&#xD;
                &lt;/ns2:EntryDate>&#xD;
				&#xD;
				&lt;xsl:variable name=&quot;Cdval22&quot;>&#xD;
                 &lt;xsl:value-of select=&quot;substring-after($Cdval11, $VarSeparator)&quot;/>&#xD;
                &lt;/xsl:variable>&#xD;
&#xD;
                &lt;ns2:DebitCreditMark>&#xD;
                &lt;xsl:value-of select=&quot;substring-before($Cdval22, $VarSeparator)&quot;/>&#xD;
                &lt;/ns2:DebitCreditMark>&#xD;
				&#xD;
				&lt;xsl:variable name=&quot;Cdval33&quot;>&#xD;
                &lt;xsl:value-of select=&quot;substring-after($Cdval22, $VarSeparator)&quot;/>&#xD;
                &lt;/xsl:variable>&#xD;
&#xD;
                &lt;ns2:Amount>&#xD;
                &lt;xsl:value-of select=&quot;substring-before($Cdval33, $VarSeparator)&quot;/>&#xD;
                &lt;/ns2:Amount>&#xD;
				&#xD;
                &lt;ns2:TransactionType>&#xD;
               	&lt;xsl:value-of select=&quot;'N'&quot;/>&#xD;
                &lt;/ns2:TransactionType>&#xD;
				&#xD;
                &lt;ns2:IdentificationCode>&#xD;
                &lt;xsl:value-of select=&quot;'TRF'&quot;/>&#xD;
                &lt;/ns2:IdentificationCode>&#xD;
				&#xD;
				&lt;xsl:variable name=&quot;Cdval44&quot;>&#xD;
                &lt;xsl:value-of select=&quot;substring-after($Cdval33, $VarSeparator)&quot;/>&#xD;
                &lt;/xsl:variable>&#xD;
&#xD;
                &lt;ns2:ReferenceForTheAccountOwner>&#xD;
                &lt;xsl:value-of select=&quot;substring-before($Cdval44, $VarSeparator)&quot;/>&#xD;
                &lt;/ns2:ReferenceForTheAccountOwner>&#xD;
			&#xD;
            &lt;/ns2:F61>&#xD;
			&lt;/ns2:F61a>&#xD;
			&lt;/ns2:Loop1>&#xD;
            &lt;/xsl:when>&#xD;
           &lt;xsl:when test=&quot;((contains($text, $LineSeparator))) &quot;>&#xD;
&#xD;
            &lt;ns2:Loop1>&#xD;
			&lt;ns2:F61a>&#xD;
            &lt;ns2:F61>&#xD;
                &lt;ns2:ValueDate>&#xD;
                &lt;xsl:value-of select=&quot;substring-before($text, $VarSeparator)&quot;/>&#xD;
                &lt;/ns2:ValueDate>&#xD;
&#xD;
                &lt;xsl:variable name=&quot;nxtVal11&quot;>&#xD;
                &lt;xsl:value-of select=&quot;substring-after($text, $VarSeparator)&quot;/>&#xD;
                &lt;/xsl:variable>&#xD;
&#xD;
                &lt;ns2:EntryDate>&#xD;
                &lt;xsl:value-of select=&quot;substring-before($nxtVal11, $VarSeparator)&quot;/>&#xD;
                &lt;/ns2:EntryDate>&#xD;
				&#xD;
				&lt;xsl:variable name=&quot;nxtVal22&quot;>&#xD;
                 &lt;xsl:value-of select=&quot;substring-after($nxtVal11, $VarSeparator)&quot;/>&#xD;
                &lt;/xsl:variable>&#xD;
&#xD;
                &lt;ns2:DebitCreditMark>&#xD;
                &lt;xsl:value-of select=&quot;substring-before($nxtVal22, $VarSeparator)&quot;/>&#xD;
                &lt;/ns2:DebitCreditMark>&#xD;
				&#xD;
				&lt;xsl:variable name=&quot;nxtVal33&quot;>&#xD;
                &lt;xsl:value-of select=&quot;substring-after($nxtVal22, $VarSeparator)&quot;/>&#xD;
                &lt;/xsl:variable>&#xD;
&#xD;
                &lt;ns2:Amount>&#xD;
                &lt;xsl:value-of select=&quot;substring-before($nxtVal33, $VarSeparator)&quot;/>&#xD;
                &lt;/ns2:Amount>&#xD;
				&#xD;
                &lt;ns2:TransactionType>&#xD;
               	&lt;xsl:value-of select=&quot;'N'&quot;/>&#xD;
                &lt;/ns2:TransactionType>&#xD;
				&#xD;
                &lt;ns2:IdentificationCode>&#xD;
                &lt;xsl:value-of select=&quot;'TRF'&quot;/>&#xD;
                &lt;/ns2:IdentificationCode>&#xD;
				&#xD;
				&lt;xsl:variable name=&quot;nxtVal44&quot;>&#xD;
                &lt;xsl:value-of select=&quot;substring-after($nxtVal33, $VarSeparator)&quot;/>&#xD;
                &lt;/xsl:variable>&#xD;
&#xD;
                &lt;ns2:ReferenceForTheAccountOwner>&#xD;
                &lt;xsl:value-of select=&quot;substring-before($nxtVal44, $VarSeparator)&quot;/>&#xD;
                &lt;/ns2:ReferenceForTheAccountOwner>&#xD;
			&#xD;
            &lt;/ns2:F61>&#xD;
			&lt;/ns2:F61a>&#xD;
			&lt;/ns2:Loop1>&#xD;
            &lt;xsl:call-template name=&quot;tokenize6&quot;>&#xD;
                &lt;xsl:with-param name=&quot;text&quot; select=&quot;substring-after($text, $LineSeparator)&quot;/>&#xD;
            &lt;/xsl:call-template>&#xD;
            &lt;/xsl:when>&#xD;
        &lt;/xsl:choose>&#xD;
&lt;/xsl:template>
&lt;!--The list of parameters defined by user-->
  &lt;xsl:param name=&quot;_TIF_MESSAGE_&quot;>&lt;/xsl:param>
&lt;!--The list of Extensions defined by user-->
&lt;/xsl:stylesheet></target:property>
      <target:property encrypt="false" name="XSLT Engine" type="java.lang.String">Xalan</target:property>
      <target:property encrypt="false" name="Transformation Class Name" type="java.lang.String"></target:property>
    </target:configuration-properties>
  </target:instance>
</target:target>