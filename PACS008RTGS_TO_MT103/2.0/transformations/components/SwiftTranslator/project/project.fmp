<?xml version="1.0" encoding="UTF-8"?>
<mappermodel:MapperProject xmlns:mappermodel="http://www.fiorano.com/tools/mapper/mappermodel" convertor="nameIndexed" suppressEmptyItems="true" suppressPattern="string-length({0})" version="3.0.2">
  <mappermodel:XSLTVersion>1.0</mappermodel:XSLTVersion>
  <mappermodel:XSLTEngine>org.apache.xalan.processor.TransformerFactoryImpl</mappermodel:XSLTEngine>
  <mappermodel:XSLTEncoding>UTF-8</mappermodel:XSLTEncoding>
  <mappermodel:OutputMethod>unspecified</mappermodel:OutputMethod>
  <mappermodel:OutputEncoding>UTF-8</mappermodel:OutputEncoding>
  <mappermodel:indent>true</mappermodel:indent>
  <mappermodel:setDTD>false</mappermodel:setDTD>
  <mappermodel:omit-xml-declaration>false</mappermodel:omit-xml-declaration>
  <mappermodel:createEmptyOutputTags>false</mappermodel:createEmptyOutputTags>
  <mappermodel:copyUnmappedFromInput enabled="false"/>
  <mappermodel:disableOutputEscapingForANY>false</mappermodel:disableOutputEscapingForANY>
  <mappermodel:Comments>Key in relevant comments</mappermodel:Comments>
  <mappermodel:excludeResultPrefixes></mappermodel:excludeResultPrefixes>
  <mappermodel:addDefaultXSTypeAttributes>false</mappermodel:addDefaultXSTypeAttributes>
  <mappermodel:InputStructure>
    <mappermodel:Structure duplicates="" filePath="Application-Context.DTD" mime="DTD" name="Application-Context" rootName="Context"/>
    <mappermodel:Structure duplicates="" filePath="IN_PORT.XSD" mime="XSD" name="IN_PORT" rootName="{urn:swift:xsd:envelope}Envelope">
      <mappermodel:ExternalStructure filePath="IN_PORT_ext.XSD" mime="XSD" name="urn:iso:std:iso:20022:tech:xsd:head.001.001.01"/>
      <mappermodel:ExternalStructure filePath="IN_PORT_ext1.XSD" mime="XSD" name="urn:iso:std:iso:20022:tech:xsd:pacs.008.001.08"/>
    </mappermodel:Structure>
  </mappermodel:InputStructure>
  <mappermodel:OutputStructure>
    <mappermodel:Structure duplicates="{OUT_PORT:0,FinMessage:0,Block4:0,Document:0,MT103:0,[ZERO MANY]:1}1" filePath="OUT_PORT.XSD" mime="XSD" name="OUT_PORT" rootName="{urn:swift:xsd:mtmsg.2020}FinMessage">
      <mappermodel:ExternalStructure filePath="OUT_PORT_ext.XSD" mime="XSD" name="urn:swift:xsd:fin.103.2020"/>
    </mappermodel:Structure>
  </mappermodel:OutputStructure>
  <mappermodel:Namespaces>
    <mappermodel:namespace prefix="ns1" uri="urn:swift:xsd:envelope"/>
    <mappermodel:namespace prefix="ns2" uri="http://www.w3.org/2001/XMLSchema"/>
    <mappermodel:namespace prefix="ns3" uri="urn:iso:std:iso:20022:tech:xsd:pacs.008.001.08"/>
    <mappermodel:namespace prefix="ns4" uri="urn:iso:std:iso:20022:tech:xsd:head.001.001.01"/>
    <mappermodel:namespace prefix="ns5" uri="urn:swift:xsd:mtmsg.2020"/>
    <mappermodel:namespace prefix="ns6" uri="urn:swift:xsd:fin.103.2020"/>
  </mappermodel:Namespaces>
  <mappermodel:Mappings>
    <mappermodel:GraphModel inputPins="1,2" outputNode="OUT_PORT:0,FinMessage:0,Block4:0,Document:0,MT103:0,F20a:0,[Choice]:0,F20:0" x="-1" y="-1">
      <mappermodel:TreeGraphNode inputNode="IN_PORT:0,Envelope:0,Document:0,FIToFICstmrCdtTrf:0,CdtTrfTxInf:0,PmtId:0,InstrId:0" x="191" y="115">
        <mappermodel:InputPins>1st</mappermodel:InputPins>
        <mappermodel:OutputPins>1st</mappermodel:OutputPins>
      </mappermodel:TreeGraphNode>
      <mappermodel:Link inputID="0" inputIndex="0" outputID="1" outputIndex="0"/>
    </mappermodel:GraphModel>
    <mappermodel:GraphModel inputPins="1,2" outputNode="OUT_PORT:0,FinMessage:0,Block4:0,Document:0,MT103:0,F54a:0,[Choice]:0,F54B:0,PartyIdentifier:0" x="699" y="127">
      <mappermodel:FunctionGraphNode label="Concat" type="20" x="312" y="117">
        <mappermodel:InputPins>1,2,3</mappermodel:InputPins>
        <mappermodel:OutputPins>str</mappermodel:OutputPins>
        <mappermodel:Properties/>
      </mappermodel:FunctionGraphNode>
      <mappermodel:FunctionGraphNode label="//" type="22" x="135" y="88">
        <mappermodel:InputPins></mappermodel:InputPins>
        <mappermodel:OutputPins>str</mappermodel:OutputPins>
        <mappermodel:Properties/>
      </mappermodel:FunctionGraphNode>
      <mappermodel:Link inputID="1" inputIndex="0" outputID="2" outputIndex="0"/>
      <mappermodel:Link inputID="0" inputIndex="0" outputID="1" outputIndex="0"/>
    </mappermodel:GraphModel>
    <mappermodel:GraphModel inputPins="1,2" outputNode="OUT_PORT:0,FinMessage:0,Block4:0,Document:0,MT103:0,F55a:0,[Choice]:0,F55B:0,PartyIdentifier:0" x="667" y="73">
      <mappermodel:FunctionGraphNode label="//" type="22" x="204" y="27">
        <mappermodel:InputPins></mappermodel:InputPins>
        <mappermodel:OutputPins>str</mappermodel:OutputPins>
        <mappermodel:Properties/>
      </mappermodel:FunctionGraphNode>
      <mappermodel:FunctionGraphNode label="Concat" type="20" x="381" y="56">
        <mappermodel:InputPins>1,2,3</mappermodel:InputPins>
        <mappermodel:OutputPins>str</mappermodel:OutputPins>
        <mappermodel:Properties/>
      </mappermodel:FunctionGraphNode>
      <mappermodel:Link inputID="2" inputIndex="0" outputID="1" outputIndex="0"/>
      <mappermodel:Link inputID="0" inputIndex="0" outputID="2" outputIndex="0"/>
    </mappermodel:GraphModel>
    <mappermodel:GraphModel inputPins="1,2,3,4" outputNode="OUT_PORT:0,FinMessage:0,Block3:0,F121:0" x="588" y="53">
      <mappermodel:TreeGraphNode inputNode="IN_PORT:0,Envelope:0,Document:0,FIToFICstmrCdtTrf:0,CdtTrfTxInf:0,PmtId:0,UETR:0" x="-1" y="-1">
        <mappermodel:InputPins>1st</mappermodel:InputPins>
        <mappermodel:OutputPins>1st</mappermodel:OutputPins>
      </mappermodel:TreeGraphNode>
      <mappermodel:FunctionGraphNode label="setStringProperty" type="136" x="306" y="94">
        <mappermodel:InputPins>name,value</mappermodel:InputPins>
        <mappermodel:OutputPins>R</mappermodel:OutputPins>
        <mappermodel:Properties/>
      </mappermodel:FunctionGraphNode>
      <mappermodel:FunctionGraphNode label="Truncated_Fields" type="22" x="57" y="176">
        <mappermodel:InputPins></mappermodel:InputPins>
        <mappermodel:OutputPins>str</mappermodel:OutputPins>
        <mappermodel:Properties/>
      </mappermodel:FunctionGraphNode>
      <mappermodel:FunctionGraphNode label="UETR_ID" type="22" x="122" y="94">
        <mappermodel:InputPins></mappermodel:InputPins>
        <mappermodel:OutputPins>str</mappermodel:OutputPins>
        <mappermodel:Properties/>
      </mappermodel:FunctionGraphNode>
      <mappermodel:FunctionGraphNode label="setStringProperty" type="136" x="350" y="177">
        <mappermodel:InputPins>name,value</mappermodel:InputPins>
        <mappermodel:OutputPins>R</mappermodel:OutputPins>
        <mappermodel:Properties/>
      </mappermodel:FunctionGraphNode>
      <mappermodel:FunctionGraphNode label="" type="22" x="139" y="201">
        <mappermodel:InputPins></mappermodel:InputPins>
        <mappermodel:OutputPins>str</mappermodel:OutputPins>
        <mappermodel:Properties/>
      </mappermodel:FunctionGraphNode>
      <mappermodel:Link inputID="0" inputIndex="0" outputID="1" outputIndex="0"/>
      <mappermodel:Link inputID="2" inputIndex="0" outputID="4" outputIndex="0"/>
      <mappermodel:Link inputID="5" inputIndex="0" outputID="3" outputIndex="0"/>
      <mappermodel:Link inputID="5" inputIndex="1" outputID="6" outputIndex="0"/>
      <mappermodel:Link inputID="2" inputIndex="1" outputID="1" outputIndex="0"/>
      <mappermodel:Link inputID="0" inputIndex="1" outputID="2" outputIndex="0"/>
      <mappermodel:Link inputID="0" inputIndex="2" outputID="5" outputIndex="0"/>
    </mappermodel:GraphModel>
    <mappermodel:GraphModel inputPins="1,2" outputNode="OUT_PORT:0,FinMessage:0,Block3:0,F111:0" x="681" y="42">
      <mappermodel:TreeGraphNode inputNode="IN_PORT:0,Envelope:0,Document:0,FIToFICstmrCdtTrf:0,CdtTrfTxInf:0,PmtTpInf:0,[ZERO MANY]:0,SvcLvl:0,[Choice]:0,Cd:0" x="-1" y="-1">
        <mappermodel:InputPins>1st</mappermodel:InputPins>
        <mappermodel:OutputPins>1st</mappermodel:OutputPins>
      </mappermodel:TreeGraphNode>
      <mappermodel:FunctionGraphNode label="StartsWith" type="49" x="140" y="109">
        <mappermodel:InputPins>str,start</mappermodel:InputPins>
        <mappermodel:OutputPins>bool</mappermodel:OutputPins>
        <mappermodel:Properties/>
      </mappermodel:FunctionGraphNode>
      <mappermodel:FunctionGraphNode label="G00" type="22" x="13" y="151">
        <mappermodel:InputPins></mappermodel:InputPins>
        <mappermodel:OutputPins>str</mappermodel:OutputPins>
        <mappermodel:Properties/>
      </mappermodel:FunctionGraphNode>
      <mappermodel:FunctionGraphNode label="SubString-Offset-Length" type="26" x="261" y="174">
        <mappermodel:InputPins>str,offset,length</mappermodel:InputPins>
        <mappermodel:OutputPins>str</mappermodel:OutputPins>
        <mappermodel:Properties/>
      </mappermodel:FunctionGraphNode>
      <mappermodel:FunctionGraphNode label="2" type="22" x="63" y="180">
        <mappermodel:InputPins></mappermodel:InputPins>
        <mappermodel:OutputPins>str</mappermodel:OutputPins>
        <mappermodel:Properties/>
      </mappermodel:FunctionGraphNode>
      <mappermodel:FunctionGraphNode label="3" type="22" x="43" y="203">
        <mappermodel:InputPins></mappermodel:InputPins>
        <mappermodel:OutputPins>str</mappermodel:OutputPins>
        <mappermodel:Properties/>
      </mappermodel:FunctionGraphNode>
      <mappermodel:FunctionGraphNode label="If-Then-Else" type="41" x="469" y="72">
        <mappermodel:InputPins>bool,then,bool,else</mappermodel:InputPins>
        <mappermodel:OutputPins>R</mappermodel:OutputPins>
        <mappermodel:Properties/>
      </mappermodel:FunctionGraphNode>
      <mappermodel:Link inputID="2" inputIndex="0" outputID="1" outputIndex="0"/>
      <mappermodel:Link inputID="2" inputIndex="1" outputID="3" outputIndex="0"/>
      <mappermodel:Link inputID="4" inputIndex="1" outputID="5" outputIndex="0"/>
      <mappermodel:Link inputID="4" inputIndex="2" outputID="6" outputIndex="0"/>
      <mappermodel:Link inputID="4" inputIndex="0" outputID="1" outputIndex="0"/>
      <mappermodel:Link inputID="7" inputIndex="0" outputID="2" outputIndex="0"/>
      <mappermodel:Link inputID="7" inputIndex="1" outputID="4" outputIndex="0"/>
      <mappermodel:Link inputID="0" inputIndex="0" outputID="7" outputIndex="0"/>
    </mappermodel:GraphModel>
    <mappermodel:GraphModel inputPins="1,2" outputNode="OUT_PORT:0,FinMessage:0,Block4:0,Document:0,MT103:0,[ZERO MANY]:1,F23a_2:0,[Choice]:0,F23E:0,InstructionCode:0" x="804" y="47">
      <mappermodel:TreeGraphNode inputNode="IN_PORT:0,Envelope:0,Document:0,FIToFICstmrCdtTrf:0,CdtTrfTxInf:0,PmtTpInf:0,[ZERO MANY]:0,SvcLvl:0,[Choice]:0,Cd:0" x="57" y="154">
        <mappermodel:InputPins>1st</mappermodel:InputPins>
        <mappermodel:OutputPins>1st</mappermodel:OutputPins>
      </mappermodel:TreeGraphNode>
      <mappermodel:FunctionGraphNode label="SDVA" type="22" x="47" y="41">
        <mappermodel:InputPins></mappermodel:InputPins>
        <mappermodel:OutputPins>str</mappermodel:OutputPins>
        <mappermodel:Properties/>
      </mappermodel:FunctionGraphNode>
      <mappermodel:FunctionGraphNode label="=" type="31" x="293" y="35">
        <mappermodel:InputPins>1,2</mappermodel:InputPins>
        <mappermodel:OutputPins>R</mappermodel:OutputPins>
        <mappermodel:Properties/>
      </mappermodel:FunctionGraphNode>
      <mappermodel:FunctionGraphNode label="If-Then-Else" type="41" x="475" y="64">
        <mappermodel:InputPins>bool,then,bool,else</mappermodel:InputPins>
        <mappermodel:OutputPins>R</mappermodel:OutputPins>
        <mappermodel:Properties/>
      </mappermodel:FunctionGraphNode>
      <mappermodel:Link inputID="4" inputIndex="0" outputID="3" outputIndex="0"/>
      <mappermodel:Link inputID="4" inputIndex="1" outputID="1" outputIndex="0"/>
      <mappermodel:Link inputID="0" inputIndex="0" outputID="4" outputIndex="0"/>
      <mappermodel:Link inputID="3" inputIndex="0" outputID="2" outputIndex="0"/>
      <mappermodel:Link inputID="3" inputIndex="1" outputID="1" outputIndex="0"/>
    </mappermodel:GraphModel>
    <mappermodel:GraphModel inputPins="1,2" outputNode="OUT_PORT:0,FinMessage:0,Block4:0,Document:0,MT103:0,[ZERO MANY]:2,F23a_2:0,[Choice]:0,F23E:0,InstructionCode:0" x="758" y="48">
      <mappermodel:TreeGraphNode inputNode="IN_PORT:0,Envelope:0,Document:0,FIToFICstmrCdtTrf:0,CdtTrfTxInf:0,PmtTpInf:0,CtgyPurp:0,[Choice]:0,Cd:0" x="36" y="42">
        <mappermodel:InputPins>1st</mappermodel:InputPins>
        <mappermodel:OutputPins>1st</mappermodel:OutputPins>
      </mappermodel:TreeGraphNode>
      <mappermodel:FunctionGraphNode label="INTC" type="22" x="175" y="147">
        <mappermodel:InputPins></mappermodel:InputPins>
        <mappermodel:OutputPins>str</mappermodel:OutputPins>
        <mappermodel:Properties/>
      </mappermodel:FunctionGraphNode>
      <mappermodel:FunctionGraphNode label="If-Then-Else" type="41" x="526" y="42">
        <mappermodel:InputPins>bool,then,bool,else</mappermodel:InputPins>
        <mappermodel:OutputPins>R</mappermodel:OutputPins>
        <mappermodel:Properties/>
      </mappermodel:FunctionGraphNode>
      <mappermodel:FunctionGraphNode label="=" type="31" x="368" y="100">
        <mappermodel:InputPins>1,2</mappermodel:InputPins>
        <mappermodel:OutputPins>R</mappermodel:OutputPins>
        <mappermodel:Properties/>
      </mappermodel:FunctionGraphNode>
      <mappermodel:FunctionGraphNode label="CORT" type="22" x="210" y="195">
        <mappermodel:InputPins></mappermodel:InputPins>
        <mappermodel:OutputPins>str</mappermodel:OutputPins>
        <mappermodel:Properties/>
      </mappermodel:FunctionGraphNode>
      <mappermodel:FunctionGraphNode label="=" type="31" x="344" y="165">
        <mappermodel:InputPins>1,2</mappermodel:InputPins>
        <mappermodel:OutputPins>R</mappermodel:OutputPins>
        <mappermodel:Properties/>
      </mappermodel:FunctionGraphNode>
      <mappermodel:FunctionGraphNode label="OR" type="37" x="504" y="149">
        <mappermodel:InputPins>1,2,3</mappermodel:InputPins>
        <mappermodel:OutputPins>R</mappermodel:OutputPins>
        <mappermodel:Properties/>
      </mappermodel:FunctionGraphNode>
      <mappermodel:Link inputID="4" inputIndex="0" outputID="2" outputIndex="0"/>
      <mappermodel:Link inputID="7" inputIndex="0" outputID="4" outputIndex="0"/>
      <mappermodel:Link inputID="7" inputIndex="1" outputID="6" outputIndex="0"/>
      <mappermodel:Link inputID="4" inputIndex="1" outputID="1" outputIndex="0"/>
      <mappermodel:Link inputID="6" inputIndex="1" outputID="1" outputIndex="0"/>
      <mappermodel:Link inputID="6" inputIndex="0" outputID="5" outputIndex="0"/>
      <mappermodel:Link inputID="3" inputIndex="1" outputID="1" outputIndex="0"/>
      <mappermodel:Link inputID="0" inputIndex="0" outputID="3" outputIndex="0"/>
      <mappermodel:Link inputID="3" inputIndex="0" outputID="7" outputIndex="0"/>
    </mappermodel:GraphModel>
    <mappermodel:GraphModel inputPins="1,2" outputNode="OUT_PORT:0,FinMessage:0,Block4:0,Document:0,MT103:0,F32a:0,[Choice]:0,F32A:0,Currency:0" x="-1" y="-1">
      <mappermodel:TreeGraphNode inputNode="IN_PORT:0,Envelope:0,Document:0,FIToFICstmrCdtTrf:0,CdtTrfTxInf:0,IntrBkSttlmAmt:0,Ccy:0" x="-1" y="-1">
        <mappermodel:InputPins>1st</mappermodel:InputPins>
        <mappermodel:OutputPins>1st</mappermodel:OutputPins>
      </mappermodel:TreeGraphNode>
      <mappermodel:Link inputID="0" inputIndex="0" outputID="1" outputIndex="0"/>
    </mappermodel:GraphModel>
    <mappermodel:GraphModel inputPins="1,2" outputNode="OUT_PORT:0,FinMessage:0,Block4:0,Document:0,MT103:0,F32a:0,[Choice]:0,F32A:0,Date:0" x="-1" y="-1">
      <mappermodel:TreeGraphNode inputNode="IN_PORT:0,Envelope:0,Document:0,FIToFICstmrCdtTrf:0,CdtTrfTxInf:0,IntrBkSttlmDt:0" x="52" y="59">
        <mappermodel:InputPins>1st</mappermodel:InputPins>
        <mappermodel:OutputPins>1st</mappermodel:OutputPins>
      </mappermodel:TreeGraphNode>
      <mappermodel:FunctionGraphNode label="MX2MT:com.fiorano.funclet.MXtoMT.MX_To_MTDate(java.lang.String MXDate)" type="69" x="138" y="124">
        <mappermodel:InputPins>MXDate</mappermodel:InputPins>
        <mappermodel:OutputPins>R</mappermodel:OutputPins>
        <mappermodel:Properties/>
      </mappermodel:FunctionGraphNode>
      <mappermodel:Link inputID="2" inputIndex="0" outputID="1" outputIndex="0"/>
      <mappermodel:Link inputID="0" inputIndex="0" outputID="2" outputIndex="0"/>
    </mappermodel:GraphModel>
    <mappermodel:GraphModel inputPins="1,2" outputNode="OUT_PORT:0,FinMessage:0,Block4:0,Document:0,MT103:0,F32a:0,[Choice]:0,F32A:0,Amount:0" x="-1" y="-1">
      <mappermodel:TreeGraphNode inputNode="IN_PORT:0,Envelope:0,Document:0,FIToFICstmrCdtTrf:0,CdtTrfTxInf:0,IntrBkSttlmAmt:0" x="67" y="65">
        <mappermodel:InputPins>1st</mappermodel:InputPins>
        <mappermodel:OutputPins>1st</mappermodel:OutputPins>
      </mappermodel:TreeGraphNode>
      <mappermodel:FunctionGraphNode label="MX2MT:com.fiorano.funclet.MXtoMT.mx2MTCurrencyAmount(java.lang.String MXAmount)" type="69" x="198" y="158">
        <mappermodel:InputPins>MXAmount</mappermodel:InputPins>
        <mappermodel:OutputPins>R</mappermodel:OutputPins>
        <mappermodel:Properties/>
      </mappermodel:FunctionGraphNode>
      <mappermodel:Link inputID="2" inputIndex="0" outputID="1" outputIndex="0"/>
      <mappermodel:Link inputID="0" inputIndex="0" outputID="2" outputIndex="0"/>
    </mappermodel:GraphModel>
    <mappermodel:GraphModel inputPins="1,2" outputNode="OUT_PORT:0,FinMessage:0,Block4:0,Document:0,MT103:0,F33a:0,[Choice]:0,F33B:0,Amount:0" x="-1" y="-1">
      <mappermodel:FunctionGraphNode label="MX2MT:com.fiorano.funclet.MXtoMT.mx2MTCurrencyAmount(java.lang.String MXAmount)" type="69" x="330" y="137">
        <mappermodel:InputPins>MXAmount</mappermodel:InputPins>
        <mappermodel:OutputPins>R</mappermodel:OutputPins>
        <mappermodel:Properties/>
      </mappermodel:FunctionGraphNode>
      <mappermodel:TreeGraphNode inputNode="IN_PORT:0,Envelope:0,Document:0,FIToFICstmrCdtTrf:0,CdtTrfTxInf:0,InstdAmt:0" x="109" y="42">
        <mappermodel:InputPins>1st</mappermodel:InputPins>
        <mappermodel:OutputPins>1st</mappermodel:OutputPins>
      </mappermodel:TreeGraphNode>
      <mappermodel:Link inputID="0" inputIndex="0" outputID="1" outputIndex="0"/>
      <mappermodel:Link inputID="1" inputIndex="0" outputID="2" outputIndex="0"/>
    </mappermodel:GraphModel>
    <mappermodel:GraphModel inputPins="1,2" outputNode="OUT_PORT:0,FinMessage:0,Block4:0,Document:0,MT103:0,F33a:0,[Choice]:0,F33B:0,Currency:0" x="-1" y="-1">
      <mappermodel:TreeGraphNode inputNode="IN_PORT:0,Envelope:0,Document:0,FIToFICstmrCdtTrf:0,CdtTrfTxInf:0,InstdAmt:0,Ccy:0" x="-1" y="-1">
        <mappermodel:InputPins>1st</mappermodel:InputPins>
        <mappermodel:OutputPins>1st</mappermodel:OutputPins>
      </mappermodel:TreeGraphNode>
      <mappermodel:Link inputID="0" inputIndex="0" outputID="1" outputIndex="0"/>
    </mappermodel:GraphModel>
    <mappermodel:GraphModel inputPins="1,2" outputNode="OUT_PORT:0,FinMessage:0,Block4:0,Document:0,MT103:0,F36a:0,[Choice]:0,F36:0" x="684" y="91">
      <mappermodel:TreeGraphNode inputNode="IN_PORT:0,Envelope:0,Document:0,FIToFICstmrCdtTrf:0,CdtTrfTxInf:0,XchgRate:0" x="108" y="65">
        <mappermodel:InputPins>1st</mappermodel:InputPins>
        <mappermodel:OutputPins>1st</mappermodel:OutputPins>
      </mappermodel:TreeGraphNode>
      <mappermodel:FunctionGraphNode label="MX2MT:com.fiorano.funclet.MXtoMT.MX_To_MT_Rate(java.lang.String MXRate)" type="69" x="214" y="132">
        <mappermodel:InputPins>MXRate</mappermodel:InputPins>
        <mappermodel:OutputPins>R</mappermodel:OutputPins>
        <mappermodel:Properties/>
      </mappermodel:FunctionGraphNode>
      <mappermodel:Link inputID="2" inputIndex="0" outputID="1" outputIndex="0"/>
      <mappermodel:Link inputID="0" inputIndex="0" outputID="2" outputIndex="0"/>
    </mappermodel:GraphModel>
    <mappermodel:GraphModel inputPins="1,2" outputNode="OUT_PORT:0,FinMessage:0,Block4:0,Document:0,MT103:0,F71a_1:0,[Choice]:0,F71A:0" x="855" y="72">
      <mappermodel:TreeGraphNode inputNode="IN_PORT:0,Envelope:0,Document:0,FIToFICstmrCdtTrf:0,CdtTrfTxInf:0,ChrgBr:0" x="45" y="69">
        <mappermodel:InputPins>1st</mappermodel:InputPins>
        <mappermodel:OutputPins>1st</mappermodel:OutputPins>
      </mappermodel:TreeGraphNode>
      <mappermodel:FunctionGraphNode label="CRED" type="22" x="52" y="124">
        <mappermodel:InputPins></mappermodel:InputPins>
        <mappermodel:OutputPins>str</mappermodel:OutputPins>
        <mappermodel:Properties/>
      </mappermodel:FunctionGraphNode>
      <mappermodel:FunctionGraphNode label="DEBT" type="22" x="95" y="181">
        <mappermodel:InputPins></mappermodel:InputPins>
        <mappermodel:OutputPins>str</mappermodel:OutputPins>
        <mappermodel:Properties/>
      </mappermodel:FunctionGraphNode>
      <mappermodel:FunctionGraphNode label="SHAR" type="22" x="132" y="253">
        <mappermodel:InputPins></mappermodel:InputPins>
        <mappermodel:OutputPins>str</mappermodel:OutputPins>
        <mappermodel:Properties/>
      </mappermodel:FunctionGraphNode>
      <mappermodel:FunctionGraphNode label="BEN" type="22" x="388" y="126">
        <mappermodel:InputPins></mappermodel:InputPins>
        <mappermodel:OutputPins>str</mappermodel:OutputPins>
        <mappermodel:Properties/>
      </mappermodel:FunctionGraphNode>
      <mappermodel:FunctionGraphNode label="OUR" type="22" x="413" y="172">
        <mappermodel:InputPins></mappermodel:InputPins>
        <mappermodel:OutputPins>str</mappermodel:OutputPins>
        <mappermodel:Properties/>
      </mappermodel:FunctionGraphNode>
      <mappermodel:FunctionGraphNode label="SHA" type="22" x="487" y="268">
        <mappermodel:InputPins></mappermodel:InputPins>
        <mappermodel:OutputPins>str</mappermodel:OutputPins>
        <mappermodel:Properties/>
      </mappermodel:FunctionGraphNode>
      <mappermodel:FunctionGraphNode label="=" type="31" x="242" y="103">
        <mappermodel:InputPins>1,2</mappermodel:InputPins>
        <mappermodel:OutputPins>R</mappermodel:OutputPins>
        <mappermodel:Properties/>
      </mappermodel:FunctionGraphNode>
      <mappermodel:FunctionGraphNode label="=" type="31" x="279" y="153">
        <mappermodel:InputPins>1,2</mappermodel:InputPins>
        <mappermodel:OutputPins>R</mappermodel:OutputPins>
        <mappermodel:Properties/>
      </mappermodel:FunctionGraphNode>
      <mappermodel:FunctionGraphNode label="=" type="31" x="338" y="243">
        <mappermodel:InputPins>1,2</mappermodel:InputPins>
        <mappermodel:OutputPins>R</mappermodel:OutputPins>
        <mappermodel:Properties/>
      </mappermodel:FunctionGraphNode>
      <mappermodel:FunctionGraphNode label="If-Then-Else" type="41" x="661" y="30">
        <mappermodel:InputPins>bool,then,bool,then,bool,then,bool,else</mappermodel:InputPins>
        <mappermodel:OutputPins>R</mappermodel:OutputPins>
        <mappermodel:Properties/>
      </mappermodel:FunctionGraphNode>
      <mappermodel:Link inputID="0" inputIndex="0" outputID="11" outputIndex="0"/>
      <mappermodel:Link inputID="8" inputIndex="0" outputID="1" outputIndex="0"/>
      <mappermodel:Link inputID="8" inputIndex="1" outputID="2" outputIndex="0"/>
      <mappermodel:Link inputID="9" inputIndex="0" outputID="1" outputIndex="0"/>
      <mappermodel:Link inputID="10" inputIndex="0" outputID="1" outputIndex="0"/>
      <mappermodel:Link inputID="9" inputIndex="1" outputID="3" outputIndex="0"/>
      <mappermodel:Link inputID="10" inputIndex="1" outputID="4" outputIndex="0"/>
      <mappermodel:Link inputID="11" inputIndex="0" outputID="8" outputIndex="0"/>
      <mappermodel:Link inputID="11" inputIndex="1" outputID="5" outputIndex="0"/>
      <mappermodel:Link inputID="11" inputIndex="2" outputID="9" outputIndex="0"/>
      <mappermodel:Link inputID="11" inputIndex="3" outputID="6" outputIndex="0"/>
      <mappermodel:Link inputID="11" inputIndex="4" outputID="10" outputIndex="0"/>
      <mappermodel:Link inputID="11" inputIndex="5" outputID="7" outputIndex="0"/>
    </mappermodel:GraphModel>
    <mappermodel:GraphModel inputPins="1,2" outputNode="OUT_PORT:0,FinMessage:0,Block4:0,Document:0,MT103:0,F71a_3:0,[Choice]:0,F71G:0,Currency:0" x="-1" y="-1">
      <mappermodel:TreeGraphNode inputNode="IN_PORT:0,Envelope:0,Document:0,FIToFICstmrCdtTrf:0,CdtTrfTxInf:0,[ZERO MANY]:0,ChrgsInf:0,Amt:0,Ccy:0" x="-1" y="-1">
        <mappermodel:InputPins>1st</mappermodel:InputPins>
        <mappermodel:OutputPins>1st</mappermodel:OutputPins>
      </mappermodel:TreeGraphNode>
      <mappermodel:Link inputID="0" inputIndex="0" outputID="1" outputIndex="0"/>
    </mappermodel:GraphModel>
    <mappermodel:GraphModel inputPins="1,2" outputNode="OUT_PORT:0,FinMessage:0,Block4:0,Document:0,MT103:0,F56a:0,[Choice]:0,F56A:0,IdentifierCode:0" x="-1" y="-1">
      <mappermodel:TreeGraphNode inputNode="IN_PORT:0,Envelope:0,Document:0,FIToFICstmrCdtTrf:0,CdtTrfTxInf:0,IntrmyAgt1:0,FinInstnId:0,BICFI:0" x="-1" y="-1">
        <mappermodel:InputPins>1st</mappermodel:InputPins>
        <mappermodel:OutputPins>1st</mappermodel:OutputPins>
      </mappermodel:TreeGraphNode>
      <mappermodel:Link inputID="0" inputIndex="0" outputID="1" outputIndex="0"/>
    </mappermodel:GraphModel>
    <mappermodel:GraphModel inputPins="1,2" outputNode="OUT_PORT:0,FinMessage:0,Block4:0,Document:0,MT103:0,F56a:0,[Choice]:0,F56A:0,PartyIdentifier:0" x="1062" y="20">
      <mappermodel:FunctionGraphNode label="BOOL" type="42" x="280" y="20">
        <mappermodel:InputPins>1</mappermodel:InputPins>
        <mappermodel:OutputPins>R</mappermodel:OutputPins>
        <mappermodel:Properties/>
      </mappermodel:FunctionGraphNode>
      <mappermodel:TreeGraphNode inputNode="IN_PORT:0,Envelope:0,Document:0,FIToFICstmrCdtTrf:0,CdtTrfTxInf:0,IntrmyAgt1Acct:0" x="20" y="20">
        <mappermodel:InputPins>1st</mappermodel:InputPins>
        <mappermodel:OutputPins>1st</mappermodel:OutputPins>
      </mappermodel:TreeGraphNode>
      <mappermodel:TreeGraphNode inputNode="IN_PORT:0,Envelope:0,Document:0,FIToFICstmrCdtTrf:0,CdtTrfTxInf:0,IntrmyAgt1Acct:0,Id:0,[Choice]:0,IBAN:0" x="20" y="82">
        <mappermodel:InputPins>1st</mappermodel:InputPins>
        <mappermodel:OutputPins>1st</mappermodel:OutputPins>
      </mappermodel:TreeGraphNode>
      <mappermodel:TreeGraphNode inputNode="IN_PORT:0,Envelope:0,Document:0,FIToFICstmrCdtTrf:0,CdtTrfTxInf:0,IntrmyAgt1Acct:0,Id:0,[Choice]:0,Othr:0,Id:0" x="20" y="144">
        <mappermodel:InputPins>1st</mappermodel:InputPins>
        <mappermodel:OutputPins>1st</mappermodel:OutputPins>
      </mappermodel:TreeGraphNode>
      <mappermodel:TreeGraphNode inputNode="IN_PORT:0,Envelope:0,Document:0,FIToFICstmrCdtTrf:0,CdtTrfTxInf:0,IntrmyAgt1Acct:0,Id:0,[Choice]:0,Othr:0,SchmeNm:0,[Choice]:0,Cd:0" x="20" y="206">
        <mappermodel:InputPins>1st</mappermodel:InputPins>
        <mappermodel:OutputPins>1st</mappermodel:OutputPins>
      </mappermodel:TreeGraphNode>
      <mappermodel:FunctionGraphNode label="If-Then-Else" type="41" x="828" y="20">
        <mappermodel:InputPins>bool,then,bool,else</mappermodel:InputPins>
        <mappermodel:OutputPins>R</mappermodel:OutputPins>
        <mappermodel:Properties/>
      </mappermodel:FunctionGraphNode>
      <mappermodel:FunctionGraphNode label="MX2MT:com.fiorano.funclet.MXtoMT.mx2MTAccountWithPrefix(java.lang.String arg1,java.lang.String arg2,java.lang.String arg3)" type="69" x="280" y="82">
        <mappermodel:InputPins>arg1,arg2,arg3</mappermodel:InputPins>
        <mappermodel:OutputPins>R</mappermodel:OutputPins>
        <mappermodel:Properties/>
      </mappermodel:FunctionGraphNode>
      <mappermodel:Link inputID="1" inputIndex="0" outputID="2" outputIndex="0"/>
      <mappermodel:Link inputID="6" inputIndex="0" outputID="1" outputIndex="0"/>
      <mappermodel:Link inputID="0" inputIndex="0" outputID="6" outputIndex="0"/>
      <mappermodel:Link inputID="7" inputIndex="0" outputID="3" outputIndex="0"/>
      <mappermodel:Link inputID="7" inputIndex="1" outputID="4" outputIndex="0"/>
      <mappermodel:Link inputID="7" inputIndex="2" outputID="5" outputIndex="0"/>
      <mappermodel:Link inputID="6" inputIndex="1" outputID="7" outputIndex="0"/>
    </mappermodel:GraphModel>
    <mappermodel:GraphModel inputPins="1,2" outputNode="OUT_PORT:0,FinMessage:0,Block4:0,Document:0,MT103:0,F56a:0,[Choice]:0,F56C:0" x="-1" y="-1">
      <mappermodel:TreeGraphNode inputNode="IN_PORT:0,Envelope:0,Document:0,FIToFICstmrCdtTrf:0,CdtTrfTxInf:0,IntrmyAgt1:0,FinInstnId:0,Nm:0" x="23" y="134">
        <mappermodel:InputPins>1st</mappermodel:InputPins>
        <mappermodel:OutputPins>1st</mappermodel:OutputPins>
      </mappermodel:TreeGraphNode>
      <mappermodel:FunctionGraphNode label="//" type="22" x="46" y="88">
        <mappermodel:InputPins></mappermodel:InputPins>
        <mappermodel:OutputPins>str</mappermodel:OutputPins>
        <mappermodel:Properties/>
      </mappermodel:FunctionGraphNode>
      <mappermodel:FunctionGraphNode label="Concat" type="20" x="227" y="82">
        <mappermodel:InputPins>1,2,3</mappermodel:InputPins>
        <mappermodel:OutputPins>str</mappermodel:OutputPins>
        <mappermodel:Properties/>
      </mappermodel:FunctionGraphNode>
      <mappermodel:Link inputID="3" inputIndex="0" outputID="2" outputIndex="0"/>
      <mappermodel:Link inputID="3" inputIndex="1" outputID="1" outputIndex="0"/>
      <mappermodel:Link inputID="0" inputIndex="0" outputID="3" outputIndex="0"/>
    </mappermodel:GraphModel>
    <mappermodel:GraphModel inputPins="1,2" outputNode="OUT_PORT:0,FinMessage:0,Block4:0,Document:0,MT103:0,F56a:0,[Choice]:0,F56D:0,PartyIdentifier:0" x="827" y="30">
      <mappermodel:FunctionGraphNode label="BOOL" type="42" x="414" y="75">
        <mappermodel:InputPins>1</mappermodel:InputPins>
        <mappermodel:OutputPins>R</mappermodel:OutputPins>
        <mappermodel:Properties/>
      </mappermodel:FunctionGraphNode>
      <mappermodel:TreeGraphNode inputNode="IN_PORT:0,Envelope:0,Document:0,FIToFICstmrCdtTrf:0,CdtTrfTxInf:0,IntrmyAgt1Acct:0,Id:0,[Choice]:0,IBAN:0" x="135" y="118">
        <mappermodel:InputPins>1st</mappermodel:InputPins>
        <mappermodel:OutputPins>1st</mappermodel:OutputPins>
      </mappermodel:TreeGraphNode>
      <mappermodel:TreeGraphNode inputNode="IN_PORT:0,Envelope:0,Document:0,FIToFICstmrCdtTrf:0,CdtTrfTxInf:0,IntrmyAgt1Acct:0,Id:0,[Choice]:0,Othr:0,SchmeNm:0,[Choice]:0,Cd:0" x="138" y="192">
        <mappermodel:InputPins>1st</mappermodel:InputPins>
        <mappermodel:OutputPins>1st</mappermodel:OutputPins>
      </mappermodel:TreeGraphNode>
      <mappermodel:FunctionGraphNode label="If-Then-Else" type="41" x="1016" y="118">
        <mappermodel:InputPins>bool,then,bool,then,bool,else</mappermodel:InputPins>
        <mappermodel:OutputPins>R</mappermodel:OutputPins>
        <mappermodel:Properties/>
      </mappermodel:FunctionGraphNode>
      <mappermodel:TreeGraphNode inputNode="IN_PORT:0,Envelope:0,Document:0,FIToFICstmrCdtTrf:0,CdtTrfTxInf:0,IntrmyAgt1Acct:0,Id:0,[Choice]:0,Othr:0,Id:0" x="134" y="155">
        <mappermodel:InputPins>1st</mappermodel:InputPins>
        <mappermodel:OutputPins>1st</mappermodel:OutputPins>
      </mappermodel:TreeGraphNode>
      <mappermodel:TreeGraphNode inputNode="IN_PORT:0,Envelope:0,Document:0,FIToFICstmrCdtTrf:0,CdtTrfTxInf:0,IntrmyAgt1Acct:0" x="114" y="72">
        <mappermodel:InputPins>1st</mappermodel:InputPins>
        <mappermodel:OutputPins>1st</mappermodel:OutputPins>
      </mappermodel:TreeGraphNode>
      <mappermodel:TreeGraphNode inputNode="IN_PORT:0,Envelope:0,Document:0,FIToFICstmrCdtTrf:0,CdtTrfTxInf:0,IntrmyAgt1:0,FinInstnId:0,ClrSysMmbId:0" x="111" y="17">
        <mappermodel:InputPins>1st</mappermodel:InputPins>
        <mappermodel:OutputPins>1st</mappermodel:OutputPins>
      </mappermodel:TreeGraphNode>
      <mappermodel:FunctionGraphNode label="BOOL" type="42" x="368" y="13">
        <mappermodel:InputPins>1</mappermodel:InputPins>
        <mappermodel:OutputPins>R</mappermodel:OutputPins>
        <mappermodel:Properties/>
      </mappermodel:FunctionGraphNode>
      <mappermodel:FunctionGraphNode label="MX2MT:com.fiorano.funclet.MXtoMT.mx2MTAccountWithPrefix(java.lang.String arg1,java.lang.String arg2,java.lang.String arg3)" type="69" x="391" y="155">
        <mappermodel:InputPins>arg1,arg2,arg3</mappermodel:InputPins>
        <mappermodel:OutputPins>R</mappermodel:OutputPins>
        <mappermodel:Properties/>
      </mappermodel:FunctionGraphNode>
      <mappermodel:Link inputID="1" inputIndex="0" outputID="6" outputIndex="0"/>
      <mappermodel:Link inputID="0" inputIndex="0" outputID="4" outputIndex="0"/>
      <mappermodel:Link inputID="8" inputIndex="0" outputID="7" outputIndex="0"/>
      <mappermodel:Link inputID="4" inputIndex="0" outputID="8" outputIndex="0"/>
      <mappermodel:Link inputID="4" inputIndex="2" outputID="1" outputIndex="0"/>
      <mappermodel:Link inputID="4" inputIndex="3" outputID="9" outputIndex="0"/>
      <mappermodel:Link inputID="9" inputIndex="0" outputID="2" outputIndex="0"/>
      <mappermodel:Link inputID="9" inputIndex="1" outputID="5" outputIndex="0"/>
      <mappermodel:Link inputID="9" inputIndex="2" outputID="3" outputIndex="0"/>
    </mappermodel:GraphModel>
    <mappermodel:GraphModel inputPins="1,2" outputNode="OUT_PORT:0,FinMessage:0,Block4:0,Document:0,MT103:0,F50a:0,[Choice]:0,F50A:0,IdentifierCode:0" x="-1" y="-1">
      <mappermodel:TreeGraphNode inputNode="IN_PORT:0,Envelope:0,Document:0,FIToFICstmrCdtTrf:0,CdtTrfTxInf:0,Dbtr:0,Id:0,[Choice]:0,OrgId:0,AnyBIC:0" x="113" y="66">
        <mappermodel:InputPins>1st</mappermodel:InputPins>
        <mappermodel:OutputPins>1st</mappermodel:OutputPins>
      </mappermodel:TreeGraphNode>
      <mappermodel:Link inputID="0" inputIndex="0" outputID="1" outputIndex="0"/>
    </mappermodel:GraphModel>
    <mappermodel:GraphModel inputPins="1,2" outputNode="OUT_PORT:0,FinMessage:0,Block4:0,Document:0,MT103:0,F52a:0,[Choice]:0,F52A:0,PartyIdentifier:0" x="1129" y="20">
      <mappermodel:TreeGraphNode inputNode="IN_PORT:0,Envelope:0,Document:0,FIToFICstmrCdtTrf:0,CdtTrfTxInf:0,DbtrAgtAcct:0" x="20" y="268">
        <mappermodel:InputPins>1st</mappermodel:InputPins>
        <mappermodel:OutputPins>1st</mappermodel:OutputPins>
      </mappermodel:TreeGraphNode>
      <mappermodel:FunctionGraphNode label="If-Then-Else" type="41" x="884" y="20">
        <mappermodel:InputPins>bool,then,bool,then,bool,else</mappermodel:InputPins>
        <mappermodel:OutputPins>R</mappermodel:OutputPins>
        <mappermodel:Properties/>
      </mappermodel:FunctionGraphNode>
      <mappermodel:FunctionGraphNode label="MX2MT:com.fiorano.funclet.MXtoMT.mx2MTClearingIdentifier(java.lang.String CSICode,java.lang.String MemberId,java.lang.String BIC)" type="69" x="271" y="233">
        <mappermodel:InputPins>CSICode,MemberId,BIC</mappermodel:InputPins>
        <mappermodel:OutputPins>R</mappermodel:OutputPins>
        <mappermodel:Properties/>
      </mappermodel:FunctionGraphNode>
      <mappermodel:FunctionGraphNode label="BOOL" type="42" x="271" y="169">
        <mappermodel:InputPins>1</mappermodel:InputPins>
        <mappermodel:OutputPins>R</mappermodel:OutputPins>
        <mappermodel:Properties/>
      </mappermodel:FunctionGraphNode>
      <mappermodel:FunctionGraphNode label="BOOL" type="42" x="271" y="20">
        <mappermodel:InputPins>1</mappermodel:InputPins>
        <mappermodel:OutputPins>R</mappermodel:OutputPins>
        <mappermodel:Properties/>
      </mappermodel:FunctionGraphNode>
      <mappermodel:TreeGraphNode inputNode="IN_PORT:0,Envelope:0,Document:0,FIToFICstmrCdtTrf:0,CdtTrfTxInf:0,DbtrAgtAcct:0,Id:0,[Choice]:0,IBAN:0" x="20" y="330">
        <mappermodel:InputPins>1st</mappermodel:InputPins>
        <mappermodel:OutputPins>1st</mappermodel:OutputPins>
      </mappermodel:TreeGraphNode>
      <mappermodel:TreeGraphNode inputNode="IN_PORT:0,Envelope:0,Document:0,FIToFICstmrCdtTrf:0,CdtTrfTxInf:0,DbtrAgtAcct:0,Id:0,[Choice]:0,Othr:0,Id:0" x="20" y="392">
        <mappermodel:InputPins>1st</mappermodel:InputPins>
        <mappermodel:OutputPins>1st</mappermodel:OutputPins>
      </mappermodel:TreeGraphNode>
      <mappermodel:TreeGraphNode inputNode="IN_PORT:0,Envelope:0,Document:0,FIToFICstmrCdtTrf:0,CdtTrfTxInf:0,DbtrAgtAcct:0,Id:0,[Choice]:0,Othr:0,SchmeNm:0,[Choice]:0,Cd:0" x="20" y="454">
        <mappermodel:InputPins>1st</mappermodel:InputPins>
        <mappermodel:OutputPins>1st</mappermodel:OutputPins>
      </mappermodel:TreeGraphNode>
      <mappermodel:TreeGraphNode inputNode="IN_PORT:0,Envelope:0,Document:0,FIToFICstmrCdtTrf:0,CdtTrfTxInf:0,DbtrAgt:0,FinInstnId:0,ClrSysMmbId:0" x="20" y="206">
        <mappermodel:InputPins>1st</mappermodel:InputPins>
        <mappermodel:OutputPins>1st</mappermodel:OutputPins>
      </mappermodel:TreeGraphNode>
      <mappermodel:TreeGraphNode inputNode="IN_PORT:0,Envelope:0,Document:0,FIToFICstmrCdtTrf:0,CdtTrfTxInf:0,DbtrAgt:0,FinInstnId:0,ClrSysMmbId:0,ClrSysId:0,[Choice]:0,Cd:0" x="20" y="20">
        <mappermodel:InputPins>1st</mappermodel:InputPins>
        <mappermodel:OutputPins>1st</mappermodel:OutputPins>
      </mappermodel:TreeGraphNode>
      <mappermodel:TreeGraphNode inputNode="IN_PORT:0,Envelope:0,Document:0,FIToFICstmrCdtTrf:0,CdtTrfTxInf:0,DbtrAgt:0,FinInstnId:0,ClrSysMmbId:0,MmbId:0" x="20" y="82">
        <mappermodel:InputPins>1st</mappermodel:InputPins>
        <mappermodel:OutputPins>1st</mappermodel:OutputPins>
      </mappermodel:TreeGraphNode>
      <mappermodel:TreeGraphNode inputNode="IN_PORT:0,Envelope:0,Document:0,FIToFICstmrCdtTrf:0,CdtTrfTxInf:0,DbtrAgt:0,FinInstnId:0,BICFI:0" x="20" y="144">
        <mappermodel:InputPins>1st</mappermodel:InputPins>
        <mappermodel:OutputPins>1st</mappermodel:OutputPins>
      </mappermodel:TreeGraphNode>
      <mappermodel:FunctionGraphNode label="MX2MT:com.fiorano.funclet.MXtoMT.mx2MTAccountWithPrefix(java.lang.String arg1,java.lang.String arg2,java.lang.String arg3)" type="69" x="271" y="84">
        <mappermodel:InputPins>arg1,arg2,arg3</mappermodel:InputPins>
        <mappermodel:OutputPins>R</mappermodel:OutputPins>
        <mappermodel:Properties/>
      </mappermodel:FunctionGraphNode>
      <mappermodel:Link inputID="2" inputIndex="0" outputID="5" outputIndex="0"/>
      <mappermodel:Link inputID="2" inputIndex="2" outputID="4" outputIndex="0"/>
      <mappermodel:Link inputID="2" inputIndex="3" outputID="3" outputIndex="0"/>
      <mappermodel:Link inputID="0" inputIndex="0" outputID="2" outputIndex="0"/>
      <mappermodel:Link inputID="5" inputIndex="0" outputID="1" outputIndex="0"/>
      <mappermodel:Link inputID="4" inputIndex="0" outputID="9" outputIndex="0"/>
      <mappermodel:Link inputID="3" inputIndex="2" outputID="12" outputIndex="0"/>
      <mappermodel:Link inputID="3" inputIndex="1" outputID="11" outputIndex="0"/>
      <mappermodel:Link inputID="3" inputIndex="0" outputID="10" outputIndex="0"/>
      <mappermodel:Link inputID="13" inputIndex="0" outputID="6" outputIndex="0"/>
      <mappermodel:Link inputID="13" inputIndex="1" outputID="7" outputIndex="0"/>
      <mappermodel:Link inputID="13" inputIndex="2" outputID="8" outputIndex="0"/>
      <mappermodel:Link inputID="2" inputIndex="1" outputID="13" outputIndex="0"/>
    </mappermodel:GraphModel>
    <mappermodel:GraphModel inputPins="1,2" outputNode="OUT_PORT:0,FinMessage:0,Block4:0,Document:0,MT103:0,F52a:0,[Choice]:0,F52A:0,IdentifierCode:0" x="-1" y="-1">
      <mappermodel:TreeGraphNode inputNode="IN_PORT:0,Envelope:0,Document:0,FIToFICstmrCdtTrf:0,CdtTrfTxInf:0,DbtrAgt:0,FinInstnId:0,BICFI:0" x="-1" y="-1">
        <mappermodel:InputPins>1st</mappermodel:InputPins>
        <mappermodel:OutputPins>1st</mappermodel:OutputPins>
      </mappermodel:TreeGraphNode>
      <mappermodel:Link inputID="0" inputIndex="0" outputID="1" outputIndex="0"/>
    </mappermodel:GraphModel>
    <mappermodel:GraphModel inputPins="1,2" outputNode="OUT_PORT:0,FinMessage:0,Block4:0,Document:0,MT103:0,F52a:0,[Choice]:0,F52D:0,PartyIdentifier:0" x="1043" y="-44">
      <mappermodel:FunctionGraphNode label="BOOL" type="42" x="283" y="73">
        <mappermodel:InputPins>1</mappermodel:InputPins>
        <mappermodel:OutputPins>R</mappermodel:OutputPins>
        <mappermodel:Properties/>
      </mappermodel:FunctionGraphNode>
      <mappermodel:FunctionGraphNode label="BOOL" type="42" x="272" y="-70">
        <mappermodel:InputPins>1</mappermodel:InputPins>
        <mappermodel:OutputPins>R</mappermodel:OutputPins>
        <mappermodel:Properties/>
      </mappermodel:FunctionGraphNode>
      <mappermodel:FunctionGraphNode label="If-Then-Else" type="41" x="816" y="-34">
        <mappermodel:InputPins>bool,then,bool,then,bool,else</mappermodel:InputPins>
        <mappermodel:OutputPins>R</mappermodel:OutputPins>
        <mappermodel:Properties/>
      </mappermodel:FunctionGraphNode>
      <mappermodel:FunctionGraphNode label="MX2MT:com.fiorano.funclet.MXtoMT.mx2MTClearingIdentifier(java.lang.String CSICode,java.lang.String MemberId,java.lang.String BIC)" type="69" x="186" y="16">
        <mappermodel:InputPins>CSICode,MemberId,BIC</mappermodel:InputPins>
        <mappermodel:OutputPins>R</mappermodel:OutputPins>
        <mappermodel:Properties/>
      </mappermodel:FunctionGraphNode>
      <mappermodel:TreeGraphNode inputNode="IN_PORT:0,Envelope:0,Document:0,FIToFICstmrCdtTrf:0,CdtTrfTxInf:0,DbtrAgt:0,FinInstnId:0,ClrSysMmbId:0" x="18" y="-71">
        <mappermodel:InputPins>1st</mappermodel:InputPins>
        <mappermodel:OutputPins>1st</mappermodel:OutputPins>
      </mappermodel:TreeGraphNode>
      <mappermodel:TreeGraphNode inputNode="IN_PORT:0,Envelope:0,Document:0,FIToFICstmrCdtTrf:0,CdtTrfTxInf:0,DbtrAgtAcct:0" x="22" y="82">
        <mappermodel:InputPins>1st</mappermodel:InputPins>
        <mappermodel:OutputPins>1st</mappermodel:OutputPins>
      </mappermodel:TreeGraphNode>
      <mappermodel:TreeGraphNode inputNode="IN_PORT:0,Envelope:0,Document:0,FIToFICstmrCdtTrf:0,CdtTrfTxInf:0,DbtrAgt:0,FinInstnId:0,BICFI:0" x="20" y="49">
        <mappermodel:InputPins>1st</mappermodel:InputPins>
        <mappermodel:OutputPins>1st</mappermodel:OutputPins>
      </mappermodel:TreeGraphNode>
      <mappermodel:TreeGraphNode inputNode="IN_PORT:0,Envelope:0,Document:0,FIToFICstmrCdtTrf:0,CdtTrfTxInf:0,DbtrAgt:0,FinInstnId:0,ClrSysMmbId:0,ClrSysId:0,[Choice]:0,Cd:0" x="35" y="-16">
        <mappermodel:InputPins>1st</mappermodel:InputPins>
        <mappermodel:OutputPins>1st</mappermodel:OutputPins>
      </mappermodel:TreeGraphNode>
      <mappermodel:TreeGraphNode inputNode="IN_PORT:0,Envelope:0,Document:0,FIToFICstmrCdtTrf:0,CdtTrfTxInf:0,DbtrAgt:0,FinInstnId:0,ClrSysMmbId:0,MmbId:0" x="1" y="16">
        <mappermodel:InputPins>1st</mappermodel:InputPins>
        <mappermodel:OutputPins>1st</mappermodel:OutputPins>
      </mappermodel:TreeGraphNode>
      <mappermodel:TreeGraphNode inputNode="IN_PORT:0,Envelope:0,Document:0,FIToFICstmrCdtTrf:0,CdtTrfTxInf:0,DbtrAgtAcct:0,Id:0,[Choice]:0,IBAN:0" x="20" y="112">
        <mappermodel:InputPins>1st</mappermodel:InputPins>
        <mappermodel:OutputPins>1st</mappermodel:OutputPins>
      </mappermodel:TreeGraphNode>
      <mappermodel:TreeGraphNode inputNode="IN_PORT:0,Envelope:0,Document:0,FIToFICstmrCdtTrf:0,CdtTrfTxInf:0,DbtrAgtAcct:0,Id:0,[Choice]:0,Othr:0,Id:0" x="27" y="146">
        <mappermodel:InputPins>1st</mappermodel:InputPins>
        <mappermodel:OutputPins>1st</mappermodel:OutputPins>
      </mappermodel:TreeGraphNode>
      <mappermodel:TreeGraphNode inputNode="IN_PORT:0,Envelope:0,Document:0,FIToFICstmrCdtTrf:0,CdtTrfTxInf:0,DbtrAgtAcct:0,Id:0,[Choice]:0,Othr:0,SchmeNm:0,[Choice]:0,Cd:0" x="33" y="183">
        <mappermodel:InputPins>1st</mappermodel:InputPins>
        <mappermodel:OutputPins>1st</mappermodel:OutputPins>
      </mappermodel:TreeGraphNode>
      <mappermodel:FunctionGraphNode label="MX2MT:com.fiorano.funclet.MXtoMT.mx2MTAccountWithPrefix(java.lang.String arg1,java.lang.String arg2,java.lang.String arg3)" type="69" x="393" y="130">
        <mappermodel:InputPins>arg1,arg2,arg3</mappermodel:InputPins>
        <mappermodel:OutputPins>R</mappermodel:OutputPins>
        <mappermodel:Properties/>
      </mappermodel:FunctionGraphNode>
      <mappermodel:Link inputID="3" inputIndex="0" outputID="2" outputIndex="0"/>
      <mappermodel:Link inputID="0" inputIndex="0" outputID="3" outputIndex="0"/>
      <mappermodel:Link inputID="2" inputIndex="0" outputID="5" outputIndex="0"/>
      <mappermodel:Link inputID="1" inputIndex="0" outputID="6" outputIndex="0"/>
      <mappermodel:Link inputID="3" inputIndex="1" outputID="4" outputIndex="0"/>
      <mappermodel:Link inputID="3" inputIndex="2" outputID="1" outputIndex="0"/>
      <mappermodel:Link inputID="4" inputIndex="0" outputID="8" outputIndex="0"/>
      <mappermodel:Link inputID="4" inputIndex="1" outputID="9" outputIndex="0"/>
      <mappermodel:Link inputID="4" inputIndex="2" outputID="7" outputIndex="0"/>
      <mappermodel:Link inputID="13" inputIndex="0" outputID="10" outputIndex="0"/>
      <mappermodel:Link inputID="13" inputIndex="1" outputID="11" outputIndex="0"/>
      <mappermodel:Link inputID="13" inputIndex="2" outputID="12" outputIndex="0"/>
      <mappermodel:Link inputID="3" inputIndex="3" outputID="13" outputIndex="0"/>
    </mappermodel:GraphModel>
    <mappermodel:GraphModel inputPins="1,2" outputNode="OUT_PORT:0,FinMessage:0,Block4:0,Document:0,MT103:0,F57a:0,[Choice]:0,F57A:0,IdentifierCode:0" x="-1" y="-1">
      <mappermodel:TreeGraphNode inputNode="IN_PORT:0,Envelope:0,Document:0,FIToFICstmrCdtTrf:0,CdtTrfTxInf:0,CdtrAgt:0,FinInstnId:0,BICFI:0" x="-1" y="-1">
        <mappermodel:InputPins>1st</mappermodel:InputPins>
        <mappermodel:OutputPins>1st</mappermodel:OutputPins>
      </mappermodel:TreeGraphNode>
      <mappermodel:Link inputID="0" inputIndex="0" outputID="1" outputIndex="0"/>
    </mappermodel:GraphModel>
    <mappermodel:GraphModel inputPins="1,2" outputNode="OUT_PORT:0,FinMessage:0,Block4:0,Document:0,MT103:0,F57a:0,[Choice]:0,F57A:0,PartyIdentifier:0" x="1243" y="20">
      <mappermodel:FunctionGraphNode label="If-Then-Else" type="41" x="998" y="20">
        <mappermodel:InputPins>bool,then,bool,else</mappermodel:InputPins>
        <mappermodel:OutputPins>R</mappermodel:OutputPins>
        <mappermodel:Properties/>
      </mappermodel:FunctionGraphNode>
      <mappermodel:FunctionGraphNode label="BOOL" type="42" x="265" y="20">
        <mappermodel:InputPins>1</mappermodel:InputPins>
        <mappermodel:OutputPins>R</mappermodel:OutputPins>
        <mappermodel:Properties/>
      </mappermodel:FunctionGraphNode>
      <mappermodel:TreeGraphNode inputNode="IN_PORT:0,Envelope:0,Document:0,FIToFICstmrCdtTrf:0,CdtTrfTxInf:0,CdtrAgtAcct:0,Id:0,[Choice]:0,IBAN:0" x="20" y="330">
        <mappermodel:InputPins>1st</mappermodel:InputPins>
        <mappermodel:OutputPins>1st</mappermodel:OutputPins>
      </mappermodel:TreeGraphNode>
      <mappermodel:TreeGraphNode inputNode="IN_PORT:0,Envelope:0,Document:0,FIToFICstmrCdtTrf:0,CdtTrfTxInf:0,CdtrAgtAcct:0,Id:0,[Choice]:0,Othr:0,Id:0" x="20" y="392">
        <mappermodel:InputPins>1st</mappermodel:InputPins>
        <mappermodel:OutputPins>1st</mappermodel:OutputPins>
      </mappermodel:TreeGraphNode>
      <mappermodel:TreeGraphNode inputNode="IN_PORT:0,Envelope:0,Document:0,FIToFICstmrCdtTrf:0,CdtTrfTxInf:0,CdtrAgtAcct:0,Id:0,[Choice]:0,Othr:0,SchmeNm:0,[Choice]:0,Cd:0" x="20" y="454">
        <mappermodel:InputPins>1st</mappermodel:InputPins>
        <mappermodel:OutputPins>1st</mappermodel:OutputPins>
      </mappermodel:TreeGraphNode>
      <mappermodel:TreeGraphNode inputNode="IN_PORT:0,Envelope:0,Document:0,FIToFICstmrCdtTrf:0,CdtTrfTxInf:0,CdtrAgtAcct:0" x="20" y="268">
        <mappermodel:InputPins>1st</mappermodel:InputPins>
        <mappermodel:OutputPins>1st</mappermodel:OutputPins>
      </mappermodel:TreeGraphNode>
      <mappermodel:FunctionGraphNode label="MX2MT:com.fiorano.funclet.MXtoMT.mx2MTAccountWithPrefix(java.lang.String arg1,java.lang.String arg2,java.lang.String arg3)" type="69" x="265" y="84">
        <mappermodel:InputPins>arg1,arg2,arg3</mappermodel:InputPins>
        <mappermodel:OutputPins>R</mappermodel:OutputPins>
        <mappermodel:Properties/>
      </mappermodel:FunctionGraphNode>
      <mappermodel:Link inputID="0" inputIndex="0" outputID="1" outputIndex="0"/>
      <mappermodel:Link inputID="2" inputIndex="0" outputID="6" outputIndex="0"/>
      <mappermodel:Link inputID="1" inputIndex="0" outputID="2" outputIndex="0"/>
      <mappermodel:Link inputID="7" inputIndex="0" outputID="3" outputIndex="0"/>
      <mappermodel:Link inputID="7" inputIndex="1" outputID="4" outputIndex="0"/>
      <mappermodel:Link inputID="7" inputIndex="2" outputID="5" outputIndex="0"/>
      <mappermodel:Link inputID="1" inputIndex="1" outputID="7" outputIndex="0"/>
    </mappermodel:GraphModel>
    <mappermodel:GraphModel inputPins="1,2" outputNode="OUT_PORT:0,FinMessage:0,Block4:0,Document:0,MT103:0,F57a:0,[Choice]:0,F57B:0,PartyIdentifier:0" x="616" y="67">
      <mappermodel:TreeGraphNode inputNode="IN_PORT:0,Envelope:0,Document:0,FIToFICstmrCdtTrf:0,CdtTrfTxInf:0,CdtrAgt:0,FinInstnId:0,Nm:0" x="-1" y="-1">
        <mappermodel:InputPins>1st</mappermodel:InputPins>
        <mappermodel:OutputPins>1st</mappermodel:OutputPins>
      </mappermodel:TreeGraphNode>
      <mappermodel:FunctionGraphNode label="Concat" type="20" x="385" y="152">
        <mappermodel:InputPins>1,2,3</mappermodel:InputPins>
        <mappermodel:OutputPins>str</mappermodel:OutputPins>
        <mappermodel:Properties/>
      </mappermodel:FunctionGraphNode>
      <mappermodel:FunctionGraphNode label="//" type="22" x="318" y="81">
        <mappermodel:InputPins></mappermodel:InputPins>
        <mappermodel:OutputPins>str</mappermodel:OutputPins>
        <mappermodel:Properties/>
      </mappermodel:FunctionGraphNode>
      <mappermodel:Link inputID="2" inputIndex="0" outputID="3" outputIndex="0"/>
      <mappermodel:Link inputID="2" inputIndex="1" outputID="1" outputIndex="0"/>
      <mappermodel:Link inputID="0" inputIndex="0" outputID="2" outputIndex="0"/>
    </mappermodel:GraphModel>
    <mappermodel:GraphModel inputPins="1,2" outputNode="OUT_PORT:0,FinMessage:0,Block4:0,Document:0,MT103:0,F57a:0,[Choice]:0,F57D:0,PartyIdentifier:0" x="1249" y="20">
      <mappermodel:FunctionGraphNode label="If-Then-Else" type="41" x="1004" y="20">
        <mappermodel:InputPins>bool,then,bool,then,bool,else</mappermodel:InputPins>
        <mappermodel:OutputPins>R</mappermodel:OutputPins>
        <mappermodel:Properties/>
      </mappermodel:FunctionGraphNode>
      <mappermodel:FunctionGraphNode label="BOOL" type="42" x="271" y="184">
        <mappermodel:InputPins>1</mappermodel:InputPins>
        <mappermodel:OutputPins>R</mappermodel:OutputPins>
        <mappermodel:Properties/>
      </mappermodel:FunctionGraphNode>
      <mappermodel:FunctionGraphNode label="BOOL" type="42" x="271" y="20">
        <mappermodel:InputPins>1</mappermodel:InputPins>
        <mappermodel:OutputPins>R</mappermodel:OutputPins>
        <mappermodel:Properties/>
      </mappermodel:FunctionGraphNode>
      <mappermodel:TreeGraphNode inputNode="IN_PORT:0,Envelope:0,Document:0,FIToFICstmrCdtTrf:0,CdtTrfTxInf:0,CdtrAgt:0,FinInstnId:0,ClrSysMmbId:0" x="20" y="82">
        <mappermodel:InputPins>1st</mappermodel:InputPins>
        <mappermodel:OutputPins>1st</mappermodel:OutputPins>
      </mappermodel:TreeGraphNode>
      <mappermodel:TreeGraphNode inputNode="IN_PORT:0,Envelope:0,Document:0,FIToFICstmrCdtTrf:0,CdtTrfTxInf:0,CdtrAgtAcct:0" x="20" y="20">
        <mappermodel:InputPins>1st</mappermodel:InputPins>
        <mappermodel:OutputPins>1st</mappermodel:OutputPins>
      </mappermodel:TreeGraphNode>
      <mappermodel:TreeGraphNode inputNode="IN_PORT:0,Envelope:0,Document:0,FIToFICstmrCdtTrf:0,CdtTrfTxInf:0,CdtrAgtAcct:0,Id:0,[Choice]:0,IBAN:0" x="20" y="392">
        <mappermodel:InputPins>1st</mappermodel:InputPins>
        <mappermodel:OutputPins>1st</mappermodel:OutputPins>
      </mappermodel:TreeGraphNode>
      <mappermodel:TreeGraphNode inputNode="IN_PORT:0,Envelope:0,Document:0,FIToFICstmrCdtTrf:0,CdtTrfTxInf:0,CdtrAgtAcct:0,Id:0,[Choice]:0,Othr:0,Id:0" x="20" y="454">
        <mappermodel:InputPins>1st</mappermodel:InputPins>
        <mappermodel:OutputPins>1st</mappermodel:OutputPins>
      </mappermodel:TreeGraphNode>
      <mappermodel:TreeGraphNode inputNode="IN_PORT:0,Envelope:0,Document:0,FIToFICstmrCdtTrf:0,CdtTrfTxInf:0,CdtrAgtAcct:0,Id:0,[Choice]:0,Othr:0,SchmeNm:0,[Choice]:0,Cd:0" x="20" y="516">
        <mappermodel:InputPins>1st</mappermodel:InputPins>
        <mappermodel:OutputPins>1st</mappermodel:OutputPins>
      </mappermodel:TreeGraphNode>
      <mappermodel:FunctionGraphNode label="MX2MT:com.fiorano.funclet.MXtoMT.mx2MTAccountWithPrefix(java.lang.String arg1,java.lang.String arg2,java.lang.String arg3)" type="69" x="271" y="248">
        <mappermodel:InputPins>arg1,arg2,arg3</mappermodel:InputPins>
        <mappermodel:OutputPins>R</mappermodel:OutputPins>
        <mappermodel:Properties/>
      </mappermodel:FunctionGraphNode>
      <mappermodel:Link inputID="1" inputIndex="2" outputID="2" outputIndex="0"/>
      <mappermodel:Link inputID="0" inputIndex="0" outputID="1" outputIndex="0"/>
      <mappermodel:Link inputID="3" inputIndex="0" outputID="4" outputIndex="0"/>
      <mappermodel:Link inputID="2" inputIndex="0" outputID="5" outputIndex="0"/>
      <mappermodel:Link inputID="1" inputIndex="0" outputID="3" outputIndex="0"/>
      <mappermodel:Link inputID="1" inputIndex="3" outputID="9" outputIndex="0"/>
      <mappermodel:Link inputID="9" inputIndex="0" outputID="6" outputIndex="0"/>
      <mappermodel:Link inputID="9" inputIndex="1" outputID="7" outputIndex="0"/>
      <mappermodel:Link inputID="9" inputIndex="2" outputID="8" outputIndex="0"/>
    </mappermodel:GraphModel>
    <mappermodel:GraphModel inputPins="1,2" outputNode="OUT_PORT:0,FinMessage:0,Block4:0,Document:0,MT103:0,F59a:0,[Choice]:0,F59A:0,IdentifierCode:0" x="-1" y="-1">
      <mappermodel:TreeGraphNode inputNode="IN_PORT:0,Envelope:0,Document:0,FIToFICstmrCdtTrf:0,CdtTrfTxInf:0,Cdtr:0,Id:0,[Choice]:0,OrgId:0,AnyBIC:0" x="-1" y="-1">
        <mappermodel:InputPins>1st</mappermodel:InputPins>
        <mappermodel:OutputPins>1st</mappermodel:OutputPins>
      </mappermodel:TreeGraphNode>
      <mappermodel:Link inputID="0" inputIndex="0" outputID="1" outputIndex="0"/>
    </mappermodel:GraphModel>
    <mappermodel:GraphModel inputPins="1,2" outputNode="OUT_PORT:0,FinMessage:0,Block4:0,Document:0,MT103:0,F72a:0,[Choice]:0,F72:0,NarrativeStructuredFormat:0,Line1:0,Code:0" x="1068" y="41">
      <mappermodel:FunctionGraphNode label="MX2MT:com.fiorano.funclet.MXtoMT.MX_To_MT72FullField1Line1Code(java.lang.String IA2_BICFI,java.lang.String IA2_Name,java.lang.String IA2_ClearingSystemIdentification_Code,java.lang.String IA2_MemberIdentification,java.lang.String IA2_TownName,java.lang.String IA2_Country,java.lang.String IA3_BICFI,java.lang.String IA3_Name,java.lang.String IA3_ClearingSystemIdentification_Code,java.lang.String IA3_MemberIdentification,java.lang.String IA3_TownName,java.lang.String IA3_Country,java.lang.String PIA1_BICFI,java.lang.String PIA2_BICFI,java.lang.String PIA3_BICFI,java.lang.String PIA1_Name,java.lang.String PIA2_Name,java.lang.String PIA3_Name,java.lang.String PIA1_ClearingSystemIdentification_Code,java.lang.String PIA2_ClearingSystemIdentification_Code,java.lang.String PIA3_ClearingSystemIdentification_Code,java.lang.String PIA1_MemberIdentification,java.lang.String PIA2_MemberIdentification,java.lang.String PIA3_MemberIdentification,java.lang.String ServiceLevelPropArr,java.lang.String ServiceLevelCodeArr,java.lang.String LocalInstrProp,java.lang.String LocalInstrCode,java.lang.String CtgyPurpProp,java.lang.String CtgyPurpCode,java.lang.String CdtrAgtBrnchIdID,java.lang.String CdtrAgtFinInstnIdBICFI,java.lang.String CdtrAgtFinInstnIdPstlAdrCtry,java.lang.String InstrForCdtrAgtCodeArr,java.lang.String InstrForCdtrAgtInstructionArr,java.lang.String InstrForNxtAgtInstructionArr,java.lang.String linelimiter,java.lang.String varlimiter)" type="69" x="372" y="172">
        <mappermodel:InputPins>IA2_BICFI,IA2_Name,IA2_ClearingSystemIdentification_Code,IA2_MemberIdentification,IA2_TownName,IA2_Country,IA3_BICFI,IA3_Name,IA3_ClearingSystemIdentification_Code,IA3_MemberIdentification,IA3_TownName,IA3_Country,PIA1_BICFI,PIA2_BICFI,PIA3_BICFI,PIA1_Name,PIA2_Name,PIA3_Name,PIA1_ClearingSystemIdentification_Code,PIA2_ClearingSystemIdentification_Code,PIA3_ClearingSystemIdentification_Code,PIA1_MemberIdentification,PIA2_MemberIdentification,PIA3_MemberIdentification,ServiceLevelPropArr,ServiceLevelCodeArr,LocalInstrProp,LocalInstrCode,CtgyPurpProp,CtgyPurpCode,CdtrAgtBrnchIdID,CdtrAgtFinInstnIdBICFI,CdtrAgtFinInstnIdPstlAdrCtry,InstrForCdtrAgtCodeArr,InstrForCdtrAgtInstructionArr,InstrForNxtAgtInstructionArr,linelimiter,varlimiter</mappermodel:InputPins>
        <mappermodel:OutputPins>R</mappermodel:OutputPins>
        <mappermodel:Properties/>
      </mappermodel:FunctionGraphNode>
      <mappermodel:FunctionGraphNode label="Variable:LineSeparator" type="160" x="129" y="879">
        <mappermodel:InputPins></mappermodel:InputPins>
        <mappermodel:OutputPins>R</mappermodel:OutputPins>
        <mappermodel:Properties/>
      </mappermodel:FunctionGraphNode>
      <mappermodel:FunctionGraphNode label="Variable:VariableSeparator" type="160" x="161" y="911">
        <mappermodel:InputPins></mappermodel:InputPins>
        <mappermodel:OutputPins>R</mappermodel:OutputPins>
        <mappermodel:Properties/>
      </mappermodel:FunctionGraphNode>
      <mappermodel:FunctionGraphNode label="Variable:InstrForCdtrAgtCodeArr" type="160" x="29" y="759">
        <mappermodel:InputPins></mappermodel:InputPins>
        <mappermodel:OutputPins>R</mappermodel:OutputPins>
        <mappermodel:Properties/>
      </mappermodel:FunctionGraphNode>
      <mappermodel:FunctionGraphNode label="Variable:ServiceLevelPropArr" type="160" x="-37" y="525">
        <mappermodel:InputPins></mappermodel:InputPins>
        <mappermodel:OutputPins>R</mappermodel:OutputPins>
        <mappermodel:Properties/>
      </mappermodel:FunctionGraphNode>
      <mappermodel:FunctionGraphNode label="Variable:ServiceLevelCodeArr" type="160" x="-37" y="552">
        <mappermodel:InputPins></mappermodel:InputPins>
        <mappermodel:OutputPins>R</mappermodel:OutputPins>
        <mappermodel:Properties/>
      </mappermodel:FunctionGraphNode>
      <mappermodel:FunctionGraphNode label="Variable:InstrForCdtrAgtInstructionArr" type="160" x="12" y="783">
        <mappermodel:InputPins></mappermodel:InputPins>
        <mappermodel:OutputPins>R</mappermodel:OutputPins>
        <mappermodel:Properties/>
      </mappermodel:FunctionGraphNode>
      <mappermodel:TreeGraphNode inputNode="IN_PORT:0,Envelope:0,Document:0,FIToFICstmrCdtTrf:0,CdtTrfTxInf:0,IntrmyAgt2:0,FinInstnId:0,BICFI:0" x="162" y="-95">
        <mappermodel:InputPins>1st</mappermodel:InputPins>
        <mappermodel:OutputPins>1st</mappermodel:OutputPins>
      </mappermodel:TreeGraphNode>
      <mappermodel:TreeGraphNode inputNode="IN_PORT:0,Envelope:0,Document:0,FIToFICstmrCdtTrf:0,CdtTrfTxInf:0,IntrmyAgt2:0,FinInstnId:0,Nm:0" x="161" y="-71">
        <mappermodel:InputPins>1st</mappermodel:InputPins>
        <mappermodel:OutputPins>1st</mappermodel:OutputPins>
      </mappermodel:TreeGraphNode>
      <mappermodel:TreeGraphNode inputNode="IN_PORT:0,Envelope:0,Document:0,FIToFICstmrCdtTrf:0,CdtTrfTxInf:0,IntrmyAgt2:0,FinInstnId:0,ClrSysMmbId:0,ClrSysId:0,[Choice]:0,Cd:0" x="162" y="-44">
        <mappermodel:InputPins>1st</mappermodel:InputPins>
        <mappermodel:OutputPins>1st</mappermodel:OutputPins>
      </mappermodel:TreeGraphNode>
      <mappermodel:TreeGraphNode inputNode="IN_PORT:0,Envelope:0,Document:0,FIToFICstmrCdtTrf:0,CdtTrfTxInf:0,IntrmyAgt2:0,FinInstnId:0,ClrSysMmbId:0,MmbId:0" x="141" y="-19">
        <mappermodel:InputPins>1st</mappermodel:InputPins>
        <mappermodel:OutputPins>1st</mappermodel:OutputPins>
      </mappermodel:TreeGraphNode>
      <mappermodel:TreeGraphNode inputNode="IN_PORT:0,Envelope:0,Document:0,FIToFICstmrCdtTrf:0,CdtTrfTxInf:0,IntrmyAgt2:0,FinInstnId:0,PstlAdr:0,TwnNm:0" x="136" y="5">
        <mappermodel:InputPins>1st</mappermodel:InputPins>
        <mappermodel:OutputPins>1st</mappermodel:OutputPins>
      </mappermodel:TreeGraphNode>
      <mappermodel:TreeGraphNode inputNode="IN_PORT:0,Envelope:0,Document:0,FIToFICstmrCdtTrf:0,CdtTrfTxInf:0,IntrmyAgt2:0,FinInstnId:0,PstlAdr:0,Ctry:0" x="148" y="30">
        <mappermodel:InputPins>1st</mappermodel:InputPins>
        <mappermodel:OutputPins>1st</mappermodel:OutputPins>
      </mappermodel:TreeGraphNode>
      <mappermodel:TreeGraphNode inputNode="IN_PORT:0,Envelope:0,Document:0,FIToFICstmrCdtTrf:0,CdtTrfTxInf:0,IntrmyAgt3:0,FinInstnId:0,BICFI:0" x="136" y="56">
        <mappermodel:InputPins>1st</mappermodel:InputPins>
        <mappermodel:OutputPins>1st</mappermodel:OutputPins>
      </mappermodel:TreeGraphNode>
      <mappermodel:TreeGraphNode inputNode="IN_PORT:0,Envelope:0,Document:0,FIToFICstmrCdtTrf:0,CdtTrfTxInf:0,IntrmyAgt3:0,FinInstnId:0,Nm:0" x="132" y="83">
        <mappermodel:InputPins>1st</mappermodel:InputPins>
        <mappermodel:OutputPins>1st</mappermodel:OutputPins>
      </mappermodel:TreeGraphNode>
      <mappermodel:TreeGraphNode inputNode="IN_PORT:0,Envelope:0,Document:0,FIToFICstmrCdtTrf:0,CdtTrfTxInf:0,IntrmyAgt3:0,FinInstnId:0,ClrSysMmbId:0,ClrSysId:0,[Choice]:0,Cd:0" x="134" y="110">
        <mappermodel:InputPins>1st</mappermodel:InputPins>
        <mappermodel:OutputPins>1st</mappermodel:OutputPins>
      </mappermodel:TreeGraphNode>
      <mappermodel:TreeGraphNode inputNode="IN_PORT:0,Envelope:0,Document:0,FIToFICstmrCdtTrf:0,CdtTrfTxInf:0,IntrmyAgt3:0,FinInstnId:0,ClrSysMmbId:0,MmbId:0" x="104" y="135">
        <mappermodel:InputPins>1st</mappermodel:InputPins>
        <mappermodel:OutputPins>1st</mappermodel:OutputPins>
      </mappermodel:TreeGraphNode>
      <mappermodel:TreeGraphNode inputNode="IN_PORT:0,Envelope:0,Document:0,FIToFICstmrCdtTrf:0,CdtTrfTxInf:0,IntrmyAgt3:0,FinInstnId:0,PstlAdr:0,TwnNm:0" x="91" y="160">
        <mappermodel:InputPins>1st</mappermodel:InputPins>
        <mappermodel:OutputPins>1st</mappermodel:OutputPins>
      </mappermodel:TreeGraphNode>
      <mappermodel:TreeGraphNode inputNode="IN_PORT:0,Envelope:0,Document:0,FIToFICstmrCdtTrf:0,CdtTrfTxInf:0,IntrmyAgt3:0,FinInstnId:0,PstlAdr:0,Ctry:0" x="107" y="186">
        <mappermodel:InputPins>1st</mappermodel:InputPins>
        <mappermodel:OutputPins>1st</mappermodel:OutputPins>
      </mappermodel:TreeGraphNode>
      <mappermodel:TreeGraphNode inputNode="IN_PORT:0,Envelope:0,Document:0,FIToFICstmrCdtTrf:0,CdtTrfTxInf:0,PrvsInstgAgt1:0,FinInstnId:0,BICFI:0" x="89" y="214">
        <mappermodel:InputPins>1st</mappermodel:InputPins>
        <mappermodel:OutputPins>1st</mappermodel:OutputPins>
      </mappermodel:TreeGraphNode>
      <mappermodel:TreeGraphNode inputNode="IN_PORT:0,Envelope:0,Document:0,FIToFICstmrCdtTrf:0,CdtTrfTxInf:0,PrvsInstgAgt1:0,FinInstnId:0,Nm:0" x="66" y="287">
        <mappermodel:InputPins>1st</mappermodel:InputPins>
        <mappermodel:OutputPins>1st</mappermodel:OutputPins>
      </mappermodel:TreeGraphNode>
      <mappermodel:TreeGraphNode inputNode="IN_PORT:0,Envelope:0,Document:0,FIToFICstmrCdtTrf:0,CdtTrfTxInf:0,PrvsInstgAgt1:0,FinInstnId:0,ClrSysMmbId:0,ClrSysId:0,[Choice]:0,Cd:0" x="47" y="355">
        <mappermodel:InputPins>1st</mappermodel:InputPins>
        <mappermodel:OutputPins>1st</mappermodel:OutputPins>
      </mappermodel:TreeGraphNode>
      <mappermodel:TreeGraphNode inputNode="IN_PORT:0,Envelope:0,Document:0,FIToFICstmrCdtTrf:0,CdtTrfTxInf:0,PrvsInstgAgt1:0,FinInstnId:0,ClrSysMmbId:0,MmbId:0" x="-24" y="439">
        <mappermodel:InputPins>1st</mappermodel:InputPins>
        <mappermodel:OutputPins>1st</mappermodel:OutputPins>
      </mappermodel:TreeGraphNode>
      <mappermodel:TreeGraphNode inputNode="IN_PORT:0,Envelope:0,Document:0,FIToFICstmrCdtTrf:0,CdtTrfTxInf:0,PrvsInstgAgt2:0,FinInstnId:0,BICFI:0" x="83" y="240">
        <mappermodel:InputPins>1st</mappermodel:InputPins>
        <mappermodel:OutputPins>1st</mappermodel:OutputPins>
      </mappermodel:TreeGraphNode>
      <mappermodel:TreeGraphNode inputNode="IN_PORT:0,Envelope:0,Document:0,FIToFICstmrCdtTrf:0,CdtTrfTxInf:0,PrvsInstgAgt2:0,FinInstnId:0,Nm:0" x="61" y="309">
        <mappermodel:InputPins>1st</mappermodel:InputPins>
        <mappermodel:OutputPins>1st</mappermodel:OutputPins>
      </mappermodel:TreeGraphNode>
      <mappermodel:TreeGraphNode inputNode="IN_PORT:0,Envelope:0,Document:0,FIToFICstmrCdtTrf:0,CdtTrfTxInf:0,PrvsInstgAgt2:0,FinInstnId:0,ClrSysMmbId:0,ClrSysId:0,[Choice]:0,Cd:0" x="33" y="380">
        <mappermodel:InputPins>1st</mappermodel:InputPins>
        <mappermodel:OutputPins>1st</mappermodel:OutputPins>
      </mappermodel:TreeGraphNode>
      <mappermodel:TreeGraphNode inputNode="IN_PORT:0,Envelope:0,Document:0,FIToFICstmrCdtTrf:0,CdtTrfTxInf:0,PrvsInstgAgt2:0,FinInstnId:0,ClrSysMmbId:0,MmbId:0" x="-32" y="464">
        <mappermodel:InputPins>1st</mappermodel:InputPins>
        <mappermodel:OutputPins>1st</mappermodel:OutputPins>
      </mappermodel:TreeGraphNode>
      <mappermodel:TreeGraphNode inputNode="IN_PORT:0,Envelope:0,Document:0,FIToFICstmrCdtTrf:0,CdtTrfTxInf:0,PrvsInstgAgt3:0,FinInstnId:0,BICFI:0" x="64" y="265">
        <mappermodel:InputPins>1st</mappermodel:InputPins>
        <mappermodel:OutputPins>1st</mappermodel:OutputPins>
      </mappermodel:TreeGraphNode>
      <mappermodel:TreeGraphNode inputNode="IN_PORT:0,Envelope:0,Document:0,FIToFICstmrCdtTrf:0,CdtTrfTxInf:0,PrvsInstgAgt3:0,FinInstnId:0,Nm:0" x="52" y="329">
        <mappermodel:InputPins>1st</mappermodel:InputPins>
        <mappermodel:OutputPins>1st</mappermodel:OutputPins>
      </mappermodel:TreeGraphNode>
      <mappermodel:TreeGraphNode inputNode="IN_PORT:0,Envelope:0,Document:0,FIToFICstmrCdtTrf:0,CdtTrfTxInf:0,PrvsInstgAgt3:0,FinInstnId:0,ClrSysMmbId:0,ClrSysId:0,[Choice]:0,Cd:0" x="22" y="407">
        <mappermodel:InputPins>1st</mappermodel:InputPins>
        <mappermodel:OutputPins>1st</mappermodel:OutputPins>
      </mappermodel:TreeGraphNode>
      <mappermodel:TreeGraphNode inputNode="IN_PORT:0,Envelope:0,Document:0,FIToFICstmrCdtTrf:0,CdtTrfTxInf:0,PrvsInstgAgt3:0,FinInstnId:0,ClrSysMmbId:0,MmbId:0" x="-34" y="489">
        <mappermodel:InputPins>1st</mappermodel:InputPins>
        <mappermodel:OutputPins>1st</mappermodel:OutputPins>
      </mappermodel:TreeGraphNode>
      <mappermodel:TreeGraphNode inputNode="IN_PORT:0,Envelope:0,Document:0,FIToFICstmrCdtTrf:0,CdtTrfTxInf:0,PmtTpInf:0,LclInstrm:0,[Choice]:0,Cd:0" x="73" y="607">
        <mappermodel:InputPins>1st</mappermodel:InputPins>
        <mappermodel:OutputPins>1st</mappermodel:OutputPins>
      </mappermodel:TreeGraphNode>
      <mappermodel:TreeGraphNode inputNode="IN_PORT:0,Envelope:0,Document:0,FIToFICstmrCdtTrf:0,CdtTrfTxInf:0,PmtTpInf:0,LclInstrm:0,[Choice]:0,Prtry:0" x="39" y="580">
        <mappermodel:InputPins>1st</mappermodel:InputPins>
        <mappermodel:OutputPins>1st</mappermodel:OutputPins>
      </mappermodel:TreeGraphNode>
      <mappermodel:TreeGraphNode inputNode="IN_PORT:0,Envelope:0,Document:0,FIToFICstmrCdtTrf:0,CdtTrfTxInf:0,PmtTpInf:0,CtgyPurp:0,[Choice]:0,Cd:0" x="94" y="655">
        <mappermodel:InputPins>1st</mappermodel:InputPins>
        <mappermodel:OutputPins>1st</mappermodel:OutputPins>
        <mappermodel:Properties/>
      </mappermodel:TreeGraphNode>
      <mappermodel:TreeGraphNode inputNode="IN_PORT:0,Envelope:0,Document:0,FIToFICstmrCdtTrf:0,CdtTrfTxInf:0,PmtTpInf:0,CtgyPurp:0,[Choice]:0,Prtry:0" x="75" y="630">
        <mappermodel:InputPins>1st</mappermodel:InputPins>
        <mappermodel:OutputPins>1st</mappermodel:OutputPins>
      </mappermodel:TreeGraphNode>
      <mappermodel:TreeGraphNode inputNode="IN_PORT:0,Envelope:0,Document:0,FIToFICstmrCdtTrf:0,CdtTrfTxInf:0,CdtrAgt:0,BrnchId:0,Id:0" x="101" y="678">
        <mappermodel:InputPins>1st</mappermodel:InputPins>
        <mappermodel:OutputPins>1st</mappermodel:OutputPins>
      </mappermodel:TreeGraphNode>
      <mappermodel:TreeGraphNode inputNode="IN_PORT:0,Envelope:0,Document:0,FIToFICstmrCdtTrf:0,CdtTrfTxInf:0,CdtrAgt:0,FinInstnId:0,BICFI:0" x="100" y="702">
        <mappermodel:InputPins>1st</mappermodel:InputPins>
        <mappermodel:OutputPins>1st</mappermodel:OutputPins>
      </mappermodel:TreeGraphNode>
      <mappermodel:TreeGraphNode inputNode="IN_PORT:0,Envelope:0,Document:0,FIToFICstmrCdtTrf:0,CdtTrfTxInf:0,CdtrAgt:0,FinInstnId:0,PstlAdr:0,Ctry:0" x="120" y="734">
        <mappermodel:InputPins>1st</mappermodel:InputPins>
        <mappermodel:OutputPins>1st</mappermodel:OutputPins>
      </mappermodel:TreeGraphNode>
      <mappermodel:FunctionGraphNode label="Variable:InstrForNxtAgtInstructionArr" type="160" x="31" y="807">
        <mappermodel:InputPins></mappermodel:InputPins>
        <mappermodel:OutputPins>R</mappermodel:OutputPins>
        <mappermodel:Properties/>
      </mappermodel:FunctionGraphNode>
      <mappermodel:Link inputID="1" inputIndex="36" outputID="2" outputIndex="0"/>
      <mappermodel:Link inputID="1" inputIndex="37" outputID="3" outputIndex="0"/>
      <mappermodel:Link inputID="1" inputIndex="33" outputID="4" outputIndex="0"/>
      <mappermodel:Link inputID="1" inputIndex="34" outputID="7" outputIndex="0"/>
      <mappermodel:Link inputID="1" inputIndex="24" outputID="5" outputIndex="0"/>
      <mappermodel:Link inputID="1" inputIndex="25" outputID="6" outputIndex="0"/>
      <mappermodel:Link inputID="1" inputIndex="0" outputID="8" outputIndex="0"/>
      <mappermodel:Link inputID="1" inputIndex="1" outputID="9" outputIndex="0"/>
      <mappermodel:Link inputID="1" inputIndex="2" outputID="10" outputIndex="0"/>
      <mappermodel:Link inputID="1" inputIndex="3" outputID="11" outputIndex="0"/>
      <mappermodel:Link inputID="1" inputIndex="4" outputID="12" outputIndex="0"/>
      <mappermodel:Link inputID="1" inputIndex="5" outputID="13" outputIndex="0"/>
      <mappermodel:Link inputID="1" inputIndex="6" outputID="14" outputIndex="0"/>
      <mappermodel:Link inputID="1" inputIndex="7" outputID="15" outputIndex="0"/>
      <mappermodel:Link inputID="1" inputIndex="8" outputID="16" outputIndex="0"/>
      <mappermodel:Link inputID="1" inputIndex="9" outputID="17" outputIndex="0"/>
      <mappermodel:Link inputID="1" inputIndex="10" outputID="18" outputIndex="0"/>
      <mappermodel:Link inputID="1" inputIndex="11" outputID="19" outputIndex="0"/>
      <mappermodel:Link inputID="1" inputIndex="12" outputID="20" outputIndex="0"/>
      <mappermodel:Link inputID="1" inputIndex="15" outputID="21" outputIndex="0"/>
      <mappermodel:Link inputID="1" inputIndex="18" outputID="22" outputIndex="0"/>
      <mappermodel:Link inputID="1" inputIndex="21" outputID="23" outputIndex="0"/>
      <mappermodel:Link inputID="1" inputIndex="13" outputID="24" outputIndex="0"/>
      <mappermodel:Link inputID="1" inputIndex="16" outputID="25" outputIndex="0"/>
      <mappermodel:Link inputID="1" inputIndex="22" outputID="27" outputIndex="0"/>
      <mappermodel:Link inputID="1" inputIndex="19" outputID="26" outputIndex="0"/>
      <mappermodel:Link inputID="1" inputIndex="14" outputID="28" outputIndex="0"/>
      <mappermodel:Link inputID="1" inputIndex="17" outputID="29" outputIndex="0"/>
      <mappermodel:Link inputID="1" inputIndex="20" outputID="30" outputIndex="0"/>
      <mappermodel:Link inputID="1" inputIndex="23" outputID="31" outputIndex="0"/>
      <mappermodel:Link inputID="1" inputIndex="27" outputID="32" outputIndex="0"/>
      <mappermodel:Link inputID="1" inputIndex="26" outputID="33" outputIndex="0"/>
      <mappermodel:Link inputID="1" inputIndex="28" outputID="35" outputIndex="0"/>
      <mappermodel:Link inputID="1" inputIndex="29" outputID="34" outputIndex="0"/>
      <mappermodel:Link inputID="1" inputIndex="30" outputID="36" outputIndex="0"/>
      <mappermodel:Link inputID="1" inputIndex="31" outputID="37" outputIndex="0"/>
      <mappermodel:Link inputID="1" inputIndex="32" outputID="38" outputIndex="0"/>
      <mappermodel:Link inputID="1" inputIndex="35" outputID="39" outputIndex="0"/>
      <mappermodel:Link inputID="0" inputIndex="0" outputID="1" outputIndex="0"/>
    </mappermodel:GraphModel>
    <mappermodel:GraphModel inputPins="1,2" outputNode="OUT_PORT:0,FinMessage:0,Block1:0,ApplicationIdentifier:0" x="-1" y="-1">
      <mappermodel:FunctionGraphNode label="F" type="22" x="171" y="67">
        <mappermodel:InputPins></mappermodel:InputPins>
        <mappermodel:OutputPins>str</mappermodel:OutputPins>
        <mappermodel:Properties/>
      </mappermodel:FunctionGraphNode>
      <mappermodel:Link inputID="0" inputIndex="0" outputID="1" outputIndex="0"/>
    </mappermodel:GraphModel>
    <mappermodel:GraphModel inputPins="1,2" outputNode="OUT_PORT:0,FinMessage:0,Block1:0,ServiceIdentifier:0" x="-1" y="-1">
      <mappermodel:FunctionGraphNode label="01" type="22" x="76" y="66">
        <mappermodel:InputPins></mappermodel:InputPins>
        <mappermodel:OutputPins>str</mappermodel:OutputPins>
        <mappermodel:Properties/>
      </mappermodel:FunctionGraphNode>
      <mappermodel:Link inputID="0" inputIndex="0" outputID="1" outputIndex="0"/>
    </mappermodel:GraphModel>
    <mappermodel:GraphModel inputPins="1,2" outputNode="OUT_PORT:0,FinMessage:0,Block1:0,LogicalTerminalAddress:0" x="-1" y="-1">
      <mappermodel:FunctionGraphNode label="MX2MT:com.fiorano.funclet.MXtoMT.MX_To_MT_BICFI_LogicalAddress(java.lang.String arg1)" type="69" x="96" y="144">
        <mappermodel:InputPins>arg1</mappermodel:InputPins>
        <mappermodel:OutputPins>R</mappermodel:OutputPins>
        <mappermodel:Properties/>
      </mappermodel:FunctionGraphNode>
      <mappermodel:TreeGraphNode inputNode="IN_PORT:0,Envelope:0,AppHdr:0,To:0,[Choice]:0,FIId:0,FinInstnId:0,BICFI:0" x="64" y="55">
        <mappermodel:InputPins>1st</mappermodel:InputPins>
        <mappermodel:OutputPins>1st</mappermodel:OutputPins>
      </mappermodel:TreeGraphNode>
      <mappermodel:Link inputID="0" inputIndex="0" outputID="1" outputIndex="0"/>
      <mappermodel:Link inputID="1" inputIndex="0" outputID="2" outputIndex="0"/>
    </mappermodel:GraphModel>
    <mappermodel:GraphModel inputPins="1,2" outputNode="OUT_PORT:0,FinMessage:0,Block1:0,SessionNumber:0" x="-1" y="-1">
      <mappermodel:FunctionGraphNode label="0000" type="22" x="150" y="107">
        <mappermodel:InputPins></mappermodel:InputPins>
        <mappermodel:OutputPins>str</mappermodel:OutputPins>
        <mappermodel:Properties/>
      </mappermodel:FunctionGraphNode>
      <mappermodel:Link inputID="0" inputIndex="0" outputID="1" outputIndex="0"/>
    </mappermodel:GraphModel>
    <mappermodel:GraphModel inputPins="1,2" outputNode="OUT_PORT:0,FinMessage:0,Block1:0,SequenceNumber:0" x="-1" y="-1">
      <mappermodel:FunctionGraphNode label="000000" type="22" x="60" y="66">
        <mappermodel:InputPins></mappermodel:InputPins>
        <mappermodel:OutputPins>str</mappermodel:OutputPins>
        <mappermodel:Properties/>
      </mappermodel:FunctionGraphNode>
      <mappermodel:Link inputID="0" inputIndex="0" outputID="1" outputIndex="0"/>
    </mappermodel:GraphModel>
    <mappermodel:GraphModel inputPins="1,2" outputNode="OUT_PORT:0,FinMessage:0,Block2:0,[Choice]:0,OutputIdentifier:0" x="-1" y="-1">
      <mappermodel:FunctionGraphNode label="O" type="22" x="53" y="63">
        <mappermodel:InputPins></mappermodel:InputPins>
        <mappermodel:OutputPins>str</mappermodel:OutputPins>
        <mappermodel:Properties/>
      </mappermodel:FunctionGraphNode>
      <mappermodel:Link inputID="0" inputIndex="0" outputID="1" outputIndex="0"/>
    </mappermodel:GraphModel>
    <mappermodel:GraphModel inputPins="1,2" outputNode="OUT_PORT:0,FinMessage:0,Block2:0,[Choice]:0,MessageType:1" x="-1" y="-1">
      <mappermodel:FunctionGraphNode label="103" type="22" x="91" y="99">
        <mappermodel:InputPins></mappermodel:InputPins>
        <mappermodel:OutputPins>str</mappermodel:OutputPins>
        <mappermodel:Properties/>
      </mappermodel:FunctionGraphNode>
      <mappermodel:Link inputID="0" inputIndex="0" outputID="1" outputIndex="0"/>
    </mappermodel:GraphModel>
    <mappermodel:GraphModel inputPins="1,2" outputNode="OUT_PORT:0,FinMessage:0,Block2:0,[Choice]:0,InputTime:0" x="-1" y="-1">
      <mappermodel:FunctionGraphNode label="0000" type="22" x="105" y="93">
        <mappermodel:InputPins></mappermodel:InputPins>
        <mappermodel:OutputPins>str</mappermodel:OutputPins>
        <mappermodel:Properties/>
      </mappermodel:FunctionGraphNode>
      <mappermodel:Link inputID="0" inputIndex="0" outputID="1" outputIndex="0"/>
    </mappermodel:GraphModel>
    <mappermodel:GraphModel inputPins="1,2" outputNode="OUT_PORT:0,FinMessage:0,Block2:0,[Choice]:0,MessageInputReference:0,Date:0" x="-1" y="-1">
      <mappermodel:FunctionGraphNode label="991231" type="22" x="105" y="98">
        <mappermodel:InputPins></mappermodel:InputPins>
        <mappermodel:OutputPins>str</mappermodel:OutputPins>
        <mappermodel:Properties/>
      </mappermodel:FunctionGraphNode>
      <mappermodel:Link inputID="0" inputIndex="0" outputID="1" outputIndex="0"/>
    </mappermodel:GraphModel>
    <mappermodel:GraphModel inputPins="1,2" outputNode="OUT_PORT:0,FinMessage:0,Block2:0,[Choice]:0,MessageInputReference:0,LTIdentifier:0" x="667" y="67">
      <mappermodel:TreeGraphNode inputNode="IN_PORT:0,Envelope:0,AppHdr:0,Fr:0,[Choice]:0,FIId:0,FinInstnId:0,BICFI:0" x="97" y="99">
        <mappermodel:InputPins>1st</mappermodel:InputPins>
        <mappermodel:OutputPins>1st</mappermodel:OutputPins>
      </mappermodel:TreeGraphNode>
      <mappermodel:FunctionGraphNode label="MX2MT:com.fiorano.funclet.MXtoMT.MX_To_MT_BICFI_LTIAddress(java.lang.String arg1)" type="69" x="144" y="65">
        <mappermodel:InputPins>arg1</mappermodel:InputPins>
        <mappermodel:OutputPins>R</mappermodel:OutputPins>
        <mappermodel:Properties/>
      </mappermodel:FunctionGraphNode>
      <mappermodel:Link inputID="2" inputIndex="0" outputID="1" outputIndex="0"/>
      <mappermodel:Link inputID="0" inputIndex="0" outputID="2" outputIndex="0"/>
    </mappermodel:GraphModel>
    <mappermodel:GraphModel inputPins="1,2" outputNode="OUT_PORT:0,FinMessage:0,Block2:0,[Choice]:0,MessageInputReference:0,BranchCode:0" x="946" y="216">
      <mappermodel:TreeGraphNode inputNode="IN_PORT:0,Envelope:0,AppHdr:0,Fr:0,[Choice]:0,FIId:0,FinInstnId:0,BICFI:0" x="35" y="60">
        <mappermodel:InputPins>1st</mappermodel:InputPins>
        <mappermodel:OutputPins>1st</mappermodel:OutputPins>
      </mappermodel:TreeGraphNode>
      <mappermodel:FunctionGraphNode label="2" type="22" x="86" y="196">
        <mappermodel:InputPins></mappermodel:InputPins>
        <mappermodel:OutputPins>str</mappermodel:OutputPins>
        <mappermodel:Properties/>
      </mappermodel:FunctionGraphNode>
      <mappermodel:FunctionGraphNode label="11" type="22" x="141" y="144">
        <mappermodel:InputPins></mappermodel:InputPins>
        <mappermodel:OutputPins>str</mappermodel:OutputPins>
        <mappermodel:Properties/>
      </mappermodel:FunctionGraphNode>
      <mappermodel:FunctionGraphNode label=">=" type="35" x="397" y="119">
        <mappermodel:InputPins>1,2</mappermodel:InputPins>
        <mappermodel:OutputPins>R</mappermodel:OutputPins>
        <mappermodel:Properties/>
      </mappermodel:FunctionGraphNode>
      <mappermodel:FunctionGraphNode label="Length" type="21" x="197" y="111">
        <mappermodel:InputPins>str</mappermodel:InputPins>
        <mappermodel:OutputPins>num</mappermodel:OutputPins>
        <mappermodel:Properties/>
      </mappermodel:FunctionGraphNode>
      <mappermodel:FunctionGraphNode label="SubString-Offset" type="25" x="428" y="224">
        <mappermodel:InputPins>str,offset</mappermodel:InputPins>
        <mappermodel:OutputPins>str</mappermodel:OutputPins>
        <mappermodel:Properties/>
      </mappermodel:FunctionGraphNode>
      <mappermodel:FunctionGraphNode label="-" type="2" x="266" y="250">
        <mappermodel:InputPins>num1,num2</mappermodel:InputPins>
        <mappermodel:OutputPins>num</mappermodel:OutputPins>
        <mappermodel:Properties/>
      </mappermodel:FunctionGraphNode>
      <mappermodel:FunctionGraphNode label="If-Then-Else" type="41" x="702" y="128">
        <mappermodel:InputPins>bool,then,bool,else</mappermodel:InputPins>
        <mappermodel:OutputPins>R</mappermodel:OutputPins>
        <mappermodel:Properties/>
      </mappermodel:FunctionGraphNode>
      <mappermodel:FunctionGraphNode label="XXX" type="22" x="711" y="237">
        <mappermodel:InputPins></mappermodel:InputPins>
        <mappermodel:OutputPins>str</mappermodel:OutputPins>
        <mappermodel:Properties/>
      </mappermodel:FunctionGraphNode>
      <mappermodel:Link inputID="5" inputIndex="0" outputID="1" outputIndex="0"/>
      <mappermodel:Link inputID="4" inputIndex="0" outputID="5" outputIndex="0"/>
      <mappermodel:Link inputID="4" inputIndex="1" outputID="3" outputIndex="0"/>
      <mappermodel:Link inputID="7" inputIndex="1" outputID="2" outputIndex="0"/>
      <mappermodel:Link inputID="7" inputIndex="0" outputID="5" outputIndex="0"/>
      <mappermodel:Link inputID="6" inputIndex="1" outputID="7" outputIndex="0"/>
      <mappermodel:Link inputID="6" inputIndex="0" outputID="1" outputIndex="0"/>
      <mappermodel:Link inputID="8" inputIndex="0" outputID="4" outputIndex="0"/>
      <mappermodel:Link inputID="8" inputIndex="1" outputID="6" outputIndex="0"/>
      <mappermodel:Link inputID="8" inputIndex="3" outputID="9" outputIndex="0"/>
      <mappermodel:Link inputID="0" inputIndex="0" outputID="8" outputIndex="0"/>
    </mappermodel:GraphModel>
    <mappermodel:GraphModel inputPins="1,2" outputNode="OUT_PORT:0,FinMessage:0,Block2:0,[Choice]:0,MessageInputReference:0,SessionNumber:0" x="-1" y="-1">
      <mappermodel:FunctionGraphNode label="0000" type="22" x="161" y="97">
        <mappermodel:InputPins></mappermodel:InputPins>
        <mappermodel:OutputPins>str</mappermodel:OutputPins>
        <mappermodel:Properties/>
      </mappermodel:FunctionGraphNode>
      <mappermodel:Link inputID="0" inputIndex="0" outputID="1" outputIndex="0"/>
    </mappermodel:GraphModel>
    <mappermodel:GraphModel inputPins="1,2" outputNode="OUT_PORT:0,FinMessage:0,Block2:0,[Choice]:0,MessageInputReference:0,ISN:0" x="-1" y="-1">
      <mappermodel:FunctionGraphNode label="000000" type="22" x="71" y="52">
        <mappermodel:InputPins></mappermodel:InputPins>
        <mappermodel:OutputPins>str</mappermodel:OutputPins>
        <mappermodel:Properties/>
      </mappermodel:FunctionGraphNode>
      <mappermodel:Link inputID="0" inputIndex="0" outputID="1" outputIndex="0"/>
    </mappermodel:GraphModel>
    <mappermodel:GraphModel inputPins="1,2" outputNode="OUT_PORT:0,FinMessage:0,Block2:0,[Choice]:0,Date:0" x="-1" y="-1">
      <mappermodel:FunctionGraphNode label="991231" type="22" x="96" y="91">
        <mappermodel:InputPins></mappermodel:InputPins>
        <mappermodel:OutputPins>str</mappermodel:OutputPins>
        <mappermodel:Properties/>
      </mappermodel:FunctionGraphNode>
      <mappermodel:Link inputID="0" inputIndex="0" outputID="1" outputIndex="0"/>
    </mappermodel:GraphModel>
    <mappermodel:GraphModel inputPins="1,2" outputNode="OUT_PORT:0,FinMessage:0,Block2:0,[Choice]:0,Time:0" x="-1" y="-1">
      <mappermodel:FunctionGraphNode label="0000" type="22" x="137" y="98">
        <mappermodel:InputPins></mappermodel:InputPins>
        <mappermodel:OutputPins>str</mappermodel:OutputPins>
        <mappermodel:Properties/>
      </mappermodel:FunctionGraphNode>
      <mappermodel:Link inputID="0" inputIndex="0" outputID="1" outputIndex="0"/>
    </mappermodel:GraphModel>
    <mappermodel:GraphModel inputPins="1,2" outputNode="OUT_PORT:0,FinMessage:0,Block2:0,[Choice]:0,MessagePriority:1" x="663" y="45">
      <mappermodel:TreeGraphNode inputNode="IN_PORT:0,Envelope:0,AppHdr:0,Prty:0" x="-1" y="-1">
        <mappermodel:InputPins>1st</mappermodel:InputPins>
        <mappermodel:OutputPins>1st</mappermodel:OutputPins>
      </mappermodel:TreeGraphNode>
      <mappermodel:FunctionGraphNode label="HIGH" type="22" x="111" y="136">
        <mappermodel:InputPins></mappermodel:InputPins>
        <mappermodel:OutputPins>str</mappermodel:OutputPins>
        <mappermodel:Properties/>
      </mappermodel:FunctionGraphNode>
      <mappermodel:FunctionGraphNode label="U" type="22" x="307" y="188">
        <mappermodel:InputPins></mappermodel:InputPins>
        <mappermodel:OutputPins>str</mappermodel:OutputPins>
        <mappermodel:Properties/>
      </mappermodel:FunctionGraphNode>
      <mappermodel:FunctionGraphNode label="N" type="22" x="389" y="223">
        <mappermodel:InputPins></mappermodel:InputPins>
        <mappermodel:OutputPins>str</mappermodel:OutputPins>
        <mappermodel:Properties/>
      </mappermodel:FunctionGraphNode>
      <mappermodel:FunctionGraphNode label="If-Then-Else" type="41" x="594" y="166">
        <mappermodel:InputPins>bool,then,bool,else</mappermodel:InputPins>
        <mappermodel:OutputPins>R</mappermodel:OutputPins>
        <mappermodel:Properties/>
      </mappermodel:FunctionGraphNode>
      <mappermodel:FunctionGraphNode label="=" type="31" x="261" y="94">
        <mappermodel:InputPins>1,2</mappermodel:InputPins>
        <mappermodel:OutputPins>R</mappermodel:OutputPins>
        <mappermodel:Properties/>
      </mappermodel:FunctionGraphNode>
      <mappermodel:Link inputID="6" inputIndex="1" outputID="2" outputIndex="0"/>
      <mappermodel:Link inputID="6" inputIndex="0" outputID="1" outputIndex="0"/>
      <mappermodel:Link inputID="5" inputIndex="0" outputID="6" outputIndex="0"/>
      <mappermodel:Link inputID="5" inputIndex="1" outputID="3" outputIndex="0"/>
      <mappermodel:Link inputID="5" inputIndex="3" outputID="4" outputIndex="0"/>
      <mappermodel:Link inputID="0" inputIndex="0" outputID="5" outputIndex="0"/>
    </mappermodel:GraphModel>
    <mappermodel:GraphModel inputPins="1,2" outputNode="OUT_PORT:0,FinMessage:0,Block4:0,Document:0,MT103:0,F23a_1:0,[Choice]:0,F23B:0" x="-1" y="-1">
      <mappermodel:FunctionGraphNode label="CRED" type="22" x="142" y="94">
        <mappermodel:InputPins></mappermodel:InputPins>
        <mappermodel:OutputPins>str</mappermodel:OutputPins>
        <mappermodel:Properties/>
      </mappermodel:FunctionGraphNode>
      <mappermodel:Link inputID="0" inputIndex="0" outputID="1" outputIndex="0"/>
    </mappermodel:GraphModel>
    <mappermodel:GraphModel inputPins="1,2" outputNode="OUT_PORT:0,FinMessage:0,Block3:0,F103:0" x="-1" y="-1">
      <mappermodel:FunctionGraphNode label="" type="22" x="204" y="86">
        <mappermodel:InputPins></mappermodel:InputPins>
        <mappermodel:OutputPins>str</mappermodel:OutputPins>
        <mappermodel:Properties/>
      </mappermodel:FunctionGraphNode>
      <mappermodel:Link inputID="0" inputIndex="0" outputID="1" outputIndex="0"/>
    </mappermodel:GraphModel>
    <mappermodel:GraphModel inputPins="1,2" outputNode="OUT_PORT:0,FinMessage:0,Block5:0,[ZERO MANY]:1,[Choice]:0,MRF:0,MIR:0,ISN:0" x="752" y="114">
      <mappermodel:FunctionGraphNode label="QueryGenerator:isBlank(str)" type="69" x="211" y="135">
        <mappermodel:InputPins>str</mappermodel:InputPins>
        <mappermodel:OutputPins>R</mappermodel:OutputPins>
        <mappermodel:Properties/>
      </mappermodel:FunctionGraphNode>
      <mappermodel:FunctionGraphNode label="" type="22" x="64" y="74">
        <mappermodel:InputPins></mappermodel:InputPins>
        <mappermodel:OutputPins>str</mappermodel:OutputPins>
        <mappermodel:Properties/>
      </mappermodel:FunctionGraphNode>
      <mappermodel:FunctionGraphNode label="If-Then-Else" type="41" x="537" y="261">
        <mappermodel:InputPins>bool,then,bool,else</mappermodel:InputPins>
        <mappermodel:OutputPins>R</mappermodel:OutputPins>
        <mappermodel:Properties/>
      </mappermodel:FunctionGraphNode>
      <mappermodel:Link inputID="1" inputIndex="0" outputID="2" outputIndex="0"/>
      <mappermodel:Link inputID="3" inputIndex="0" outputID="1" outputIndex="0"/>
      <mappermodel:Link inputID="0" inputIndex="0" outputID="3" outputIndex="0"/>
      <mappermodel:Link inputID="3" inputIndex="1" outputID="2" outputIndex="0"/>
      <mappermodel:Link inputID="3" inputIndex="3" outputID="2" outputIndex="0"/>
    </mappermodel:GraphModel>
  </mappermodel:Mappings>
  <mappermodel:Extensions>
    <mappermodel:Extension language="javascript" name="QueryGenerator">
      <mappermodel:Script>function isBlank(str) {
    return (!str || /^\s*$/.test(str));
}

// JMS-Message can be accessed using 'document' variable
function generateQuery(strinput) {
var output = &quot;INSERT INTO finastra.truncatedcontent ( uetr, field, keypair, valuepair ) VALUES &quot;;
var flagempty = true;
var mainpairs = strinput.split('ENDOFUETR');
var UETR = mainpairs[0];
if(mainpairs[1]) {
	var rest = mainpairs[1];
	var truncpairs = rest.split('ENDOFTRUNCATEDFIELD');
	var arrayLength = truncpairs.length;
	for (var i = 0; i &lt; arrayLength; i++) {
		var trunckeyvalue = truncpairs[i].split('ENDOFFIELDTAG');
		if(trunckeyvalue.length > 1 &amp;&amp; !isBlank(trunckeyvalue[1])){
			if(trunckeyvalue[1]) {
				var keyvaluepairs = trunckeyvalue[1].split('ENDOFPAIR');
				var arrayLength1 = keyvaluepairs.length;
				for (var j = 0; j &lt; arrayLength1; j++) {
					var keyvaluepair = keyvaluepairs[j].split('CONCATPAIR');
					if(keyvaluepair[1]){
						output = output.concat(&quot;('&quot; , UETR , &quot;','&quot; , trunckeyvalue[0] , &quot;','&quot; , keyvaluepair[0] , &quot;','&quot; , keyvaluepair[1] , &quot;'),&quot;);
						flagempty = false;
					}
		
				}
			}
		}
	}
}	
if(flagempty) {
	output = &quot;&quot;;
}else {
	output = output.replace(/.$/,&quot;;&quot;);
}
return output;
}


function generateReadableData(strinput) {
var output = &quot;MessageID	 : &quot;;
var flagempty = true;
var mainpairs = strinput.split('ENDOFUETR');
var UETR = mainpairs[0];
output = output.concat(UETR, &quot;\nList of Truncated content:\n&quot;);
if(mainpairs[1]) {
	var rest = mainpairs[1];
	var truncpairs = rest.split('ENDOFTRUNCATEDFIELD');
	var arrayLength = truncpairs.length;
	for (var i = 0; i &lt; arrayLength; i++) {
		var trunckeyvalue = truncpairs[i].split('ENDOFFIELDTAG');
		if(trunckeyvalue.length > 1 &amp;&amp; !isBlank(trunckeyvalue[1])){
			output = output.concat(&quot;\n&quot;+trunckeyvalue[0]+&quot;\n&quot;);
			if(trunckeyvalue[1]) {
				var keyvaluepairs = trunckeyvalue[1].split('ENDOFPAIR');
				var arrayLength1 = keyvaluepairs.length;
				for (var j = 0; j &lt; arrayLength1; j++) {
					var keyvaluepair = keyvaluepairs[j].split('CONCATPAIR');
					if(keyvaluepair[1]){
						output = output.concat(&quot;Value in MT message : &quot;, keyvaluepair[0], &quot;+&quot;, &quot;\nValue in MX message : &quot;, keyvaluepair[0], keyvaluepair[1] , &quot;\n&quot;);
						flagempty = false;
					}
		
				}
			}
		}
	}
}	
if(flagempty) {
	output = &quot;&quot;;
}else {
	output = output.replace(/.$/,&quot;;&quot;);
}
return output;
}</mappermodel:Script>
      <mappermodel:Function name="isBlank" return="String">
        <mappermodel:Argument datatype="String" name="str"/>
      </mappermodel:Function>
    </mappermodel:Extension>
    <mappermodel:Extension language="java" name="MX2MT">
      <mappermodel:Script>com.fiorano.funclet.MXtoMT</mappermodel:Script>
      <mappermodel:Function name="public static java.lang.String com.fiorano.funclet.MXtoMT.MX_To_MT_BICFI_LTIAddress(java.lang.String)">
        <mappermodel:Argument datatype="java.lang.String" name="arg1"/>
      </mappermodel:Function>
      <mappermodel:Function name="public static java.lang.String com.fiorano.funclet.MXtoMT.MX_To_MT_BICFI_LogicalAddress(java.lang.String)">
        <mappermodel:Argument datatype="java.lang.String" name="arg1"/>
      </mappermodel:Function>
      <mappermodel:Function name="public static java.lang.String com.fiorano.funclet.MXtoMT.mx2MTAccountWithPrefix(java.lang.String,java.lang.String,java.lang.String)">
        <mappermodel:Argument datatype="java.lang.String" name="arg1"/>
        <mappermodel:Argument datatype="java.lang.String" name="arg2"/>
        <mappermodel:Argument datatype="java.lang.String" name="arg3"/>
      </mappermodel:Function>
    </mappermodel:Extension>
  </mappermodel:Extensions>
  <mappermodel:GlobalFunclets globalFuncletsPrefix="QueryGenerator"/>
  <mappermodel:UserXSL index="0" node="OUT_PORT:0,FinMessage:0,Block4:0,Document:0,MT103:0,F53a:0,[Choice]:0,F53B:0,PartyIdentifier:0">&lt;xsl:if test=&quot;string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:GrpHdr/ns3:SttlmInf/ns3:SttlmAcct)&quot;></mappermodel:UserXSL>
  <mappermodel:UserXSL index="3" node="OUT_PORT:0,FinMessage:0,Block4:0,Document:0,MT103:0,F53a:0,[Choice]:0,F53B:0,PartyIdentifier:0">&lt;/xsl:if></mappermodel:UserXSL>
  <mappermodel:UserXSL index="0" node="OUT_PORT:0,FinMessage:0,Block4:0,Document:0,MT103:0,F53a:0,[Choice]:0,F53D:0">&lt;xsl:if test=&quot;(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:GrpHdr/ns3:SttlmInf/ns3:InstgRmbrsmntAgt) and not(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:GrpHdr/ns3:SttlmInf/ns3:InstgRmbrsmntAgt/ns3:FinInstnId/ns3:BICFI)))&quot;></mappermodel:UserXSL>
  <mappermodel:UserXSL index="3" node="OUT_PORT:0,FinMessage:0,Block4:0,Document:0,MT103:0,F53a:0,[Choice]:0,F53D:0">&lt;/xsl:if></mappermodel:UserXSL>
  <mappermodel:UserXSL index="0" node="OUT_PORT:0,FinMessage:0,Block4:0,Document:0,MT103:0,F53a:0,[Choice]:0,F53A:0">&lt;xsl:if test=&quot;string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:GrpHdr/ns3:SttlmInf/ns3:InstgRmbrsmntAgt/ns3:FinInstnId/ns3:BICFI)&quot;></mappermodel:UserXSL>
  <mappermodel:UserXSL index="3" node="OUT_PORT:0,FinMessage:0,Block4:0,Document:0,MT103:0,F53a:0,[Choice]:0,F53A:0">&lt;/xsl:if></mappermodel:UserXSL>
  <mappermodel:UserXSL index="0" node="OUT_PORT:0,FinMessage:0,Block4:0,Document:0,MT103:0,F53a:0,[Choice]:0,F53B:0">&lt;xsl:if test=&quot;(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:GrpHdr/ns3:SttlmInf/ns3:SttlmMtd) and (($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:GrpHdr/ns3:SttlmInf/ns3:SttlmMtd)=('INDA') or ($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:GrpHdr/ns3:SttlmInf/ns3:SttlmMtd)=('INGA')))&quot;></mappermodel:UserXSL>
  <mappermodel:UserXSL index="3" node="OUT_PORT:0,FinMessage:0,Block4:0,Document:0,MT103:0,F53a:0,[Choice]:0,F53B:0">&lt;/xsl:if></mappermodel:UserXSL>
  <mappermodel:UserXSL index="0" node="OUT_PORT:0,FinMessage:0,Block4:0,Document:0,MT103:0,F54a:0,[Choice]:0,F54A:0">&lt;xsl:if test=&quot;string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:GrpHdr/ns3:SttlmInf/ns3:InstdRmbrsmntAgt/ns3:FinInstnId/ns3:BICFI)&quot;></mappermodel:UserXSL>
  <mappermodel:UserXSL index="3" node="OUT_PORT:0,FinMessage:0,Block4:0,Document:0,MT103:0,F54a:0,[Choice]:0,F54A:0">&lt;/xsl:if></mappermodel:UserXSL>
  <mappermodel:UserXSL index="0" node="OUT_PORT:0,FinMessage:0,Block4:0,Document:0,MT103:0,F54a:0,[Choice]:0,F54D:0">&lt;xsl:if test=&quot;(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:GrpHdr/ns3:SttlmInf/ns3:InstdRmbrsmntAgt) and not(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:GrpHdr/ns3:SttlmInf/ns3:InstdRmbrsmntAgt/ns3:FinInstnId/ns3:BICFI)))&quot;></mappermodel:UserXSL>
  <mappermodel:UserXSL index="3" node="OUT_PORT:0,FinMessage:0,Block4:0,Document:0,MT103:0,F54a:0,[Choice]:0,F54D:0">&lt;/xsl:if></mappermodel:UserXSL>
  <mappermodel:UserXSL index="0" node="OUT_PORT:0,FinMessage:0,Block4:0,Document:0,MT103:0,F54a:0,[Choice]:0,F54B:0">&lt;xsl:if test=&quot;(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:GrpHdr/ns3:SttlmInf/ns3:InstdRmbrsmntAgt) and not(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:GrpHdr/ns3:SttlmInf/ns3:InstdRmbrsmntAgt/ns3:FinInstnId/ns3:BICFI)))&quot;>&#xD;
&lt;xsl:if test=&quot;(MX2MT:com.fiorano.funclet.MXtoMT.isInputNullorBlank(string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:GrpHdr/ns3:SttlmInf/ns3:InstdRmbrsmntAgt/ns3:FinInstnId/ns3:ClrSysMmbId)) and boolean(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:GrpHdr/ns3:SttlmInf/ns3:InstdRmbrsmntAgt/ns3:FinInstnId/ns3:Nm)) and (string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:GrpHdr/ns3:SttlmInf/ns3:InstdRmbrsmntAgt/ns3:FinInstnId/ns3:Nm))&amp;lt;('34') and (($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:GrpHdr/ns3:SttlmInf/ns3:InstdRmbrsmntAgt/ns3:FinInstnId/ns3:Nm) = ($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:GrpHdr/ns3:SttlmInf/ns3:InstdRmbrsmntAgt/ns3:FinInstnId/ns3:PstlAdr/ns3:AdrLine[1]))and not(starts-with($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:GrpHdr/ns3:SttlmInf/ns3:InstdRmbrsmntAgt/ns3:FinInstnId/ns3:Nm,'NOTPROVIDED')))&quot;></mappermodel:UserXSL>
  <mappermodel:UserXSL index="3" node="OUT_PORT:0,FinMessage:0,Block4:0,Document:0,MT103:0,F54a:0,[Choice]:0,F54B:0">&lt;/xsl:if>&#xD;
&lt;/xsl:if></mappermodel:UserXSL>
  <mappermodel:UserXSL index="0" node="OUT_PORT:0,FinMessage:0,Block4:0,Document:0,MT103:0,F54a:0,[Choice]:0,F54B:0,Location:0">&lt;xsl:if test=&quot;string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:GrpHdr/ns3:SttlmInf/ns3:InstdRmbrsmntAgt/ns3:FinInstnId/ns3:PstlAdr/ns3:AdrLine[2]) and not (string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:GrpHdr/ns3:SttlmInf/ns3:InstdRmbrsmntAgt/ns3:FinInstnId/ns3:PstlAdr/ns3:AdrLine[3]))&quot;></mappermodel:UserXSL>
  <mappermodel:UserXSL index="3" node="OUT_PORT:0,FinMessage:0,Block4:0,Document:0,MT103:0,F54a:0,[Choice]:0,F54B:0,Location:0">&lt;/xsl:if></mappermodel:UserXSL>
  <mappermodel:UserXSL index="2" node="OUT_PORT:0,FinMessage:0,Block4:0,Document:0,MT103:0,F54a:0,[Choice]:0,F54B:0,Location:0">&lt;xsl:value-of select=&quot;$document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:GrpHdr/ns3:SttlmInf/ns3:InstdRmbrsmntAgt/ns3:FinInstnId/ns3:PstlAdr/ns3:AdrLine[2]&quot;>&lt;/xsl:value-of></mappermodel:UserXSL>
  <mappermodel:UserXSL index="0" node="OUT_PORT:0,FinMessage:0,Block4:0,Document:0,MT103:0,F55a:0,[Choice]:0,F55A:0">&lt;xsl:if test=&quot;string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:GrpHdr/ns3:SttlmInf/ns3:ThrdRmbrsmntAgt/ns3:FinInstnId/ns3:BICFI)&quot;></mappermodel:UserXSL>
  <mappermodel:UserXSL index="3" node="OUT_PORT:0,FinMessage:0,Block4:0,Document:0,MT103:0,F55a:0,[Choice]:0,F55A:0">&lt;/xsl:if></mappermodel:UserXSL>
  <mappermodel:UserXSL index="3" node="OUT_PORT:0,FinMessage:0,Block4:0,Document:0,MT103:0,F55a:0,[Choice]:0,F55B:0">&lt;/xsl:if>&#xD;
&lt;/xsl:if></mappermodel:UserXSL>
  <mappermodel:UserXSL index="0" node="OUT_PORT:0,FinMessage:0,Block4:0,Document:0,MT103:0,F55a:0,[Choice]:0,F55D:0">&lt;xsl:if test=&quot;(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:GrpHdr/ns3:SttlmInf/ns3:ThrdRmbrsmntAgt) and not(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:GrpHdr/ns3:SttlmInf/ns3:ThrdRmbrsmntAgt/ns3:FinInstnId/ns3:BICFI)))&quot;></mappermodel:UserXSL>
  <mappermodel:UserXSL index="3" node="OUT_PORT:0,FinMessage:0,Block4:0,Document:0,MT103:0,F55a:0,[Choice]:0,F55D:0">&lt;/xsl:if></mappermodel:UserXSL>
  <mappermodel:UserXSL index="0" node="OUT_PORT:0">&lt;xsl:variable name=&quot;LineSeparator&quot;>&#xD;
	&lt;xsl:value-of select=&quot;'ENDOFLINE'&quot;/>&#xD;
&lt;/xsl:variable>&#xD;
&lt;xsl:variable name=&quot;VariableSeparator&quot;>&#xD;
	&lt;xsl:value-of select=&quot;'ENDOFVAR'&quot;/>&#xD;
&lt;/xsl:variable></mappermodel:UserXSL>
  <mappermodel:UserXSL index="0" node="OUT_PORT:0,FinMessage:0,Block4:0,Document:0,MT103:0,[ZERO MANY]:2,F23a_2:0">&lt;xsl:if test=&quot;($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:PmtTpInf/ns3:CtgyPurp/ns3:Prtry)=('INTC CORT')&quot;>&#xD;
  &lt;ns2:F23a_2>&#xD;
    &lt;ns2:F23E>&#xD;
      &lt;ns2:InstructionCode>&#xD;
	    &lt;xsl:value-of select=&quot;'INTC'&quot;>&lt;/xsl:value-of>&#xD;
	  &lt;/ns2:InstructionCode>&#xD;
    &lt;/ns2:F23E>&#xD;
  &lt;/ns2:F23a_2>&#xD;
  &lt;ns2:F23a_2>&#xD;
    &lt;ns2:F23E>&#xD;
      &lt;ns2:InstructionCode>&#xD;
	    &lt;xsl:value-of select=&quot;'CORT'&quot;>&lt;/xsl:value-of>&#xD;
	  &lt;/ns2:InstructionCode>&#xD;
    &lt;/ns2:F23E>&#xD;
  &lt;/ns2:F23a_2>&#xD;
&lt;/xsl:if>&#xD;
&#xD;
   &lt;xsl:for-each select=&quot;$document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:InstrForCdtrAgt&quot;>&#xD;
  &lt;xsl:if test=&quot;string-length(./ns3:Cd)&quot;>&#xD;
&lt;ns2:F23a_2>&#xD;
    &lt;ns2:F23E>&#xD;
      &lt;ns2:InstructionCode>&#xD;
	    &lt;xsl:value-of select=&quot;./ns3:Cd&quot;>&lt;/xsl:value-of>&#xD;
	  &lt;/ns2:InstructionCode>&#xD;
	      &lt;ns2:AdditionalInformation>&#xD;
	    &lt;xsl:value-of select=&quot;./ns3:InstrInf&quot;>&lt;/xsl:value-of>&#xD;
	    &lt;/ns2:AdditionalInformation>&#xD;
    &lt;/ns2:F23E>&#xD;
  &lt;/ns2:F23a_2>&#xD;
   &lt;/xsl:if>&#xD;
&lt;/xsl:for-each></mappermodel:UserXSL>
  <mappermodel:UserXSL index="0" node="OUT_PORT:0,FinMessage:0,Block4:0,Document:0,MT103:0,F33a:0">&lt;xsl:if test=&quot;(MX2MT:com.fiorano.funclet.MXtoMT.isInputNullorBlank(string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:InstdAmt)) and MX2MT:com.fiorano.funclet.MXtoMT.isEUCountry(string(substring($document_IN_PORT/ns1:Envelope/ns4:AppHdr/ns4:Fr/ns4:FIId/ns4:FinInstnId/ns4:BICFI,'5','2'))) and MX2MT:com.fiorano.funclet.MXtoMT.isEUCountry(string(substring($document_IN_PORT/ns1:Envelope/ns4:AppHdr/ns4:To/ns4:FIId/ns4:FinInstnId/ns4:BICFI,'5','2'))))&quot;>&#xD;
  &lt;ns2:F33a>&#xD;
  &lt;ns2:F33B>&#xD;
    &lt;ns2:Currency>&#xD;
      &lt;xsl:value-of select=&quot;$document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:IntrBkSttlmAmt/@Ccy&quot;>&lt;/xsl:value-of>&#xD;
    &lt;/ns2:Currency>&#xD;
    &lt;ns2:Amount>&#xD;
      &lt;xsl:value-of select=&quot;MX2MT:com.fiorano.funclet.MXtoMT.mx2MTCurrencyAmount(string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:IntrBkSttlmAmt))&quot;>&lt;/xsl:value-of>&#xD;
    &lt;/ns2:Amount>&#xD;
  &lt;/ns2:F33B>&#xD;
  &lt;/ns2:F33a>&#xD;
&lt;/xsl:if></mappermodel:UserXSL>
  <mappermodel:UserXSL index="1" node="OUT_PORT:0,FinMessage:0,Block4:0,Document:0,MT103:0,[ZERO MANY]:0,F13a:0">&lt;!-- User code starts here --></mappermodel:UserXSL>
  <mappermodel:UserXSL index="0" node="OUT_PORT:0,FinMessage:0,Block4:0,Document:0,MT103:0,[ZERO MANY]:0,F13a:0">&lt;xsl:variable name=&quot;MT13C&quot;>&#xD;
	&lt;xsl:for-each select=&quot;$document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:SttlmTmIndctn&quot;>&#xD;
	  &lt;xsl:if test=&quot;string-length(./ns3:DbtDtTm)&quot;>&#xD;
        &lt;xsl:value-of select=&quot;'SNDTIME'&quot;>&lt;/xsl:value-of>&#xD;
		&lt;xsl:value-of select=&quot;./ns3:DbtDtTm&quot;>&lt;/xsl:value-of>&#xD;
	    &lt;xsl:value-of select=&quot;$LineSeparator&quot;/>&#xD;
      &lt;/xsl:if>&#xD;
	  &lt;xsl:if test=&quot;string-length(./ns3:CdtDtTm)&quot;>&#xD;
        &lt;xsl:value-of select=&quot;'RNCTIME'&quot;>&lt;/xsl:value-of>&#xD;
		&lt;xsl:value-of select=&quot;./ns3:CdtDtTm&quot;>&lt;/xsl:value-of>&#xD;
	    &lt;xsl:value-of select=&quot;$LineSeparator&quot;/>&#xD;
      &lt;/xsl:if>&#xD;
	&lt;/xsl:for-each>&#xD;
	&lt;xsl:for-each select=&quot;$document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:SttlmTmReq&quot;>&#xD;
	  &lt;xsl:if test=&quot;string-length(./ns3:CLSTm)&quot;>&#xD;
        &lt;xsl:value-of select=&quot;'CLSTIME'&quot;>&lt;/xsl:value-of>&#xD;
		&lt;xsl:value-of select=&quot;./ns3:CLSTm&quot;>&lt;/xsl:value-of>&#xD;
	    &lt;xsl:value-of select=&quot;$LineSeparator&quot;/>&#xD;
      &lt;/xsl:if>&#xD;
	  &lt;xsl:if test=&quot;string-length(./ns3:TillTm)&quot;>&#xD;
        &lt;xsl:value-of select=&quot;'TILTIME'&quot;>&lt;/xsl:value-of>&#xD;
		&lt;xsl:value-of select=&quot;./ns3:TillTm&quot;>&lt;/xsl:value-of>&#xD;
	    &lt;xsl:value-of select=&quot;$LineSeparator&quot;/>&#xD;
      &lt;/xsl:if>&#xD;
	  &lt;xsl:if test=&quot;string-length(./ns3:FrTm)&quot;>&#xD;
        &lt;xsl:value-of select=&quot;'FROTIME'&quot;>&lt;/xsl:value-of>&#xD;
		&lt;xsl:value-of select=&quot;./ns3:FrTm&quot;>&lt;/xsl:value-of>&#xD;
	    &lt;xsl:value-of select=&quot;$LineSeparator&quot;/>&#xD;
      &lt;/xsl:if>&#xD;
	  &lt;xsl:if test=&quot;string-length(./ns3:RjctTm)&quot;>&#xD;
        &lt;xsl:value-of select=&quot;'REJTIME'&quot;>&lt;/xsl:value-of>&#xD;
		&lt;xsl:value-of select=&quot;./ns3:RjctTm&quot;>&lt;/xsl:value-of>&#xD;
      &lt;/xsl:if>&#xD;
	&lt;/xsl:for-each>&#xD;
&lt;/xsl:variable>&#xD;
&#xD;
&#xD;
&lt;xsl:call-template name=&quot;tokenizeF13C&quot;>&#xD;
	&lt;xsl:with-param name=&quot;text&quot; select=&quot;$MT13C&quot;/>&#xD;
	&lt;xsl:with-param name=&quot;separator&quot; select=&quot;$LineSeparator&quot;/>&#xD;
&lt;/xsl:call-template></mappermodel:UserXSL>
  <mappermodel:UserXSL index="3" node="OUT_PORT:0,FinMessage:0,Block4:0,Document:0,MT103:0,F71a_1:0">&lt;xsl:if test=&quot;(($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:ChrgBr)=('CRED') or ($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:ChrgBr)=('DEBT'))&quot;></mappermodel:UserXSL>
  <mappermodel:UserXSL index="0" node="OUT_PORT:0,FinMessage:0,Block4:0,Document:0,MT103:0,F71a_3:0">&lt;/xsl:if>&#xD;
&lt;xsl:if test=&quot;(($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:ChrgBr)=('DEBT') and string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:ChrgsInf/ns3:Amt))&quot;></mappermodel:UserXSL>
  <mappermodel:UserXSL index="3" node="OUT_PORT:0,FinMessage:0,Block4:0,Document:0,MT103:0,F71a_3:0">&lt;/xsl:if></mappermodel:UserXSL>
  <mappermodel:UserXSL index="0" node="OUT_PORT:0,FinMessage:0,Block4:0,Document:0,MT103:0,F71a_3:0,[Choice]:0,F71G:0,Amount:0">&lt;xsl:variable name=&quot;MT71G&quot;>&#xD;
    &lt;xsl:for-each select=&quot;$document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:ChrgsInf&quot;>&#xD;
        &lt;xsl:value-of select=&quot;./ns3:Amt&quot;>&lt;/xsl:value-of>&#xD;
	    &lt;xsl:value-of select=&quot;$VariableSeparator&quot;/>&#xD;
		&lt;xsl:value-of select=&quot;./ns3:Amt/@Ccy&quot;>&lt;/xsl:value-of>&#xD;
	    &lt;xsl:value-of select=&quot;$LineSeparator&quot;/>&#xD;
	&lt;/xsl:for-each>&#xD;
  &lt;/xsl:variable></mappermodel:UserXSL>
  <mappermodel:UserXSL index="3" node="OUT_PORT:0,FinMessage:0,Block4:0,Document:0,MT103:0,F71a_3:0,[Choice]:0,F71G:0,Amount:0">&lt;xsl:value-of select=&quot;MX2MT:com.fiorano.funclet.MXtoMT.MX_To_MT_TR018pacs008(string($MT71G))&quot;>&lt;/xsl:value-of></mappermodel:UserXSL>
  <mappermodel:UserXSL index="1" node="OUT_PORT:0,FinMessage:0,Block4:0,Document:0,MT103:0,F71a_3:0,[Choice]:0,F71G:0,Amount:0">&lt;!-- User code starts here --></mappermodel:UserXSL>
  <mappermodel:UserXSL index="0" node="OUT_PORT:0,FinMessage:0,Block4:0,Document:0,MT103:0,F56a:0,[Choice]:0,F56A:0">&lt;xsl:if test=&quot;string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:IntrmyAgt1/ns3:FinInstnId/ns3:BICFI)&quot;></mappermodel:UserXSL>
  <mappermodel:UserXSL index="3" node="OUT_PORT:0,FinMessage:0,Block4:0,Document:0,MT103:0,F56a:0,[Choice]:0,F56A:0">&lt;/xsl:if></mappermodel:UserXSL>
  <mappermodel:UserXSL index="0" node="OUT_PORT:0,FinMessage:0,Block4:0,Document:0,MT103:0,F56a:0,[Choice]:0,F56D:0">&lt;xsl:if test=&quot;(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:IntrmyAgt1) and not(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:IntrmyAgt1/ns3:FinInstnId/ns3:BICFI)))&quot;></mappermodel:UserXSL>
  <mappermodel:UserXSL index="3" node="OUT_PORT:0,FinMessage:0,Block4:0,Document:0,MT103:0,F56a:0,[Choice]:0,F56D:0">&lt;/xsl:if></mappermodel:UserXSL>
  <mappermodel:UserXSL index="0" node="OUT_PORT:0,FinMessage:0,Block4:0,Document:0,MT103:0,F56a:0,[Choice]:0,F56C:0">&lt;xsl:if test=&quot;(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:IntrmyAgt1) and not(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:IntrmyAgt1/ns3:FinInstnId/ns3:BICFI)))&quot;>&#xD;
&lt;xsl:if test=&quot;not(starts-with($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:PmtTpInf/ns3:ClrChanl,'RTGS'))&quot;>&#xD;
&lt;xsl:if test=&quot;(MX2MT:com.fiorano.funclet.MXtoMT.isInputNullorBlank(string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:IntrmyAgt1/ns3:FinInstnId/ns3:ClrSysMmbId)) and boolean(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:IntrmyAgt1/ns3:FinInstnId/ns3:Nm)) and ($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:IntrmyAgt1/ns3:FinInstnId/ns3:Nm)=($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:IntrmyAgt1/ns3:FinInstnId/ns3:PstlAdr/ns3:AdrLine) and (string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:IntrmyAgt1/ns3:FinInstnId/ns3:Nm))&amp;lt;('34') and not(starts-with($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:IntrmyAgt1/ns3:FinInstnId/ns3:Nm,'NOTPROVIDED')))&quot;></mappermodel:UserXSL>
  <mappermodel:UserXSL index="3" node="OUT_PORT:0,FinMessage:0,Block4:0,Document:0,MT103:0,F56a:0,[Choice]:0,F56C:0">&lt;/xsl:if>&#xD;
&lt;/xsl:if>&#xD;
&lt;/xsl:if></mappermodel:UserXSL>
  <mappermodel:UserXSL index="0" node="OUT_PORT:0,FinMessage:0,Block4:0,Document:0,MT103:0,F52a:0,[Choice]:0,F52A:0">&lt;xsl:if test=&quot;string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:DbtrAgt/ns3:FinInstnId/ns3:BICFI)&quot;></mappermodel:UserXSL>
  <mappermodel:UserXSL index="3" node="OUT_PORT:0,FinMessage:0,Block4:0,Document:0,MT103:0,F52a:0,[Choice]:0,F52A:0">&lt;/xsl:if></mappermodel:UserXSL>
  <mappermodel:UserXSL index="0" node="OUT_PORT:0,FinMessage:0,Block4:0,Document:0,MT103:0,F52a:0,[Choice]:0,F52D:0">&lt;xsl:if test=&quot;not(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:DbtrAgt/ns3:FinInstnId/ns3:BICFI))&quot;></mappermodel:UserXSL>
  <mappermodel:UserXSL index="3" node="OUT_PORT:0,FinMessage:0,Block4:0,Document:0,MT103:0,F52a:0,[Choice]:0,F52D:0">&lt;/xsl:if></mappermodel:UserXSL>
  <mappermodel:UserXSL index="0" node="OUT_PORT:0,FinMessage:0,Block4:0,Document:0,MT103:0,F57a:0,[Choice]:0,F57A:0">&lt;xsl:if test=&quot;string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:CdtrAgt/ns3:FinInstnId/ns3:BICFI)&quot;></mappermodel:UserXSL>
  <mappermodel:UserXSL index="3" node="OUT_PORT:0,FinMessage:0,Block4:0,Document:0,MT103:0,F57a:0,[Choice]:0,F57A:0">&lt;/xsl:if></mappermodel:UserXSL>
  <mappermodel:UserXSL index="0" node="OUT_PORT:0,FinMessage:0,Block4:0,Document:0,MT103:0,F57a:0,[Choice]:0,F57B:0">&lt;xsl:if test=&quot;not(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:CdtrAgt/ns3:FinInstnId/ns3:BICFI))&quot;>&#xD;
&lt;xsl:if test=&quot;(MX2MT:com.fiorano.funclet.MXtoMT.isInputNullorBlank(string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:CdtrAgt/ns3:FinInstnId/ns3:ClrSysMmbId)) and boolean(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:CdtrAgt/ns3:FinInstnId/ns3:Nm)) and ($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:CdtrAgt/ns3:FinInstnId/ns3:Nm)=($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:CdtrAgt/ns3:FinInstnId/ns3:PstlAdr/ns3:AdrLine) and (string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:CdtrAgt/ns3:FinInstnId/ns3:Nm))&amp;lt;('34') and not(starts-with($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:CdtrAgt/ns3:FinInstnId/ns3:Nm,'NOTPROVIDED')))&quot;>&#xD;
&lt;xsl:choose>&#xD;
  &lt;xsl:when test=&quot;not(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:CdtrAgt/ns3:FinInstnId/ns3:PstlAdr/ns3:AdrLine[2]))&quot;>&#xD;
    &lt;ns2:F57C>&#xD;
      &lt;xsl:value-of select=&quot;concat('//',$document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:CdtrAgt/ns3:FinInstnId/ns3:Nm)&quot;>&lt;/xsl:value-of>&#xD;
	&lt;/ns2:F57C>&#xD;
  &lt;/xsl:when>&#xD;
  &lt;xsl:when test=&quot;not(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:CdtrAgt/ns3:FinInstnId/ns3:PstlAdr/ns3:AdrLine[3]))&quot;></mappermodel:UserXSL>
  <mappermodel:UserXSL index="3" node="OUT_PORT:0,FinMessage:0,Block4:0,Document:0,MT103:0,F57a:0,[Choice]:0,F57B:0">&lt;/xsl:when>&#xD;
&lt;/xsl:choose>&#xD;
&lt;/xsl:if></mappermodel:UserXSL>
  <mappermodel:UserXSL index="1" node="OUT_PORT:0,FinMessage:0,Block4:0,Document:0,MT103:0,F57a:0,[Choice]:0,F57B:0,Location:0">&lt;xsl:value-of select=&quot;$document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:CdtrAgt/ns3:FinInstnId/ns3:PstlAdr/ns3:AdrLine[2]&quot;>&lt;/xsl:value-of></mappermodel:UserXSL>
  <mappermodel:UserXSL index="3" node="OUT_PORT:0,FinMessage:0,Block4:0,Document:0,MT103:0,F57a:0,[Choice]:0,F57D:0">&lt;/xsl:if></mappermodel:UserXSL>
  <mappermodel:UserXSL index="0" node="OUT_PORT:0,FinMessage:0,Block4:0,Document:0,MT103:0,F77a:0,[Choice]:0,F77B:0,Narrative:0,[ONE MANY]:0,Line:0">&lt;xsl:variable name=&quot;MXRegulatoryReporting&quot;>
	&lt;xsl:for-each select=&quot;$document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:RgltryRptg&quot;>
		&lt;xsl:for-each select=&quot;./ns3:Dtls&quot;>
			&lt;xsl:for-each select=&quot;./ns3:Inf&quot;>
				&lt;xsl:value-of select=&quot;.&quot;/>
				&lt;xsl:value-of select=&quot;'ENDOFINFO'&quot;/>
			&lt;/xsl:for-each>
			&lt;xsl:value-of select=&quot;'ENDOFDETAIL'&quot;/>
		&lt;/xsl:for-each>
		&lt;xsl:value-of select=&quot;$LineSeparator&quot;/>
	&lt;/xsl:for-each>
&lt;/xsl:variable>
		
&lt;xsl:variable name=&quot;F77B&quot;>	
	&lt;xsl:value-of select=&quot;MX2MT:com.fiorano.funclet.MXtoMT.MX_To_MTRegulatoryReportingwithTruncate(string($MXRegulatoryReporting),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Dbtr/ns3:CtryOfRes),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Cdtr/ns3:CtryOfRes))&quot;>&lt;/xsl:value-of>
&lt;/xsl:variable>

&lt;xsl:call-template name=&quot;tokenizeLine&quot;>
	&lt;xsl:with-param name=&quot;text&quot; select=&quot;substring-before($F77B,'ENDOFOUTPUT')&quot;/>
	&lt;xsl:with-param name=&quot;separator&quot; select=&quot;$LineSeparator&quot;/>
&lt;/xsl:call-template>
&lt;xsl:variable name=&quot;TruncTemp&quot;>
  &lt;xsl:value-of select=&quot;java:_getStringProperty($_TIF_MESSAGE_, 'Truncated_Fields')&quot;/>
&lt;/xsl:variable></mappermodel:UserXSL>
  <mappermodel:UserXSL index="1" node="OUT_PORT:0,FinMessage:0,Block4:0,Document:0,MT103:0,F77a:0,[Choice]:0,F77B:0,Narrative:0,[ONE MANY]:0,Line:0">&lt;xsl:value-of select=&quot;java:_setStringProperty($_TIF_MESSAGE_, 'Truncated_Fields', concat($TruncTemp,'F77B_Narrative_LineENDOFFIELDTAG',substring-after($F77B,'ENDOFOUTPUT'),'ENDOFTRUNCATEDFIELD'))&quot;/></mappermodel:UserXSL>
  <mappermodel:UserXSL index="3" node="OUT_PORT:0,FinMessage:0,Block4:0,Document:0,MT103:0,[ZERO MANY]:2,F23a_2:0">&lt;xsl:variable name=&quot;F23EFull&quot;>&#xD;
	&lt;xsl:value-of select=&quot;MX2MT:com.fiorano.funclet.MXtoMT.MX_To_MT23E(string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:InstrForCdtrAgt[1]/ns3:Cd),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:InstrForCdtrAgt[1]/ns3:InstrInf),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:InstrForCdtrAgt[2]/ns3:Cd),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:InstrForCdtrAgt[2]/ns3:InstrInf))&quot;>&lt;/xsl:value-of>&#xD;
&lt;/xsl:variable>&#xD;
&#xD;
&lt;xsl:call-template name=&quot;tokenizeF23E&quot;>&#xD;
	&lt;xsl:with-param name=&quot;text&quot; select=&quot;$F23EFull&quot;/>&#xD;
&lt;/xsl:call-template></mappermodel:UserXSL>
  <mappermodel:UserXSL index="0" node="OUT_PORT:0,FinMessage:0,Block4:0,Document:0,MT103:0,F72a:0,[Choice]:0,F72:0,NarrativeStructuredFormat:0">&lt;xsl:variable name=&quot;ServiceLevelPropArr&quot;>&#xD;
	&lt;xsl:for-each select=&quot;$document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:PmtTpInf/ns3:SvcLvl&quot;>&#xD;
		&lt;xsl:value-of select=&quot;./ns3:Prtry&quot;/>&#xD;
		&lt;xsl:value-of select=&quot;$LineSeparator&quot;/>&#xD;
	&lt;/xsl:for-each>&#xD;
&lt;/xsl:variable>&#xD;
&#xD;
&lt;xsl:variable name=&quot;ServiceLevelCodeArr&quot;>&#xD;
	&lt;xsl:for-each select=&quot;$document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:PmtTpInf/ns3:SvcLvl&quot;>&#xD;
		&lt;xsl:value-of select=&quot;./ns3:Cd&quot;/>&#xD;
		&lt;xsl:value-of select=&quot;$LineSeparator&quot;/>&#xD;
	&lt;/xsl:for-each>&#xD;
&lt;/xsl:variable>&#xD;
&#xD;
&lt;xsl:variable name=&quot;InstrForCdtrAgtCodeArr&quot;>&#xD;
	&lt;xsl:for-each select=&quot;$document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:InstrForCdtrAgt&quot;>&#xD;
		&lt;xsl:value-of select=&quot;./ns3:Cd&quot;/>&#xD;
		&lt;xsl:value-of select=&quot;$LineSeparator&quot;/>&#xD;
	&lt;/xsl:for-each>&#xD;
&lt;/xsl:variable>&#xD;
&#xD;
&lt;xsl:variable name=&quot;InstrForCdtrAgtInstructionArr&quot;>&#xD;
	&lt;xsl:for-each select=&quot;$document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:InstrForCdtrAgt&quot;>&#xD;
		&lt;xsl:value-of select=&quot;./ns3:InstrInf&quot;/>&#xD;
		&lt;xsl:value-of select=&quot;$LineSeparator&quot;/>&#xD;
	&lt;/xsl:for-each>&#xD;
&lt;/xsl:variable>&#xD;
&#xD;
&lt;xsl:variable name=&quot;InstrForNxtAgtInstructionArr&quot;>&#xD;
	&lt;xsl:for-each select=&quot;$document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:InstrForNxtAgt&quot;>&#xD;
		&lt;xsl:value-of select=&quot;./ns3:InstrInf&quot;/>&#xD;
		&lt;xsl:value-of select=&quot;$LineSeparator&quot;/>&#xD;
	&lt;/xsl:for-each>&#xD;
&lt;/xsl:variable></mappermodel:UserXSL>
  <mappermodel:UserXSL index="0" node="OUT_PORT:0,FinMessage:0,Block4:0,Document:0,MT103:0,F72a:0,[Choice]:0,F72:0,NarrativeStructuredFormat:0,[ZERO MANY]:0,Lines2to6:0">&lt;xsl:variable name=&quot;Result&quot;>
&lt;xsl:value-of select=&quot;MX2MT:com.fiorano.funclet.MXtoMT.MX_To_MT72FullField1Lines2to6withTruncate(string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:IntrmyAgt2/ns3:FinInstnId/ns3:BICFI),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:IntrmyAgt2/ns3:FinInstnId/ns3:Nm),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:IntrmyAgt2/ns3:FinInstnId/ns3:ClrSysMmbId/ns3:ClrSysId/ns3:Cd),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:IntrmyAgt2/ns3:FinInstnId/ns3:ClrSysMmbId/ns3:MmbId),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:IntrmyAgt2/ns3:FinInstnId/ns3:PstlAdr/ns3:TwnNm),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:IntrmyAgt2/ns3:FinInstnId/ns3:PstlAdr/ns3:Ctry),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:IntrmyAgt3/ns3:FinInstnId/ns3:BICFI),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:IntrmyAgt3/ns3:FinInstnId/ns3:Nm),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:IntrmyAgt3/ns3:FinInstnId/ns3:ClrSysMmbId/ns3:ClrSysId/ns3:Cd),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:IntrmyAgt3/ns3:FinInstnId/ns3:ClrSysMmbId/ns3:MmbId),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:IntrmyAgt3/ns3:FinInstnId/ns3:PstlAdr/ns3:TwnNm),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:IntrmyAgt3/ns3:FinInstnId/ns3:PstlAdr/ns3:Ctry),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:PrvsInstgAgt1/ns3:FinInstnId/ns3:BICFI),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:PrvsInstgAgt2/ns3:FinInstnId/ns3:BICFI),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:PrvsInstgAgt3/ns3:FinInstnId/ns3:BICFI),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:PrvsInstgAgt1/ns3:FinInstnId/ns3:Nm),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:PrvsInstgAgt2/ns3:FinInstnId/ns3:Nm),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:PrvsInstgAgt3/ns3:FinInstnId/ns3:Nm),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:PrvsInstgAgt1/ns3:FinInstnId/ns3:ClrSysMmbId/ns3:ClrSysId/ns3:Cd),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:PrvsInstgAgt2/ns3:FinInstnId/ns3:ClrSysMmbId/ns3:ClrSysId/ns3:Cd),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:PrvsInstgAgt3/ns3:FinInstnId/ns3:ClrSysMmbId/ns3:ClrSysId/ns3:Cd),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:PrvsInstgAgt1/ns3:FinInstnId/ns3:ClrSysMmbId/ns3:MmbId),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:PrvsInstgAgt2/ns3:FinInstnId/ns3:ClrSysMmbId/ns3:MmbId),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:PrvsInstgAgt3/ns3:FinInstnId/ns3:ClrSysMmbId/ns3:MmbId),string($ServiceLevelPropArr),string($ServiceLevelCodeArr),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:PmtTpInf/ns3:LclInstrm/ns3:Prtry),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:PmtTpInf/ns3:LclInstrm/ns3:Cd),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:PmtTpInf/ns3:CtgyPurp/ns3:Prtry),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:PmtTpInf/ns3:CtgyPurp/ns3:Cd),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:CdtrAgt/ns3:BrnchId/ns3:Id),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:CdtrAgt/ns3:FinInstnId/ns3:BICFI),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:CdtrAgt/ns3:FinInstnId/ns3:PstlAdr/ns3:Ctry),string($InstrForCdtrAgtCodeArr),string($InstrForCdtrAgtInstructionArr),string($InstrForNxtAgtInstructionArr),string($LineSeparator),string($VariableSeparator))&quot;>&lt;/xsl:value-of>
&lt;/xsl:variable>
&lt;xsl:call-template name=&quot;tokenize6&quot;>
    &lt;xsl:with-param name=&quot;text&quot; select=&quot;substring-before($Result,'ENDOFOUTPUT')&quot;/>
&lt;/xsl:call-template>
 &lt;xsl:variable name=&quot;TruncTemp&quot;>
  &lt;xsl:value-of select=&quot;java:_getStringProperty($_TIF_MESSAGE_, 'Truncated_Fields')&quot;/>
&lt;/xsl:variable></mappermodel:UserXSL>
  <mappermodel:UserXSL index="1" node="OUT_PORT:0,FinMessage:0,Block4:0,Document:0,MT103:0,F72a:0,[Choice]:0,F72:0,NarrativeStructuredFormat:0,[ZERO MANY]:0,Lines2to6:0">&lt;xsl:value-of select=&quot;java:_setStringProperty($_TIF_MESSAGE_, 'Truncated_Fields', concat($TruncTemp,'F72_Lines2to6ENDOFFIELDTAG',substring-after($Result,'ENDOFOUTPUT'),'ENDOFTRUNCATEDFIELD'))&quot;/></mappermodel:UserXSL>
  <mappermodel:UserXSL index="1" node="OUT_PORT:0,FinMessage:0,Block1:0">&lt;ns5:ApplicationIdentifier>&#xD;
          &lt;xsl:value-of select=&quot;'F'&quot;>&lt;/xsl:value-of>&#xD;
        &lt;/ns5:ApplicationIdentifier>&#xD;
        &lt;ns5:ServiceIdentifier>&#xD;
          &lt;xsl:value-of select=&quot;'01'&quot;>&lt;/xsl:value-of>&#xD;
        &lt;/ns5:ServiceIdentifier>&#xD;
        &lt;ns5:LogicalTerminalAddress>&#xD;
          &lt;xsl:variable name=&quot;if0&quot;>&#xD;
            &lt;xsl:choose>&#xD;
              &lt;xsl:when test=&quot;((java:_getStringProperty($_TIF_MESSAGE_, 'ApplicationMode'))!=('I') or not(string-length(java:_getStringProperty($_TIF_MESSAGE_, 'ApplicationMode'))))&quot;>&#xD;
                &lt;xsl:value-of select=&quot;$document_IN_PORT/ns1:Envelope/ns4:AppHdr/ns4:To/ns4:FIId/ns4:FinInstnId/ns4:BICFI&quot;>&lt;/xsl:value-of>&#xD;
              &lt;/xsl:when>&#xD;
              &lt;xsl:otherwise>&#xD;
                &lt;xsl:value-of select=&quot;$document_IN_PORT/ns1:Envelope/ns4:AppHdr/ns4:Fr/ns4:FIId/ns4:FinInstnId/ns4:BICFI&quot;>&lt;/xsl:value-of>&#xD;
              &lt;/xsl:otherwise>&#xD;
            &lt;/xsl:choose>&#xD;
          &lt;/xsl:variable>&#xD;
          &lt;xsl:value-of select=&quot;MXToMT:com.fiorano.funclet.MXtoMT.MX_To_MT_BICFI_LogicalAddress(string($if0))&quot;>&lt;/xsl:value-of>&#xD;
        &lt;/ns5:LogicalTerminalAddress>&#xD;
 &lt;ns5:SessionNumber>&#xD;
	&lt;xsl:value-of select=&quot;substring(java:_getStringProperty($_TIF_MESSAGE_, 'SequenceNumber'),'1','4')&quot;/>&#xD;
&lt;/ns5:SessionNumber>&#xD;
&lt;ns5:SequenceNumber>&#xD;
	&lt;xsl:value-of select=&quot;substring(java:_getStringProperty($_TIF_MESSAGE_, 'SequenceNumber'),'5','6')&quot;/>&#xD;
&lt;/ns5:SequenceNumber>&#xD;
&#xD;
&lt;!--</mappermodel:UserXSL>
  <mappermodel:UserXSL index="2" node="OUT_PORT:0,FinMessage:0,Block1:0">--></mappermodel:UserXSL>
  <mappermodel:UserXSL index="2" node="OUT_PORT:0,FinMessage:0,Block2:0">--></mappermodel:UserXSL>
  <mappermodel:UserXSL index="1" node="OUT_PORT:0,FinMessage:0,Block4:0,Document:0,MT103:0,F50a:0,[Choice]:0,F50F:0,PartyIdentifier:0,[Choice]:0,Code:0">&lt;xsl:variable name=&quot;LineSeparator&quot;>&#xD;
&lt;xsl:value-of select=&quot;'ENDOFFLINE'&quot;/>&#xD;
&lt;/xsl:variable>&#xD;
&#xD;
&lt;xsl:variable name=&quot;VariableSeparator&quot;>&#xD;
	&lt;xsl:value-of select=&quot;'ENDOFFVAR'&quot;/>&#xD;
&lt;/xsl:variable>&#xD;
&#xD;
&lt;xsl:variable name=&quot;AppendedPostalAddress&quot;>&#xD;
&lt;xsl:for-each select=&quot;$document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Dbtr/ns3:PstlAdr/ns3:AdrLine&quot;>&#xD;
&lt;xsl:value-of select=&quot;.&quot; />&#xD;
 &lt;xsl:value-of select=&quot;$LineSeparator&quot; /> &#xD;
&lt;/xsl:for-each>&#xD;
&lt;/xsl:variable>&#xD;
&#xD;
&lt;xsl:variable name=&quot;OrgIdentifierTable&quot;>&#xD;
	&lt;xsl:for-each select=&quot;$document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Dbtr/ns3:Id/ns3:OrgId/ns3:Othr&quot;>&#xD;
		&lt;xsl:value-of select=&quot;./ns3:Id&quot;/>&#xD;
		&lt;xsl:value-of select=&quot;$VariableSeparator&quot;/>&#xD;
		&lt;xsl:value-of select=&quot;./ns3:SchmeNm/ns3:Cd&quot;/>&#xD;
		&lt;xsl:value-of select=&quot;$VariableSeparator&quot;/>&#xD;
		&lt;xsl:value-of select=&quot;./ns3:Issr&quot;/>&#xD;
		&lt;xsl:value-of select=&quot;$VariableSeparator&quot;/>&#xD;
		&lt;xsl:value-of select=&quot;$LineSeparator&quot;/>&#xD;
	&lt;/xsl:for-each>&#xD;
&lt;/xsl:variable>&#xD;
&#xD;
&lt;xsl:variable name=&quot;PrivateOrgIdentifierTable&quot;>&#xD;
	&lt;xsl:for-each select=&quot;$document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Dbtr/ns3:Id/ns3:PrvtId/ns3:Othr&quot;>&#xD;
		&lt;xsl:value-of select=&quot;./ns3:Id&quot;/>&#xD;
		&lt;xsl:value-of select=&quot;$VariableSeparator&quot;/>&#xD;
		&lt;xsl:value-of select=&quot;./ns3:SchmeNm/ns3:Cd&quot;/>&#xD;
		&lt;xsl:value-of select=&quot;$VariableSeparator&quot;/>&#xD;
		&lt;xsl:value-of select=&quot;./ns3:Issr&quot;/>&#xD;
		&lt;xsl:value-of select=&quot;$VariableSeparator&quot;/>&#xD;
		&lt;xsl:value-of select=&quot;$LineSeparator&quot;/>&#xD;
	&lt;/xsl:for-each>&#xD;
&lt;/xsl:variable>&#xD;
&#xD;
&#xD;
&lt;xsl:choose>&#xD;
 &#xD;
												&#xD;
				 &lt;xsl:when test=&quot;(not(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Dbtr/ns3:Id/ns3:OrgId/ns3:AnyBIC)) and (not(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:DbtrAcct/ns3:Id/ns3:IBAN))) and (not(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:DbtrAcct/ns3:Id/ns3:Othr/ns3:Id))) and ((string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Dbtr/ns3:Id/ns3:OrgId/ns3:Othr/ns3:Id)) or (string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Dbtr/ns3:Id/ns3:PrvtId/ns3:Othr/ns3:Id))) and (string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Dbtr/ns3:PstlAdr/ns3:AdrLine)) and (('true')=(MXToMT:com.fiorano.funclet.MXtoMT.MX_To_MTAddressLineType(string($AppendedPostalAddress),string($LineSeparator)))))&quot;>&#xD;
                           &lt;xsl:value-of select=&quot;MXToMT:com.fiorano.funclet.MXtoMT.MX_To_MTFATFIdentification_MTSchemeCode(string($OrgIdentifierTable),string($PrivateOrgIdentifierTable),string($LineSeparator),string($VariableSeparator),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Dbtr/ns3:PstlAdr/ns3:Ctry),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Dbtr/ns3:CtryOfRes))&quot;/>&#xD;
                        &lt;/xsl:when>&#xD;
						&#xD;
						 &lt;xsl:when test=&quot;(not(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Dbtr/ns3:Id/ns3:OrgId/ns3:AnyBIC)) and (not(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:DbtrAcct/ns3:Id/ns3:IBAN))) and (not(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:DbtrAcct/ns3:Id/ns3:Othr/ns3:Id))) and ((string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Dbtr/ns3:Id/ns3:OrgId/ns3:Othr/ns3:Id)) or (string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Dbtr/ns3:Id/ns3:PrvtId/ns3:Othr/ns3:Id))) and (string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Dbtr/ns3:Nm)) and (not(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Dbtr/ns3:PstlAdr/ns3:AdrLine))))&quot;>&#xD;
						&lt;xsl:value-of select=&quot;MXToMT:com.fiorano.funclet.MXtoMT.MX_To_MTFATFIdentification_MTSchemeCode(string($OrgIdentifierTable),string($PrivateOrgIdentifierTable),string($LineSeparator),string($VariableSeparator),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Dbtr/ns3:PstlAdr/ns3:Ctry),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Dbtr/ns3:CtryOfRes))&quot;/>&#xD;
                        &lt;/xsl:when>&#xD;
						&#xD;
						 &lt;xsl:when test=&quot;(not(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Dbtr/ns3:Id/ns3:OrgId/ns3:AnyBIC)) and (not(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:DbtrAcct/ns3:Id/ns3:IBAN))) and (not(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:DbtrAcct/ns3:Id/ns3:Othr/ns3:Id))) and ((string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Dbtr/ns3:Id/ns3:OrgId/ns3:Othr/ns3:Id)) or (string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Dbtr/ns3:Id/ns3:PrvtId/ns3:Othr/ns3:Id))) and (string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Dbtr/ns3:PstlAdr/ns3:Ctry)))&quot;>&#xD;
						&lt;xsl:value-of select=&quot;MXToMT:com.fiorano.funclet.MXtoMT.MX_To_MTFATFIdentification_MTSchemeCode(string($OrgIdentifierTable),string($PrivateOrgIdentifierTable),string($LineSeparator),string($VariableSeparator),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Dbtr/ns3:PstlAdr/ns3:Ctry),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Dbtr/ns3:CtryOfRes))&quot;/>&#xD;
                        &lt;/xsl:when>&#xD;
						&#xD;
&lt;/xsl:choose></mappermodel:UserXSL>
  <mappermodel:UserXSL index="0" node="OUT_PORT:0,FinMessage:0,Block4:0,Document:0,MT103:0,F50a:0,[Choice]:0,F50F:0,NameAndAddress:0,[ONE MANY]:0,Lines2to5:0">&lt;xsl:variable name=&quot;LineSeparator&quot;>
	&lt;xsl:value-of select=&quot;'ENDOFLINE'&quot;/>
&lt;/xsl:variable>
&lt;xsl:variable name=&quot;VariableSeparator&quot;>
	&lt;xsl:value-of select=&quot;'ENDOFVAR'&quot;/>
&lt;/xsl:variable>
&lt;xsl:variable name=&quot;AppendedPostalAddress&quot;>
	&lt;xsl:for-each select=&quot;$document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Dbtr/ns3:PstlAdr/ns3:AdrLine&quot;>
		&lt;xsl:value-of select=&quot;.&quot;/>
		&lt;xsl:value-of select=&quot;$LineSeparator&quot;/>
	&lt;/xsl:for-each>
&lt;/xsl:variable>
&lt;xsl:variable name=&quot;OrgIdentifierTable&quot;>
	&lt;xsl:for-each select=&quot;$document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Dbtr/ns3:Id/ns3:OrgId/ns3:Othr&quot;>
		&lt;xsl:value-of select=&quot;./ns3:Id&quot;/>
		&lt;xsl:value-of select=&quot;$VariableSeparator&quot;/>
		&lt;xsl:value-of select=&quot;./ns3:SchmeNm/ns3:Cd&quot;/>
		&lt;xsl:value-of select=&quot;$VariableSeparator&quot;/>
		&lt;xsl:value-of select=&quot;./ns3:Issr&quot;/>
		&lt;xsl:value-of select=&quot;$VariableSeparator&quot;/>
		&lt;xsl:value-of select=&quot;$LineSeparator&quot;/>
	&lt;/xsl:for-each>
&lt;/xsl:variable>
&lt;xsl:variable name=&quot;PrivateOrgIdentifierTable&quot;>
	&lt;xsl:for-each select=&quot;$document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Dbtr/ns3:Id/ns3:PrvtId/ns3:Othr&quot;>
		&lt;xsl:value-of select=&quot;./ns3:Id&quot;/>
		&lt;xsl:value-of select=&quot;$VariableSeparator&quot;/>
		&lt;xsl:value-of select=&quot;./ns3:SchmeNm/ns3:Cd&quot;/>
		&lt;xsl:value-of select=&quot;$VariableSeparator&quot;/>
		&lt;xsl:value-of select=&quot;./ns3:Issr&quot;/>
		&lt;xsl:value-of select=&quot;$VariableSeparator&quot;/>
		&lt;xsl:value-of select=&quot;$LineSeparator&quot;/>
	&lt;/xsl:for-each>
&lt;/xsl:variable>

&lt;xsl:variable name=&quot;MTPartyIndentifier&quot;>
	&lt;xsl:choose>
 
												
				 &lt;xsl:when test=&quot;(not(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Dbtr/ns3:Id/ns3:OrgId/ns3:AnyBIC)) and (not(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:DbtrAcct/ns3:Id/ns3:IBAN))) and (not(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:DbtrAcct/ns3:Id/ns3:Othr/ns3:Id))) and ((string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Dbtr/ns3:Id/ns3:OrgId/ns3:Othr/ns3:Id)) or (string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Dbtr/ns3:Id/ns3:PrvtId/ns3:Othr/ns3:Id))) and (string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Dbtr/ns3:PstlAdr/ns3:AdrLine)) and (('true')=(MXToMT:com.fiorano.funclet.MXtoMT.MX_To_MTAddressLineType(string($AppendedPostalAddress),string($LineSeparator)))))&quot;>
                           &lt;xsl:value-of select=&quot;MXToMT:com.fiorano.funclet.MXtoMT.MX_To_MTFATFIdentification_MTSchemeCode(string($OrgIdentifierTable),string($PrivateOrgIdentifierTable),string($LineSeparator),string($VariableSeparator),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Dbtr/ns3:PstlAdr/ns3:Ctry),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Dbtr/ns3:CtryOfRes))&quot;/>
                        &lt;/xsl:when>
						
						 &lt;xsl:when test=&quot;(not(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Dbtr/ns3:Id/ns3:OrgId/ns3:AnyBIC)) and (not(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:DbtrAcct/ns3:Id/ns3:IBAN))) and (not(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:DbtrAcct/ns3:Id/ns3:Othr/ns3:Id))) and ((string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Dbtr/ns3:Id/ns3:OrgId/ns3:Othr/ns3:Id)) or (string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Dbtr/ns3:Id/ns3:PrvtId/ns3:Othr/ns3:Id))) and (string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Dbtr/ns3:Nm)) and (not(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Dbtr/ns3:PstlAdr/ns3:AdrLine))))&quot;>
						&lt;xsl:value-of select=&quot;MXToMT:com.fiorano.funclet.MXtoMT.MX_To_MTFATFIdentification_MTSchemeCode(string($OrgIdentifierTable),string($PrivateOrgIdentifierTable),string($LineSeparator),string($VariableSeparator),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Dbtr/ns3:PstlAdr/ns3:Ctry),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Dbtr/ns3:CtryOfRes))&quot;/>
                        &lt;/xsl:when>
						
								
			
&lt;/xsl:choose>
&lt;/xsl:variable>

&lt;xsl:variable name=&quot;ResultantMTAddressTable&quot;>
	&lt;xsl:choose>
	
		&lt;xsl:when test=&quot;(not(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Dbtr/ns3:Id/ns3:OrgId/ns3:AnyBIC)) and (string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Dbtr/ns3:PstlAdr/ns3:Ctry)))&quot;>
			&lt;xsl:value-of select=&quot;MXToMT:com.fiorano.funclet.MXtoMT.MX_To_MTFATFNameAndAddresswithTruncate(string($AppendedPostalAddress),string($LineSeparator),string($VariableSeparator),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Dbtr/ns3:Nm),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Dbtr/ns3:Id/ns3:OrgId/ns3:LEI),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Dbtr/ns3:Id/ns3:PrvtId/ns3:DtAndPlcOfBirth/ns3:BirthDt),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Dbtr/ns3:Id/ns3:PrvtId/ns3:DtAndPlcOfBirth/ns3:CityOfBirth),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Dbtr/ns3:Id/ns3:PrvtId/ns3:DtAndPlcOfBirth/ns3:CtryOfBirth),string($OrgIdentifierTable),string($PrivateOrgIdentifierTable),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Dbtr/ns3:CtryOfRes),string($MTPartyIndentifier),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:DbtrAcct/ns3:Id/ns3:IBAN),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:DbtrAcct/ns3:Id/ns3:Othr/ns3:Id),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Dbtr/ns3:PstlAdr/ns3:Dept),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Dbtr/ns3:PstlAdr/ns3:SubDept),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Dbtr/ns3:PstlAdr/ns3:StrtNm),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Dbtr/ns3:PstlAdr/ns3:BldgNb),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Dbtr/ns3:PstlAdr/ns3:BldgNm),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Dbtr/ns3:PstlAdr/ns3:Flr),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Dbtr/ns3:PstlAdr/ns3:PstBx),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Dbtr/ns3:PstlAdr/ns3:Room),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Dbtr/ns3:PstlAdr/ns3:PstCd),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Dbtr/ns3:PstlAdr/ns3:TwnNm),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Dbtr/ns3:PstlAdr/ns3:TwnLctnNm),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Dbtr/ns3:PstlAdr/ns3:DstrctNm),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Dbtr/ns3:PstlAdr/ns3:CtrySubDvsn),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Dbtr/ns3:PstlAdr/ns3:Ctry))&quot;/>
		&lt;/xsl:when>

		 &lt;xsl:when test=&quot;(not(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Dbtr/ns3:Id/ns3:OrgId/ns3:AnyBIC)) and (string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Dbtr/ns3:PstlAdr/ns3:AdrLine)) and (('true')=(MXToMT:com.fiorano.funclet.MXtoMT.MX_To_MTAddressLineType(string($AppendedPostalAddress),string($LineSeparator)))))&quot;>
		 &lt;xsl:value-of select=&quot;MXToMT:com.fiorano.funclet.MXtoMT.MX_To_MTFATFNameAndAddress2withTruncate(string($AppendedPostalAddress),string($LineSeparator),string($VariableSeparator),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Dbtr/ns3:Nm),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Dbtr/ns3:Id/ns3:OrgId/ns3:LEI),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Dbtr/ns3:Id/ns3:PrvtId/ns3:DtAndPlcOfBirth/ns3:BirthDt),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Dbtr/ns3:Id/ns3:PrvtId/ns3:DtAndPlcOfBirth/ns3:CityOfBirth),string($OrgIdentifierTable),string($PrivateOrgIdentifierTable),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Dbtr/ns3:PstlAdr/ns3:Ctry),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Dbtr/ns3:CtryOfRes),string($MTPartyIndentifier),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:DbtrAcct/ns3:Id/ns3:IBAN),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:DbtrAcct/ns3:Id/ns3:Othr/ns3:Id))&quot;/>
		&lt;/xsl:when>
		&lt;xsl:when test=&quot;(not(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Dbtr/ns3:Id/ns3:OrgId/ns3:AnyBIC)) and (string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Dbtr/ns3:Nm)) and (not(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Dbtr/ns3:PstlAdr/ns3:AdrLine))))&quot;>
			&lt;xsl:value-of select=&quot;MXToMT:com.fiorano.funclet.MXtoMT.MX_To_MTFATFNameAndAddresswithTruncate(string($AppendedPostalAddress),string($LineSeparator),string($VariableSeparator),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Dbtr/ns3:Nm),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Dbtr/ns3:Id/ns3:OrgId/ns3:LEI),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Dbtr/ns3:Id/ns3:PrvtId/ns3:DtAndPlcOfBirth/ns3:BirthDt),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Dbtr/ns3:Id/ns3:PrvtId/ns3:DtAndPlcOfBirth/ns3:CityOfBirth),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Dbtr/ns3:Id/ns3:PrvtId/ns3:DtAndPlcOfBirth/ns3:CtryOfBirth),string($OrgIdentifierTable),string($PrivateOrgIdentifierTable),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Dbtr/ns3:CtryOfRes),string($MTPartyIndentifier),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:DbtrAcct/ns3:Id/ns3:IBAN),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:DbtrAcct/ns3:Id/ns3:Othr/ns3:Id),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Dbtr/ns3:PstlAdr/ns3:Dept),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Dbtr/ns3:PstlAdr/ns3:SubDept),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Dbtr/ns3:PstlAdr/ns3:StrtNm),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Dbtr/ns3:PstlAdr/ns3:BldgNb),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Dbtr/ns3:PstlAdr/ns3:BldgNm),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Dbtr/ns3:PstlAdr/ns3:Flr),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Dbtr/ns3:PstlAdr/ns3:PstBx),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Dbtr/ns3:PstlAdr/ns3:Room),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Dbtr/ns3:PstlAdr/ns3:PstCd),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Dbtr/ns3:PstlAdr/ns3:TwnNm),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Dbtr/ns3:PstlAdr/ns3:TwnLctnNm),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Dbtr/ns3:PstlAdr/ns3:DstrctNm),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Dbtr/ns3:PstlAdr/ns3:CtrySubDvsn),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Dbtr/ns3:PstlAdr/ns3:Ctry))&quot;/>
		&lt;/xsl:when>
		
	
	&lt;/xsl:choose>
&lt;/xsl:variable>


&lt;xsl:variable name=&quot;ResultantMTAddressSplit&quot;>
&lt;xsl:choose>
&lt;xsl:when test=&quot;(string-length($ResultantMTAddressTable))&quot;>
	&lt;xsl:value-of select=&quot;MXToMT:com.fiorano.funclet.MXtoMT.SplitAddresstoNumberDetailswithTruncate(string($ResultantMTAddressTable),string($LineSeparator),string($VariableSeparator))&quot;/>
&lt;/xsl:when>
&lt;/xsl:choose>
&lt;/xsl:variable>
&lt;xsl:call-template name=&quot;tokenize3&quot;>
	&lt;xsl:with-param name=&quot;text&quot; select=&quot;substring-before($ResultantMTAddressSplit,'ENDOFOUTPUT')&quot;/>
&lt;/xsl:call-template>
&lt;xsl:variable name=&quot;TruncTemp&quot;>
  &lt;xsl:value-of select=&quot;java:_getStringProperty($_TIF_MESSAGE_, 'Truncated_Fields')&quot;/>
&lt;/xsl:variable></mappermodel:UserXSL>
  <mappermodel:UserXSL index="1" node="OUT_PORT:0,FinMessage:0,Block4:0,Document:0,MT103:0,F50a:0,[Choice]:0,F50F:0,PartyIdentifier:0,[Choice]:0,Identifier:0">&lt;xsl:variable name=&quot;LineSeparator&quot;>&#xD;
&lt;xsl:value-of select=&quot;'ENDOFFLINE'&quot;/>&#xD;
&lt;/xsl:variable>&#xD;
&#xD;
&lt;xsl:variable name=&quot;VariableSeparator&quot;>&#xD;
	&lt;xsl:value-of select=&quot;'ENDOFFVAR'&quot;/>&#xD;
&lt;/xsl:variable>&#xD;
&#xD;
&lt;xsl:variable name=&quot;AppendedPostalAddress&quot;>&#xD;
&lt;xsl:for-each select=&quot;$document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Dbtr/ns3:PstlAdr/ns3:AdrLine&quot;>&#xD;
&lt;xsl:value-of select=&quot;.&quot; />&#xD;
 &lt;xsl:value-of select=&quot;$LineSeparator&quot; /> &#xD;
&lt;/xsl:for-each>&#xD;
&lt;/xsl:variable>&#xD;
&#xD;
&lt;xsl:variable name=&quot;OrgIdentifierTable&quot;>&#xD;
	&lt;xsl:for-each select=&quot;$document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Dbtr/ns3:Id/ns3:OrgId/ns3:Othr&quot;>&#xD;
		&lt;xsl:value-of select=&quot;./ns3:Id&quot;/>&#xD;
		&lt;xsl:value-of select=&quot;$VariableSeparator&quot;/>&#xD;
		&lt;xsl:value-of select=&quot;./ns3:SchmeNm/ns3:Cd&quot;/>&#xD;
		&lt;xsl:value-of select=&quot;$VariableSeparator&quot;/>&#xD;
		&lt;xsl:value-of select=&quot;./ns3:Issr&quot;/>&#xD;
		&lt;xsl:value-of select=&quot;$VariableSeparator&quot;/>&#xD;
		&lt;xsl:value-of select=&quot;$LineSeparator&quot;/>&#xD;
	&lt;/xsl:for-each>&#xD;
&lt;/xsl:variable>&#xD;
&#xD;
&lt;xsl:variable name=&quot;PrivateOrgIdentifierTable&quot;>&#xD;
	&lt;xsl:for-each select=&quot;$document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Dbtr/ns3:Id/ns3:PrvtId/ns3:Othr&quot;>&#xD;
		&lt;xsl:value-of select=&quot;./ns3:Id&quot;/>&#xD;
		&lt;xsl:value-of select=&quot;$VariableSeparator&quot;/>&#xD;
		&lt;xsl:value-of select=&quot;./ns3:SchmeNm/ns3:Cd&quot;/>&#xD;
		&lt;xsl:value-of select=&quot;$VariableSeparator&quot;/>&#xD;
		&lt;xsl:value-of select=&quot;./ns3:Issr&quot;/>&#xD;
		&lt;xsl:value-of select=&quot;$VariableSeparator&quot;/>&#xD;
		&lt;xsl:value-of select=&quot;$LineSeparator&quot;/>&#xD;
	&lt;/xsl:for-each>&#xD;
&lt;/xsl:variable>&#xD;
&#xD;
&#xD;
&lt;xsl:choose>&#xD;
 &#xD;
												&#xD;
				 &lt;xsl:when test=&quot;(not(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Dbtr/ns3:Id/ns3:OrgId/ns3:AnyBIC)) and (not(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:DbtrAcct/ns3:Id/ns3:IBAN))) and (not(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:DbtrAcct/ns3:Id/ns3:Othr/ns3:Id))) and ((string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Dbtr/ns3:Id/ns3:OrgId/ns3:Othr/ns3:Id)) or (string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Dbtr/ns3:Id/ns3:PrvtId/ns3:Othr/ns3:Id))) and (string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Dbtr/ns3:PstlAdr/ns3:AdrLine)) and (('true')=(MXToMT:com.fiorano.funclet.MXtoMT.MX_To_MTAddressLineType(string($AppendedPostalAddress),string($LineSeparator)))))&quot;>&#xD;
                           &lt;xsl:value-of select=&quot;MXToMT:com.fiorano.funclet.MXtoMT.MX_To_MTFATFIdentification_MTPartyIdentifier(string($OrgIdentifierTable),string($PrivateOrgIdentifierTable),string($LineSeparator),string($VariableSeparator),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Dbtr/ns3:PstlAdr/ns3:Ctry),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Dbtr/ns3:CtryOfRes))&quot;/>&#xD;
                        &lt;/xsl:when>&#xD;
						&#xD;
						 &lt;xsl:when test=&quot;(not(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Dbtr/ns3:Id/ns3:OrgId/ns3:AnyBIC)) and (not(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:DbtrAcct/ns3:Id/ns3:IBAN))) and (not(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:DbtrAcct/ns3:Id/ns3:Othr/ns3:Id))) and ((string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Dbtr/ns3:Id/ns3:OrgId/ns3:Othr/ns3:Id)) or (string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Dbtr/ns3:Id/ns3:PrvtId/ns3:Othr/ns3:Id))) and (string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Dbtr/ns3:Nm)) and (not(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Dbtr/ns3:PstlAdr/ns3:AdrLine))))&quot;>&#xD;
						&lt;xsl:value-of select=&quot;MXToMT:com.fiorano.funclet.MXtoMT.MX_To_MTFATFIdentification_MTPartyIdentifier(string($OrgIdentifierTable),string($PrivateOrgIdentifierTable),string($LineSeparator),string($VariableSeparator),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Dbtr/ns3:PstlAdr/ns3:Ctry),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Dbtr/ns3:CtryOfRes))&quot;/>&#xD;
                        &lt;/xsl:when>&#xD;
						&#xD;
						 &lt;xsl:when test=&quot;(not(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Dbtr/ns3:Id/ns3:OrgId/ns3:AnyBIC)) and (not(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:DbtrAcct/ns3:Id/ns3:IBAN))) and (not(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:DbtrAcct/ns3:Id/ns3:Othr/ns3:Id))) and ((string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Dbtr/ns3:Id/ns3:OrgId/ns3:Othr/ns3:Id)) or (string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Dbtr/ns3:Id/ns3:PrvtId/ns3:Othr/ns3:Id))) and (string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Dbtr/ns3:PstlAdr/ns3:Ctry)))&quot;>&#xD;
						&lt;xsl:value-of select=&quot;MXToMT:com.fiorano.funclet.MXtoMT.MX_To_MTFATFIdentification_MTPartyIdentifier(string($OrgIdentifierTable),string($PrivateOrgIdentifierTable),string($LineSeparator),string($VariableSeparator),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Dbtr/ns3:PstlAdr/ns3:Ctry),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Dbtr/ns3:CtryOfRes))&quot;/>&#xD;
                        &lt;/xsl:when>&#xD;
						&#xD;
&lt;/xsl:choose></mappermodel:UserXSL>
  <mappermodel:UserXSL index="1" node="OUT_PORT:0,FinMessage:0,Block4:0,Document:0,MT103:0,F50a:0,[Choice]:0,F50F:0,PartyIdentifier:0,[Choice]:0,CountryCode:0">&lt;xsl:variable name=&quot;LineSeparator&quot;>&#xD;
&lt;xsl:value-of select=&quot;'ENDOFFLINE'&quot;/>&#xD;
&lt;/xsl:variable>&#xD;
&#xD;
&lt;xsl:variable name=&quot;VariableSeparator&quot;>&#xD;
	&lt;xsl:value-of select=&quot;'ENDOFFVAR'&quot;/>&#xD;
&lt;/xsl:variable>&#xD;
&#xD;
&lt;xsl:variable name=&quot;AppendedPostalAddress&quot;>&#xD;
&lt;xsl:for-each select=&quot;$document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Dbtr/ns3:PstlAdr/ns3:AdrLine&quot;>&#xD;
&lt;xsl:value-of select=&quot;.&quot; />&#xD;
 &lt;xsl:value-of select=&quot;$LineSeparator&quot; /> &#xD;
&lt;/xsl:for-each>&#xD;
&lt;/xsl:variable>&#xD;
&#xD;
&lt;xsl:variable name=&quot;OrgIdentifierTable&quot;>&#xD;
	&lt;xsl:for-each select=&quot;$document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Dbtr/ns3:Id/ns3:OrgId/ns3:Othr&quot;>&#xD;
		&lt;xsl:value-of select=&quot;./ns3:Id&quot;/>&#xD;
		&lt;xsl:value-of select=&quot;$VariableSeparator&quot;/>&#xD;
		&lt;xsl:value-of select=&quot;./ns3:SchmeNm/ns3:Cd&quot;/>&#xD;
		&lt;xsl:value-of select=&quot;$VariableSeparator&quot;/>&#xD;
		&lt;xsl:value-of select=&quot;./ns3:Issr&quot;/>&#xD;
		&lt;xsl:value-of select=&quot;$VariableSeparator&quot;/>&#xD;
		&lt;xsl:value-of select=&quot;$LineSeparator&quot;/>&#xD;
	&lt;/xsl:for-each>&#xD;
&lt;/xsl:variable>&#xD;
&#xD;
&lt;xsl:variable name=&quot;PrivateOrgIdentifierTable&quot;>&#xD;
	&lt;xsl:for-each select=&quot;$document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Dbtr/ns3:Id/ns3:PrvtId/ns3:Othr&quot;>&#xD;
		&lt;xsl:value-of select=&quot;./ns3:Id&quot;/>&#xD;
		&lt;xsl:value-of select=&quot;$VariableSeparator&quot;/>&#xD;
		&lt;xsl:value-of select=&quot;./ns3:SchmeNm/ns3:Cd&quot;/>&#xD;
		&lt;xsl:value-of select=&quot;$VariableSeparator&quot;/>&#xD;
		&lt;xsl:value-of select=&quot;./ns3:Issr&quot;/>&#xD;
		&lt;xsl:value-of select=&quot;$VariableSeparator&quot;/>&#xD;
		&lt;xsl:value-of select=&quot;$LineSeparator&quot;/>&#xD;
	&lt;/xsl:for-each>&#xD;
&lt;/xsl:variable>&#xD;
&#xD;
&#xD;
&lt;xsl:choose>&#xD;
 &#xD;
												&#xD;
				 &lt;xsl:when test=&quot;(not(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Dbtr/ns3:Id/ns3:OrgId/ns3:AnyBIC)) and (not(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:DbtrAcct/ns3:Id/ns3:IBAN))) and (not(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:DbtrAcct/ns3:Id/ns3:Othr/ns3:Id))) and ((string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Dbtr/ns3:Id/ns3:OrgId/ns3:Othr/ns3:Id)) or (string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Dbtr/ns3:Id/ns3:PrvtId/ns3:Othr/ns3:Id))) and (string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Dbtr/ns3:PstlAdr/ns3:AdrLine)) and (('true')=(MXToMT:com.fiorano.funclet.MXtoMT.MX_To_MTAddressLineType(string($AppendedPostalAddress),string($LineSeparator)))))&quot;>&#xD;
                           &lt;xsl:value-of select=&quot;MXToMT:com.fiorano.funclet.MXtoMT.MX_To_MTFATFIdentification_MTCountryCode(string($OrgIdentifierTable),string($PrivateOrgIdentifierTable),string($LineSeparator),string($VariableSeparator),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Dbtr/ns3:PstlAdr/ns3:Ctry),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Dbtr/ns3:CtryOfRes))&quot;/>&#xD;
                        &lt;/xsl:when>&#xD;
						&#xD;
						 &lt;xsl:when test=&quot;(not(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Dbtr/ns3:Id/ns3:OrgId/ns3:AnyBIC)) and (not(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:DbtrAcct/ns3:Id/ns3:IBAN))) and (not(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:DbtrAcct/ns3:Id/ns3:Othr/ns3:Id))) and ((string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Dbtr/ns3:Id/ns3:OrgId/ns3:Othr/ns3:Id)) or (string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Dbtr/ns3:Id/ns3:PrvtId/ns3:Othr/ns3:Id))) and (string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Dbtr/ns3:Nm)) and (not(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Dbtr/ns3:PstlAdr/ns3:AdrLine))))&quot;>&#xD;
						&lt;xsl:value-of select=&quot;MXToMT:com.fiorano.funclet.MXtoMT.MX_To_MTFATFIdentification_MTCountryCode(string($OrgIdentifierTable),string($PrivateOrgIdentifierTable),string($LineSeparator),string($VariableSeparator),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Dbtr/ns3:PstlAdr/ns3:Ctry),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Dbtr/ns3:CtryOfRes))&quot;/>&#xD;
                        &lt;/xsl:when>&#xD;
						&#xD;
						 &lt;xsl:when test=&quot;(not(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Dbtr/ns3:Id/ns3:OrgId/ns3:AnyBIC)) and (not(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:DbtrAcct/ns3:Id/ns3:IBAN))) and (not(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:DbtrAcct/ns3:Id/ns3:Othr/ns3:Id))) and ((string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Dbtr/ns3:Id/ns3:OrgId/ns3:Othr/ns3:Id)) or (string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Dbtr/ns3:Id/ns3:PrvtId/ns3:Othr/ns3:Id))) and (string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Dbtr/ns3:PstlAdr/ns3:Ctry)))&quot;>&#xD;
						&lt;xsl:value-of select=&quot;MXToMT:com.fiorano.funclet.MXtoMT.MX_To_MTFATFIdentification_MTCountryCode(string($OrgIdentifierTable),string($PrivateOrgIdentifierTable),string($LineSeparator),string($VariableSeparator),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Dbtr/ns3:PstlAdr/ns3:Ctry),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Dbtr/ns3:CtryOfRes))&quot;/>&#xD;
                        &lt;/xsl:when>&#xD;
						&#xD;
&lt;/xsl:choose></mappermodel:UserXSL>
  <mappermodel:UserXSL index="1" node="OUT_PORT:0,FinMessage:0,Block4:0,Document:0,MT103:0,F50a:0,[Choice]:0,F50K:0,NameAndAddress:0,[ONE MANY]:0,Line:0">&lt;xsl:value-of select=&quot;java:_setStringProperty($_TIF_MESSAGE_, 'Truncated_Fields', concat($TruncTemp,'F50K_NameAndAddress_LineENDOFFIELDTAG',substring-after($ResultantMTAddressTable,'ENDOFOUTPUT'),'ENDOFTRUNCATEDFIELD'))&quot;/></mappermodel:UserXSL>
  <mappermodel:UserXSL index="1" node="OUT_PORT:0,FinMessage:0,Block4:0,Document:0,MT103:0,F50a:0,[Choice]:0,F50A:0,Account:0">&lt;xsl:variable name=&quot;if21&quot;>
                    &lt;xsl:choose>
                      &lt;xsl:when test=&quot;(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Dbtr/ns3:Id/ns3:OrgId/ns3:AnyBIC) and string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Dbtr))&quot;>
                        &lt;xsl:variable name=&quot;if22&quot;>
                          &lt;xsl:choose>
                            &lt;xsl:when test=&quot;string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:DbtrAcct/ns3:Id/ns3:Othr/ns3:Id)&quot;>
                              &lt;xsl:value-of select=&quot;MXToMT:com.fiorano.funclet.MXtoMT.mx2MTAccountwithTruncate(string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:DbtrAcct/ns3:Id/ns3:IBAN),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:DbtrAcct/ns3:Id/ns3:Othr/ns3:Id),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:DbtrAcct/ns3:Id/ns3:Othr/ns3:SchmeNm/ns3:Cd))&quot;>&lt;/xsl:value-of>
                            &lt;/xsl:when>
                          &lt;/xsl:choose>
                        &lt;/xsl:variable>
                       &lt;xsl:value-of select=&quot;normalize-space(substring-before($if22,'ENDOFOUTPUT'))&quot;/>
&lt;xsl:variable name=&quot;TruncTemp&quot;>
  &lt;xsl:value-of select=&quot;java:_getStringProperty($_TIF_MESSAGE_, 'Truncated_Fields')&quot;/>
&lt;/xsl:variable>

&lt;xsl:value-of select=&quot;java:_setStringProperty($_TIF_MESSAGE_, 'Truncated_Fields', concat($TruncTemp,'F50A_Account_ENDOFFIELDTAG',substring-after($if22,'ENDOFOUTPUT'),'ENDOFTRUNCATEDFIELD'))&quot;/> 
                      &lt;/xsl:when>
                    &lt;/xsl:choose>
                  &lt;/xsl:variable>
                  &lt;xsl:value-of select=&quot;$if21&quot;>&lt;/xsl:value-of></mappermodel:UserXSL>
  <mappermodel:UserXSL index="1" node="OUT_PORT:0,FinMessage:0,Block4:0,Document:0,MT103:0,F53a:0,[Choice]:0,F53D:0,NameAndAddress:0,[ONE MANY]:0,Line:0">&lt;xsl:value-of select=&quot;java:_setStringProperty($_TIF_MESSAGE_, 'Truncated_Fields', concat($TruncTemp,'F53D_NameandAddress_Line_ENDOFFIELDTAG',substring-after($if4,'ENDOFOUTPUT'),'ENDOFTRUNCATEDFIELD'))&quot;/></mappermodel:UserXSL>
  <mappermodel:UserXSL index="1" node="OUT_PORT:0,FinMessage:0,Block4:0,Document:0,MT103:0,F55a:0,[Choice]:0,F55D:0,NameAndAddress:0,[ONE MANY]:0,Line:0">&lt;xsl:value-of select=&quot;java:_setStringProperty($_TIF_MESSAGE_, 'Truncated_Fields', concat($TruncTemp,'F55D_NameandAddress_Line_ENDOFFIELDTAG',substring-after($if4,'ENDOFOUTPUT'),'ENDOFTRUNCATEDFIELD'))&quot;/></mappermodel:UserXSL>
  <mappermodel:UserXSL index="1" node="OUT_PORT:0,FinMessage:0,Block4:0,Document:0,MT103:0,F55a:0,[Choice]:0,F55B:0,Location:0">&lt;xsl:choose>&#xD;
    &lt;xsl:when test=&quot;string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:GrpHdr/ns3:SttlmInf/ns3:ThrdRmbrsmntAgt/ns3:FinInstnId/ns3:PstlAdr/ns3:AdrLine[2]) and not (string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:GrpHdr/ns3:SttlmInf/ns3:ThrdRmbrsmntAgt/ns3:FinInstnId/ns3:PstlAdr/ns3:AdrLine[3])) and&#xD;
	string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:GrpHdr/ns3:SttlmInf/ns3:ThrdRmbrsmntAgt/ns3:FinInstnId/ns3:Nm) and&#xD;
(($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:GrpHdr/ns3:SttlmInf/ns3:ThrdRmbrsmntAgt/ns3:FinInstnId/ns3:Nm) = ($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:GrpHdr/ns3:SttlmInf/ns3:ThrdRmbrsmntAgt/ns3:FinInstnId/ns3:PstlAdr/ns3:AdrLine[1]))&quot;>&#xD;
    &#xD;
&#xD;
&lt;xsl:value-of select=&quot;$document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:GrpHdr/ns3:SttlmInf/ns3:ThrdRmbrsmntAgt/ns3:FinInstnId/ns3:PstlAdr/ns3:AdrLine[2]&quot;>&lt;/xsl:value-of>&#xD;
    &lt;/xsl:when>&#xD;
	&lt;/xsl:choose></mappermodel:UserXSL>
  <mappermodel:UserXSL index="0" node="OUT_PORT:0,FinMessage:0,Block4:0,Document:0,MT103:0,F55a:0,[Choice]:0,F55B:0">&lt;xsl:if test=&quot;(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:GrpHdr/ns3:SttlmInf/ns3:ThrdRmbrsmntAgt) and not(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:GrpHdr/ns3:SttlmInf/ns3:ThrdRmbrsmntAgt/ns3:FinInstnId/ns3:BICFI)))&quot;>&#xD;
&lt;xsl:if test=&quot;(MX2MT:com.fiorano.funclet.MXtoMT.isInputNullorBlank(string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:GrpHdr/ns3:SttlmInf/ns3:ThrdRmbrsmntAgt/ns3:FinInstnId/ns3:ClrSysMmbId)) and boolean(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:GrpHdr/ns3:SttlmInf/ns3:ThrdRmbrsmntAgt/ns3:FinInstnId/ns3:Nm)) and (string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:GrpHdr/ns3:SttlmInf/ns3:ThrdRmbrsmntAgt/ns3:FinInstnId/ns3:Nm))&amp;lt;('34') and not(starts-with($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:GrpHdr/ns3:SttlmInf/ns3:ThrdRmbrsmntAgt/ns3:FinInstnId/ns3:Nm,'NOTPROVIDED')) and &#xD;
(($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:GrpHdr/ns3:SttlmInf/ns3:ThrdRmbrsmntAgt/ns3:FinInstnId/ns3:Nm) = ($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:GrpHdr/ns3:SttlmInf/ns3:ThrdRmbrsmntAgt/ns3:FinInstnId/ns3:PstlAdr/ns3:AdrLine[1])))&quot;></mappermodel:UserXSL>
  <mappermodel:UserXSL index="1" node="OUT_PORT:0,FinMessage:0,Block2:0">&lt;!-- User code ends here -->&#xD;
&#xD;
        &lt;ns5:InputIdentifier>&#xD;
          &lt;xsl:variable name=&quot;if1&quot;>&#xD;
            &lt;xsl:choose>&#xD;
              &lt;xsl:when test=&quot;(java:_getStringProperty($_TIF_MESSAGE_, 'ApplicationMode'))=('I')&quot;>&#xD;
                &lt;xsl:value-of select=&quot;'I'&quot;>&lt;/xsl:value-of>&#xD;
              &lt;/xsl:when>&#xD;
            &lt;/xsl:choose>&#xD;
          &lt;/xsl:variable>&#xD;
          &lt;xsl:value-of select=&quot;$if1&quot;>&lt;/xsl:value-of>&#xD;
        &lt;/ns5:InputIdentifier>&#xD;
        &lt;ns5:MessageType>&#xD;
          &lt;xsl:variable name=&quot;if2&quot;>&#xD;
            &lt;xsl:choose>&#xD;
              &lt;xsl:when test=&quot;(java:_getStringProperty($_TIF_MESSAGE_, 'ApplicationMode'))=('I')&quot;>&#xD;
                &lt;xsl:value-of select=&quot;'103'&quot;>&lt;/xsl:value-of>&#xD;
              &lt;/xsl:when>&#xD;
            &lt;/xsl:choose>&#xD;
          &lt;/xsl:variable>&#xD;
          &lt;xsl:value-of select=&quot;$if2&quot;>&lt;/xsl:value-of>&#xD;
        &lt;/ns5:MessageType>&#xD;
        &lt;ns5:DestinationAddress>&#xD;
          &lt;xsl:variable name=&quot;if3&quot;>&#xD;
            &lt;xsl:choose>&#xD;
              &lt;xsl:when test=&quot;(java:_getStringProperty($_TIF_MESSAGE_, 'ApplicationMode'))=('I')&quot;>&#xD;
                &lt;xsl:value-of select=&quot;MX2MT:com.fiorano.funclet.MXtoMT.MX_To_MT_BICFI_LogicalAddress(string($document_IN_PORT/ns1:Envelope/ns4:AppHdr/ns4:To/ns4:FIId/ns4:FinInstnId/ns4:BICFI))&quot;>&lt;/xsl:value-of>&#xD;
              &lt;/xsl:when>&#xD;
            &lt;/xsl:choose>&#xD;
          &lt;/xsl:variable>&#xD;
          &lt;xsl:value-of select=&quot;$if3&quot;>&lt;/xsl:value-of>&#xD;
        &lt;/ns5:DestinationAddress>&#xD;
        &lt;ns5:MessagePriority>&#xD;
          &lt;xsl:variable name=&quot;if4&quot;>&#xD;
            &lt;xsl:choose>&#xD;
              &lt;xsl:when test=&quot;(java:_getStringProperty($_TIF_MESSAGE_, 'ApplicationMode'))=('I')&quot;>&#xD;
                &lt;xsl:variable name=&quot;if5&quot;>&#xD;
                  &lt;xsl:choose>&#xD;
                    &lt;xsl:when test=&quot;($document_IN_PORT/ns1:Envelope/ns4:AppHdr/ns4:Prty)=('HIGH')&quot;>&#xD;
                      &lt;xsl:value-of select=&quot;'U'&quot;>&lt;/xsl:value-of>&#xD;
                    &lt;/xsl:when>&#xD;
                    &lt;xsl:otherwise>&#xD;
                      &lt;xsl:value-of select=&quot;'N'&quot;>&lt;/xsl:value-of>&#xD;
                    &lt;/xsl:otherwise>&#xD;
                  &lt;/xsl:choose>&#xD;
                &lt;/xsl:variable>&#xD;
                &lt;xsl:value-of select=&quot;$if5&quot;>&lt;/xsl:value-of>&#xD;
              &lt;/xsl:when>&#xD;
            &lt;/xsl:choose>&#xD;
          &lt;/xsl:variable>&#xD;
          &lt;xsl:value-of select=&quot;$if4&quot;>&lt;/xsl:value-of>&#xD;
        &lt;/ns5:MessagePriority>&#xD;
        &lt;ns5:OutputIdentifier>&#xD;
          &lt;xsl:variable name=&quot;if6&quot;>&#xD;
            &lt;xsl:choose>&#xD;
              &lt;xsl:when test=&quot;((java:_getStringProperty($_TIF_MESSAGE_, 'ApplicationMode'))!=('I') or not(string-length(java:_getStringProperty($_TIF_MESSAGE_, 'ApplicationMode'))))&quot;>&#xD;
                &lt;xsl:value-of select=&quot;'O'&quot;>&lt;/xsl:value-of>&#xD;
              &lt;/xsl:when>&#xD;
            &lt;/xsl:choose>&#xD;
          &lt;/xsl:variable>&#xD;
          &lt;xsl:value-of select=&quot;$if6&quot;>&lt;/xsl:value-of>&#xD;
        &lt;/ns5:OutputIdentifier>&#xD;
        &lt;ns5:MessageType>&#xD;
          &lt;xsl:variable name=&quot;if7&quot;>&#xD;
            &lt;xsl:choose>&#xD;
              &lt;xsl:when test=&quot;((java:_getStringProperty($_TIF_MESSAGE_, 'ApplicationMode'))!=('I') or not(string-length(java:_getStringProperty($_TIF_MESSAGE_, 'ApplicationMode'))))&quot;>&#xD;
                &lt;xsl:value-of select=&quot;'103'&quot;>&lt;/xsl:value-of>&#xD;
              &lt;/xsl:when>&#xD;
            &lt;/xsl:choose>&#xD;
          &lt;/xsl:variable>&#xD;
          &lt;xsl:value-of select=&quot;$if7&quot;>&lt;/xsl:value-of>&#xD;
        &lt;/ns5:MessageType>&#xD;
        &lt;ns5:InputTime>&#xD;
          &lt;xsl:variable name=&quot;if8&quot;>&#xD;
             &lt;xsl:choose>&#xD;
                &lt;xsl:when test=&quot;((java:_getStringProperty($_TIF_MESSAGE_, 'ApplicationMode'))!=('I') or not(string-length(java:_getStringProperty($_TIF_MESSAGE_, 'ApplicationMode')))) and string-length(java:_getStringProperty($_TIF_MESSAGE_, 'OutputTime'))&quot;>&#xD;
                  &lt;xsl:value-of select=&quot;java:_getStringProperty($_TIF_MESSAGE_, 'OutputTime')&quot;>&lt;/xsl:value-of>&#xD;
                &lt;/xsl:when>&#xD;
				&#xD;
				 &lt;xsl:when test=&quot;((java:_getStringProperty($_TIF_MESSAGE_, 'ApplicationMode'))!=('I') or not(string-length(java:_getStringProperty($_TIF_MESSAGE_, 'ApplicationMode')))) and (not(string-length(java:_getStringProperty($_TIF_MESSAGE_, 'OutputTime'))))&quot;>&#xD;
                   &lt;xsl:value-of select=&quot;'0000'&quot;>&lt;/xsl:value-of>&#xD;
                &lt;/xsl:when>&#xD;
              &lt;/xsl:choose>&#xD;
          &lt;/xsl:variable>&#xD;
          &lt;xsl:value-of select=&quot;$if8&quot;>&lt;/xsl:value-of>&#xD;
        &lt;/ns5:InputTime>&#xD;
        &lt;ns5:MessageInputReference>&#xD;
          &lt;ns5:Date>&#xD;
            &lt;xsl:variable name=&quot;if9&quot;>&#xD;
                &lt;xsl:choose>&#xD;
                &lt;xsl:when test=&quot;((java:_getStringProperty($_TIF_MESSAGE_, 'ApplicationMode'))!=('I') or not(string-length(java:_getStringProperty($_TIF_MESSAGE_, 'ApplicationMode')))) and string-length(java:_getStringProperty($_TIF_MESSAGE_, 'OutputDate'))&quot;>&#xD;
                  &lt;xsl:value-of select=&quot;java:_getStringProperty($_TIF_MESSAGE_, 'OutputDate')&quot;>&lt;/xsl:value-of>&#xD;
                &lt;/xsl:when>&#xD;
				&#xD;
				 &lt;xsl:when test=&quot;((java:_getStringProperty($_TIF_MESSAGE_, 'ApplicationMode'))!=('I') or not(string-length(java:_getStringProperty($_TIF_MESSAGE_, 'ApplicationMode')))) and (not(string-length(java:_getStringProperty($_TIF_MESSAGE_, 'OutputDate'))))&quot;>&#xD;
                   &lt;xsl:value-of select=&quot;'991231'&quot;>&lt;/xsl:value-of>&#xD;
                &lt;/xsl:when>&#xD;
              &lt;/xsl:choose>&#xD;
            &lt;/xsl:variable>&#xD;
            &lt;xsl:value-of select=&quot;$if9&quot;>&lt;/xsl:value-of>&#xD;
          &lt;/ns5:Date>&#xD;
          &lt;ns5:LTIdentifier>&#xD;
            &lt;xsl:variable name=&quot;if10&quot;>&#xD;
              &lt;xsl:choose>&#xD;
                &lt;xsl:when test=&quot;((java:_getStringProperty($_TIF_MESSAGE_, 'ApplicationMode'))!=('I') or not(string-length(java:_getStringProperty($_TIF_MESSAGE_, 'ApplicationMode'))))&quot;>&#xD;
                  &lt;xsl:value-of select=&quot;MXToMT:com.fiorano.funclet.MXtoMT.MX_To_MT_BICFI_LTIAddress(string($document_IN_PORT/ns1:Envelope/ns4:AppHdr/ns4:Fr/ns4:FIId/ns4:FinInstnId/ns4:BICFI))&quot;>&lt;/xsl:value-of>&#xD;
                &lt;/xsl:when>&#xD;
              &lt;/xsl:choose>&#xD;
            &lt;/xsl:variable>&#xD;
            &lt;xsl:value-of select=&quot;$if10&quot;>&lt;/xsl:value-of>&#xD;
          &lt;/ns5:LTIdentifier>&#xD;
          &lt;ns5:BranchCode>&#xD;
            &lt;xsl:variable name=&quot;if11&quot;>&#xD;
              &lt;xsl:choose>&#xD;
                &lt;xsl:when test=&quot;((java:_getStringProperty($_TIF_MESSAGE_, 'ApplicationMode'))!=('I') or not(string-length(java:_getStringProperty($_TIF_MESSAGE_, 'ApplicationMode'))))&quot;>&#xD;
                  &lt;xsl:variable name=&quot;if12&quot;>&#xD;
                    &lt;xsl:choose>&#xD;
                      &lt;xsl:when test=&quot;(string-length($document_IN_PORT/ns1:Envelope/ns4:AppHdr/ns4:Fr/ns4:FIId/ns4:FinInstnId/ns4:BICFI))&amp;gt;=('11')&quot;>&#xD;
                        &lt;xsl:value-of select=&quot;substring($document_IN_PORT/ns1:Envelope/ns4:AppHdr/ns4:Fr/ns4:FIId/ns4:FinInstnId/ns4:BICFI,(string-length($document_IN_PORT/ns1:Envelope/ns4:AppHdr/ns4:Fr/ns4:FIId/ns4:FinInstnId/ns4:BICFI))-('2'),string-length($document_IN_PORT/ns1:Envelope/ns4:AppHdr/ns4:Fr/ns4:FIId/ns4:FinInstnId/ns4:BICFI))&quot;>&lt;/xsl:value-of>&#xD;
                      &lt;/xsl:when>&#xD;
                      &lt;xsl:otherwise>&#xD;
                        &lt;xsl:value-of select=&quot;'XXX'&quot;>&lt;/xsl:value-of>&#xD;
                      &lt;/xsl:otherwise>&#xD;
                    &lt;/xsl:choose>&#xD;
                  &lt;/xsl:variable>&#xD;
                  &lt;xsl:value-of select=&quot;$if12&quot;>&lt;/xsl:value-of>&#xD;
                &lt;/xsl:when>&#xD;
              &lt;/xsl:choose>&#xD;
            &lt;/xsl:variable>&#xD;
            &lt;xsl:value-of select=&quot;$if11&quot;>&lt;/xsl:value-of>&#xD;
          &lt;/ns5:BranchCode>&#xD;
          &lt;ns5:SessionNumber>&#xD;
            &lt;xsl:variable name=&quot;if13&quot;>&#xD;
              &lt;xsl:choose>&#xD;
                &lt;xsl:when test=&quot;((java:_getStringProperty($_TIF_MESSAGE_, 'ApplicationMode'))!=('I') or not(string-length(java:_getStringProperty($_TIF_MESSAGE_, 'ApplicationMode'))))&quot;>&#xD;
                  &lt;xsl:value-of select=&quot;substring(java:_getStringProperty($_TIF_MESSAGE_, 'SequenceNumber'),'1','4')&quot;/>&#xD;
                &lt;/xsl:when>&#xD;
              &lt;/xsl:choose>&#xD;
            &lt;/xsl:variable>&#xD;
            &lt;xsl:value-of select=&quot;$if13&quot;>&lt;/xsl:value-of>&#xD;
          &lt;/ns5:SessionNumber>&#xD;
          &lt;ns5:ISN>&#xD;
            &lt;xsl:variable name=&quot;if14&quot;>&#xD;
              &lt;xsl:choose>&#xD;
                &lt;xsl:when test=&quot;((java:_getStringProperty($_TIF_MESSAGE_, 'ApplicationMode'))!=('I') or not(string-length(java:_getStringProperty($_TIF_MESSAGE_, 'ApplicationMode'))))&quot;>&#xD;
                  &lt;xsl:value-of select=&quot;substring(java:_getStringProperty($_TIF_MESSAGE_, 'SequenceNumber'),'5','6')&quot;/>&#xD;
                &lt;/xsl:when>&#xD;
              &lt;/xsl:choose>&#xD;
            &lt;/xsl:variable>&#xD;
            &lt;xsl:value-of select=&quot;$if14&quot;>&lt;/xsl:value-of>&#xD;
          &lt;/ns5:ISN>&#xD;
        &lt;/ns5:MessageInputReference>&#xD;
        &lt;ns5:Date>&#xD;
          &lt;xsl:variable name=&quot;if15&quot;>&#xD;
              &lt;xsl:choose>&#xD;
                &lt;xsl:when test=&quot;((java:_getStringProperty($_TIF_MESSAGE_, 'ApplicationMode'))!=('I') or not(string-length(java:_getStringProperty($_TIF_MESSAGE_, 'ApplicationMode')))) and string-length(java:_getStringProperty($_TIF_MESSAGE_, 'OutputDate'))&quot;>&#xD;
                  &lt;xsl:value-of select=&quot;java:_getStringProperty($_TIF_MESSAGE_, 'OutputDate')&quot;>&lt;/xsl:value-of>&#xD;
                &lt;/xsl:when>&#xD;
				&#xD;
				 &lt;xsl:when test=&quot;((java:_getStringProperty($_TIF_MESSAGE_, 'ApplicationMode'))!=('I') or not(string-length(java:_getStringProperty($_TIF_MESSAGE_, 'ApplicationMode')))) and (not(string-length(java:_getStringProperty($_TIF_MESSAGE_, 'OutputDate'))))&quot;>&#xD;
                   &lt;xsl:value-of select=&quot;'991231'&quot;>&lt;/xsl:value-of>&#xD;
                &lt;/xsl:when>&#xD;
              &lt;/xsl:choose>&#xD;
          &lt;/xsl:variable>&#xD;
          &lt;xsl:value-of select=&quot;$if15&quot;>&lt;/xsl:value-of>&#xD;
        &lt;/ns5:Date>&#xD;
        &lt;ns5:Time>&#xD;
          &lt;xsl:variable name=&quot;if16&quot;>&#xD;
           &lt;xsl:choose>&#xD;
                &lt;xsl:when test=&quot;((java:_getStringProperty($_TIF_MESSAGE_, 'ApplicationMode'))!=('I') or not(string-length(java:_getStringProperty($_TIF_MESSAGE_, 'ApplicationMode')))) and string-length(java:_getStringProperty($_TIF_MESSAGE_, 'OutputTime'))&quot;>&#xD;
                  &lt;xsl:value-of select=&quot;java:_getStringProperty($_TIF_MESSAGE_, 'OutputTime')&quot;>&lt;/xsl:value-of>&#xD;
                &lt;/xsl:when>&#xD;
				&#xD;
				 &lt;xsl:when test=&quot;((java:_getStringProperty($_TIF_MESSAGE_, 'ApplicationMode'))!=('I') or not(string-length(java:_getStringProperty($_TIF_MESSAGE_, 'ApplicationMode')))) and (not(string-length(java:_getStringProperty($_TIF_MESSAGE_, 'OutputTime'))))&quot;>&#xD;
                   &lt;xsl:value-of select=&quot;'0000'&quot;>&lt;/xsl:value-of>&#xD;
                &lt;/xsl:when>&#xD;
              &lt;/xsl:choose>&#xD;
          &lt;/xsl:variable>&#xD;
          &lt;xsl:value-of select=&quot;$if16&quot;>&lt;/xsl:value-of>&#xD;
        &lt;/ns5:Time>&#xD;
        &lt;ns5:MessagePriority>&#xD;
          &lt;xsl:variable name=&quot;if17&quot;>&#xD;
            &lt;xsl:choose>&#xD;
              &lt;xsl:when test=&quot;((java:_getStringProperty($_TIF_MESSAGE_, 'ApplicationMode'))!=('I') or not(string-length(java:_getStringProperty($_TIF_MESSAGE_, 'ApplicationMode'))))&quot;>&#xD;
                &lt;xsl:variable name=&quot;if18&quot;>&#xD;
                  &lt;xsl:choose>&#xD;
                    &lt;xsl:when test=&quot;($document_IN_PORT/ns1:Envelope/ns4:AppHdr/ns4:Prty)=('HIGH')&quot;>&#xD;
                      &lt;xsl:value-of select=&quot;'U'&quot;>&lt;/xsl:value-of>&#xD;
                    &lt;/xsl:when>&#xD;
                    &lt;xsl:otherwise>&#xD;
                      &lt;xsl:value-of select=&quot;'N'&quot;>&lt;/xsl:value-of>&#xD;
                    &lt;/xsl:otherwise>&#xD;
                  &lt;/xsl:choose>&#xD;
                &lt;/xsl:variable>&#xD;
                &lt;xsl:value-of select=&quot;$if18&quot;>&lt;/xsl:value-of>&#xD;
              &lt;/xsl:when>&#xD;
            &lt;/xsl:choose>&#xD;
          &lt;/xsl:variable>&#xD;
          &lt;xsl:value-of select=&quot;$if17&quot;>&lt;/xsl:value-of>&#xD;
        &lt;/ns5:MessagePriority>&#xD;
&lt;!--</mappermodel:UserXSL>
  <mappermodel:UserXSL index="0" node="OUT_PORT:0,FinMessage:0,Block4:0,Document:0,MT103:0,[ZERO MANY]:3,F71a_2:0">&lt;xsl:variable name=&quot;LineSeparator&quot;>&#xD;
	&lt;xsl:value-of select=&quot;'ENDOFFLINE'&quot;/>&#xD;
&lt;/xsl:variable>&#xD;
&#xD;
&lt;xsl:variable name=&quot;VariableSeparator&quot;>&#xD;
	&lt;xsl:value-of select=&quot;'ENDOFFVAR'&quot;/>&#xD;
&lt;/xsl:variable>&#xD;
&#xD;
&lt;xsl:variable name=&quot;AppendedAmount&quot;>&#xD;
	&lt;xsl:for-each select=&quot;$document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:ChrgsInf&quot;>&#xD;
		&lt;xsl:value-of select=&quot;./ns3:Amt&quot;/>&#xD;
		&lt;xsl:value-of select=&quot;$VariableSeparator&quot;/>&#xD;
		&lt;xsl:value-of select=&quot;./ns3:Amt/@Ccy&quot;/>&#xD;
		&lt;xsl:value-of select=&quot;$VariableSeparator&quot;/>&#xD;
		&lt;xsl:value-of select=&quot;$LineSeparator&quot;/>&#xD;
	&lt;/xsl:for-each>&#xD;
&lt;/xsl:variable>&#xD;
&#xD;
&lt;xsl:variable name=&quot;Result&quot;>&#xD;
&lt;xsl:choose>&#xD;
&lt;xsl:when test=&quot;(($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:ChrgBr)=('CRED') or&#xD;
($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:ChrgBr)=('SHAR'))&quot;>&#xD;
&lt;xsl:value-of select=&quot;MX2MT:com.fiorano.funclet.MXtoMT.MX_To_MTAmountTable71F_pac4to103(string($AppendedAmount),string($LineSeparator),string($VariableSeparator))&quot;>&lt;/xsl:value-of>&#xD;
&lt;/xsl:when>&#xD;
&lt;/xsl:choose>&#xD;
&lt;/xsl:variable>&#xD;
&#xD;
&#xD;
&lt;xsl:call-template name=&quot;tokenize7&quot;>&#xD;
	&lt;xsl:with-param name=&quot;text&quot; select=&quot;$Result&quot;/>&#xD;
&lt;/xsl:call-template></mappermodel:UserXSL>
  <mappermodel:UserXSL index="1" node="OUT_PORT:0,FinMessage:0,Block4:0,Document:0,MT103:0,[ZERO MANY]:3,F71a_2:0">&lt;!-- User code starts here --></mappermodel:UserXSL>
  <mappermodel:UserXSL index="0" node="OUT_PORT:0,FinMessage:0,Block4:0,Document:0,MT103:0,F59a:0,[Choice]:0,F59F:0,[ONE MANY]:0,NumberNameAndAddressDetails:0">&lt;xsl:variable name=&quot;LineSeparator&quot;>
	&lt;xsl:value-of select=&quot;'ENDOFLINE'&quot;/>
&lt;/xsl:variable>
&lt;xsl:variable name=&quot;VariableSeparator&quot;>
	&lt;xsl:value-of select=&quot;'ENDOFVAR'&quot;/>
&lt;/xsl:variable>
&lt;xsl:variable name=&quot;AppendedPostalAddress&quot;>
	&lt;xsl:for-each select=&quot;$document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Cdtr/ns3:PstlAdr/ns3:AdrLine&quot;>
		&lt;xsl:value-of select=&quot;.&quot;/>
		&lt;xsl:value-of select=&quot;$LineSeparator&quot;/>
	&lt;/xsl:for-each>
&lt;/xsl:variable>
&lt;xsl:variable name=&quot;ResultantMTAddressTable&quot;>
	&lt;xsl:choose>
		&lt;xsl:when test=&quot;(not(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Cdtr/ns3:Id/ns3:OrgId/ns3:AnyBIC)) and (string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Cdtr/ns3:PstlAdr/ns3:Ctry)))&quot;>
			&lt;xsl:value-of select=&quot;MX2MT:com.fiorano.funclet.MXtoMT.SplitAddresstoNumberDetailswithTruncate(string(MX2MT:com.fiorano.funclet.MXtoMT.MX_To_MTPartyNameAndAddressLEI1withTruncate(string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Cdtr/ns3:Nm),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Cdtr/ns3:Id/ns3:OrgId/ns3:LEI),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Cdtr/ns3:PstlAdr/ns3:Dept),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Cdtr/ns3:PstlAdr/ns3:SubDept),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Cdtr/ns3:PstlAdr/ns3:StrtNm),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Cdtr/ns3:PstlAdr/ns3:BldgNb),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Cdtr/ns3:PstlAdr/ns3:BldgNm),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Cdtr/ns3:PstlAdr/ns3:PstBx),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Cdtr/ns3:PstlAdr/ns3:Flr),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Cdtr/ns3:PstlAdr/ns3:Room),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Cdtr/ns3:PstlAdr/ns3:PstCd),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Cdtr/ns3:PstlAdr/ns3:TwnNm),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Cdtr/ns3:PstlAdr/ns3:TwnLctnNm),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Cdtr/ns3:PstlAdr/ns3:DstrctNm),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Cdtr/ns3:PstlAdr/ns3:CtrySubDvsn),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Cdtr/ns3:PstlAdr/ns3:Ctry),string($LineSeparator))),string($LineSeparator),string($VariableSeparator))&quot;/>
		&lt;/xsl:when>
		&lt;xsl:when test=&quot;(not(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Cdtr/ns3:Id/ns3:OrgId/ns3:AnyBIC)) and (string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Cdtr/ns3:PstlAdr/ns3:AdrLine)) and (('true')=(MXToMT:com.fiorano.funclet.MXtoMT.MX_To_MTAddressLineType(string($AppendedPostalAddress),string($LineSeparator)))))&quot;>
			&lt;xsl:value-of select=&quot;MX2MT:com.fiorano.funclet.MXtoMT.SplitAddresstoNumberDetailswithTruncate(string(MX2MT:com.fiorano.funclet.MXtoMT.MX_To_MTPartyNameAndAddressLEI2withTruncate(string($AppendedPostalAddress),string($LineSeparator),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Cdtr/ns3:Nm),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Cdtr/ns3:Id/ns3:OrgId/ns3:LEI))),string($LineSeparator),string($VariableSeparator))&quot;/>
		&lt;/xsl:when>
		&lt;xsl:when test=&quot;(not(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Cdtr/ns3:Id/ns3:OrgId/ns3:AnyBIC)) and (string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Cdtr/ns3:Nm)) and (not(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Cdtr/ns3:PstlAdr/ns3:AdrLine))))&quot;>
			&lt;xsl:value-of select=&quot;MX2MT:com.fiorano.funclet.MXtoMT.SplitAddresstoNumberDetailswithTruncate(string(MX2MT:com.fiorano.funclet.MXtoMT.MX_To_MTPartyNameAndAddressLEI1withTruncate(string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Cdtr/ns3:Nm),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Cdtr/ns3:Id/ns3:OrgId/ns3:LEI),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Cdtr/ns3:PstlAdr/ns3:Dept),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Cdtr/ns3:PstlAdr/ns3:SubDept),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Cdtr/ns3:PstlAdr/ns3:StrtNm),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Cdtr/ns3:PstlAdr/ns3:BldgNb),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Cdtr/ns3:PstlAdr/ns3:BldgNm),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Cdtr/ns3:PstlAdr/ns3:PstBx),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Cdtr/ns3:PstlAdr/ns3:Flr),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Cdtr/ns3:PstlAdr/ns3:Room),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Cdtr/ns3:PstlAdr/ns3:PstCd),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Cdtr/ns3:PstlAdr/ns3:TwnNm),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Cdtr/ns3:PstlAdr/ns3:TwnLctnNm),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Cdtr/ns3:PstlAdr/ns3:DstrctNm),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Cdtr/ns3:PstlAdr/ns3:CtrySubDvsn),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Cdtr/ns3:PstlAdr/ns3:Ctry),string($LineSeparator))),string($LineSeparator),string($VariableSeparator))&quot;/>
		&lt;/xsl:when>
	&lt;/xsl:choose>
&lt;/xsl:variable>
&lt;xsl:call-template name=&quot;tokenize4&quot;>
	&lt;xsl:with-param name=&quot;text&quot; select=&quot;substring-before($ResultantMTAddressTable,'ENDOFOUTPUT')&quot;/>
&lt;/xsl:call-template></mappermodel:UserXSL>
  <mappermodel:UserXSL index="1" node="OUT_PORT:0,FinMessage:0,Block4:0,Document:0,MT103:0,F59a:0,[Choice]:0,F59F:0,[ONE MANY]:0,NumberNameAndAddressDetails:0">&lt;xsl:variable name=&quot;TruncTemp&quot;>&#xD;
	&lt;xsl:value-of select=&quot;java:_getStringProperty($_TIF_MESSAGE_, 'Truncated_Fields')&quot;/>&#xD;
&lt;/xsl:variable>&#xD;
&lt;ns2:Number>&#xD;
	&lt;xsl:value-of select=&quot;java:_setStringProperty($_TIF_MESSAGE_, 'Truncated_Fields', concat($TruncTemp,'F59F_NumberNameAndAddressDetailsENDOFFIELDTAG',substring-after($ResultantMTAddressTable,'ENDOFOUTPUT'),'ENDOFTRUNCATEDFIELD'))&quot;/>&#xD;
&lt;/ns2:Number></mappermodel:UserXSL>
  <mappermodel:UserXSL index="1" node="OUT_PORT:0,FinMessage:0,Block4:0,Document:0,MT103:0,F59a:0,[Choice]:0,F59F:0,Account:0">&lt;xsl:variable name=&quot;LineSeparator&quot;>
	&lt;xsl:value-of select=&quot;'ENDOFLINE'&quot;/>
&lt;/xsl:variable>
&lt;xsl:variable name=&quot;VariableSeparator&quot;>
	&lt;xsl:value-of select=&quot;'ENDOFVAR'&quot;/>
&lt;/xsl:variable>
&lt;xsl:variable name=&quot;AppendedPostalAddress&quot;>
	&lt;xsl:for-each select=&quot;$document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Cdtr/ns3:PstlAdr/ns3:AdrLine&quot;>
		&lt;xsl:value-of select=&quot;.&quot;/>
		&lt;xsl:value-of select=&quot;$LineSeparator&quot;/>
	&lt;/xsl:for-each>
&lt;/xsl:variable>

&lt;xsl:variable name=&quot;ResultantMTAddressTable&quot;>
&lt;xsl:choose>
	
		&lt;xsl:when test=&quot;(not(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Cdtr/ns3:Id/ns3:OrgId/ns3:AnyBIC)) and (string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Cdtr/ns3:PstlAdr/ns3:Ctry)) and string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:CdtrAcct))&quot;>
			&lt;xsl:value-of select=&quot;MX2MT:com.fiorano.funclet.MXtoMT.mx2MTAccountwithTruncate(string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:CdtrAcct/ns3:Id/ns3:IBAN),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:CdtrAcct/ns3:Id/ns3:Othr/ns3:Id),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:CdtrAcct/ns3:Id/ns3:Othr/ns3:SchmeNm/ns3:Cd))&quot;>&lt;/xsl:value-of>
		&lt;/xsl:when>

		 &lt;xsl:when test=&quot;(not(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Cdtr/ns3:Id/ns3:OrgId/ns3:AnyBIC)) and (string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Cdtr/ns3:PstlAdr/ns3:AdrLine)) and (('true')=(MXToMT:com.fiorano.funclet.MXtoMT.MX_To_MTAddressLineType(string($AppendedPostalAddress),string($LineSeparator)))) and string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:CdtrAcct))&quot;>
		&lt;xsl:value-of select=&quot;MX2MT:com.fiorano.funclet.MXtoMT.mx2MTAccountwithTruncate(string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:CdtrAcct/ns3:Id/ns3:IBAN),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:CdtrAcct/ns3:Id/ns3:Othr/ns3:Id),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:CdtrAcct/ns3:Id/ns3:Othr/ns3:SchmeNm/ns3:Cd))&quot;>&lt;/xsl:value-of>
		&lt;/xsl:when>
		
		&lt;xsl:when test=&quot;(not(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Cdtr/ns3:Id/ns3:OrgId/ns3:AnyBIC)) and (string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Cdtr/ns3:Nm)) and (not(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Cdtr/ns3:PstlAdr/ns3:AdrLine)))and string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:CdtrAcct))&quot;>
		&lt;xsl:value-of select=&quot;MX2MT:com.fiorano.funclet.MXtoMT.mx2MTAccountwithTruncate(string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:CdtrAcct/ns3:Id/ns3:IBAN),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:CdtrAcct/ns3:Id/ns3:Othr/ns3:Id),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:CdtrAcct/ns3:Id/ns3:Othr/ns3:SchmeNm/ns3:Cd))&quot;>&lt;/xsl:value-of>
		&lt;/xsl:when>
		
	
	&lt;/xsl:choose>
	&lt;/xsl:variable>
&lt;xsl:value-of select=&quot;normalize-space(substring-before($ResultantMTAddressTable,'ENDOFOUTPUT'))&quot;/>
&lt;xsl:variable name=&quot;TruncTemp&quot;>
  &lt;xsl:value-of select=&quot;java:_getStringProperty($_TIF_MESSAGE_, 'Truncated_Fields')&quot;/>
&lt;/xsl:variable>

&lt;xsl:value-of select=&quot;java:_setStringProperty($_TIF_MESSAGE_, 'Truncated_Fields', concat($TruncTemp,'F59F_Account_ENDOFFIELDTAG',substring-after($ResultantMTAddressTable,'ENDOFOUTPUT'),'ENDOFTRUNCATEDFIELD'))&quot;/></mappermodel:UserXSL>
  <mappermodel:UserXSL index="1" node="OUT_PORT:0,FinMessage:0,Block4:0,Document:0,MT103:0,F59a:0,[Choice]:0,F59:0,Account:0">&lt;xsl:variable name=&quot;LineSeparator&quot;>
	&lt;xsl:value-of select=&quot;'ENDOFLINE'&quot;/>
&lt;/xsl:variable>
&lt;xsl:variable name=&quot;VariableSeparator&quot;>
	&lt;xsl:value-of select=&quot;'ENDOFVAR'&quot;/>
&lt;/xsl:variable>
&lt;xsl:variable name=&quot;AppendedPostalAddress&quot;>
	&lt;xsl:for-each select=&quot;$document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Cdtr/ns3:PstlAdr/ns3:AdrLine&quot;>
		&lt;xsl:value-of select=&quot;.&quot;/>
		&lt;xsl:value-of select=&quot;$LineSeparator&quot;/>
	&lt;/xsl:for-each>
&lt;/xsl:variable>

&lt;xsl:variable name=&quot;ResultantMTAddressTable&quot;>
&lt;xsl:choose>
	

		 &lt;xsl:when test=&quot;(not(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Cdtr/ns3:Id/ns3:OrgId/ns3:AnyBIC)) and (string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Cdtr/ns3:PstlAdr/ns3:AdrLine)) and (('false')=(MXToMT:com.fiorano.funclet.MXtoMT.MX_To_MTAddressLineType(string($AppendedPostalAddress),string($LineSeparator)))) and string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:CdtrAcct))&quot;>
		&lt;xsl:value-of select=&quot;MX2MT:com.fiorano.funclet.MXtoMT.mx2MTAccountwithTruncate(string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:CdtrAcct/ns3:Id/ns3:IBAN),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:CdtrAcct/ns3:Id/ns3:Othr/ns3:Id),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:CdtrAcct/ns3:Id/ns3:Othr/ns3:SchmeNm/ns3:Cd))&quot;>&lt;/xsl:value-of>
		&lt;/xsl:when>
	
	&lt;/xsl:choose>
&lt;/xsl:variable>
	&lt;xsl:value-of select=&quot;normalize-space(substring-before($ResultantMTAddressTable,'ENDOFOUTPUT'))&quot;/>
&lt;xsl:variable name=&quot;TruncTemp&quot;>
  &lt;xsl:value-of select=&quot;java:_getStringProperty($_TIF_MESSAGE_, 'Truncated_Fields')&quot;/>
&lt;/xsl:variable>

&lt;xsl:value-of select=&quot;java:_setStringProperty($_TIF_MESSAGE_, 'Truncated_Fields', concat($TruncTemp,'F59Account_ENDOFFIELDTAG',substring-after($ResultantMTAddressTable,'ENDOFOUTPUT'),'ENDOFTRUNCATEDFIELD'))&quot;/></mappermodel:UserXSL>
  <mappermodel:UserXSL index="1" node="OUT_PORT:0,FinMessage:0,Block4:0,Document:0,MT103:0,F59a:0,[Choice]:0,F59:0,NameAndAddress:0,[ONE MANY]:0,Line:0">&lt;xsl:value-of select=&quot;java:_setStringProperty($_TIF_MESSAGE_, 'Truncated_Fields', concat($TruncTemp,'F59_NameAndAddress_LineENDOFFIELDTAG',substring-after($ResultantMTAddressTable,'ENDOFOUTPUT'),'ENDOFTRUNCATEDFIELD'))&quot;/></mappermodel:UserXSL>
  <mappermodel:UserXSL index="1" node="OUT_PORT:0,FinMessage:0,Block4:0,Document:0,MT103:0,F59a:0,[Choice]:0,F59A:0,Account:0">&lt;xsl:variable name=&quot;LineSeparator&quot;>
	&lt;xsl:value-of select=&quot;'ENDOFLINE'&quot;/>
&lt;/xsl:variable>
&lt;xsl:variable name=&quot;VariableSeparator&quot;>
	&lt;xsl:value-of select=&quot;'ENDOFVAR'&quot;/>
&lt;/xsl:variable>
&lt;xsl:variable name=&quot;AppendedPostalAddress&quot;>
	&lt;xsl:for-each select=&quot;$document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Cdtr/ns3:PstlAdr/ns3:AdrLine&quot;>
		&lt;xsl:value-of select=&quot;.&quot;/>
		&lt;xsl:value-of select=&quot;$LineSeparator&quot;/>
	&lt;/xsl:for-each>
&lt;/xsl:variable>

&lt;xsl:variable name=&quot;ResultantMTAddressTable&quot;>
&lt;xsl:choose>

		 &lt;xsl:when test=&quot;((string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Cdtr/ns3:Id/ns3:OrgId/ns3:AnyBIC)) and string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:CdtrAcct))&quot;>
		&lt;xsl:value-of select=&quot;MX2MT:com.fiorano.funclet.MXtoMT.mx2MTAccountwithTruncate(string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:CdtrAcct/ns3:Id/ns3:IBAN),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:CdtrAcct/ns3:Id/ns3:Othr/ns3:Id),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:CdtrAcct/ns3:Id/ns3:Othr/ns3:SchmeNm/ns3:Cd))&quot;>&lt;/xsl:value-of>
		&lt;/xsl:when>
	
	&lt;/xsl:choose>
	&lt;/xsl:variable>
&lt;xsl:value-of select=&quot;normalize-space(substring-before($ResultantMTAddressTable,'ENDOFOUTPUT'))&quot;/>
&lt;xsl:variable name=&quot;TruncTemp&quot;>
  &lt;xsl:value-of select=&quot;java:_getStringProperty($_TIF_MESSAGE_, 'Truncated_Fields')&quot;/>
&lt;/xsl:variable>

&lt;xsl:value-of select=&quot;java:_setStringProperty($_TIF_MESSAGE_, 'Truncated_Fields', concat($TruncTemp,'F59A_Account_ENDOFFIELDTAG',substring-after($ResultantMTAddressTable,'ENDOFOUTPUT'),'ENDOFTRUNCATEDFIELD'))&quot;/></mappermodel:UserXSL>
  <mappermodel:UserXSL index="0" node="OUT_PORT:0,FinMessage:0,Block4:0,Document:0,MT103:0,F59a:0,[Choice]:0,F59:0,NameAndAddress:0,[ONE MANY]:0,Line:0">&lt;xsl:variable name=&quot;LineSeparator&quot;>
	&lt;xsl:value-of select=&quot;'ENDOFLINE'&quot;/>
&lt;/xsl:variable>
&lt;xsl:variable name=&quot;VariableSeparator&quot;>
	&lt;xsl:value-of select=&quot;'ENDOFVAR'&quot;/>
&lt;/xsl:variable>
&lt;xsl:variable name=&quot;AppendedPostalAddress&quot;>
	&lt;xsl:for-each select=&quot;$document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Cdtr/ns3:PstlAdr/ns3:AdrLine&quot;>
		&lt;xsl:value-of select=&quot;.&quot;/>
		&lt;xsl:value-of select=&quot;$LineSeparator&quot;/>
	&lt;/xsl:for-each>
&lt;/xsl:variable>

&lt;xsl:variable name=&quot;ResultantMTAddressTable&quot;>
	&lt;xsl:choose>

		 &lt;xsl:when test=&quot;(not(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Cdtr/ns3:Id/ns3:OrgId/ns3:AnyBIC)) and (string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Cdtr/ns3:PstlAdr/ns3:AdrLine)) and (('false')=(MXToMT:com.fiorano.funclet.MXtoMT.MX_To_MTAddressLineType(string($AppendedPostalAddress),string($LineSeparator)))) )&quot;>
			&lt;xsl:value-of select=&quot;MXToMT:com.fiorano.funclet.MXtoMT.MX_To_MTPartyNameAndUnstructuredAddresswithTruncate(string($AppendedPostalAddress),string($LineSeparator),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Cdtr/ns3:Nm))&quot;/>
		
		&lt;/xsl:when>
	
	&lt;/xsl:choose>
	&lt;/xsl:variable>
	
		


&lt;xsl:call-template name=&quot;tokenizeLine&quot;>
	&lt;xsl:with-param name=&quot;text&quot; select=&quot;substring-before($ResultantMTAddressTable,'ENDOFOUTPUT')&quot;/>
&lt;/xsl:call-template>
&lt;xsl:variable name=&quot;TruncTemp&quot;>
  &lt;xsl:value-of select=&quot;java:_getStringProperty($_TIF_MESSAGE_, 'Truncated_Fields')&quot;/>
&lt;/xsl:variable></mappermodel:UserXSL>
  <mappermodel:UserXSL index="1" node="OUT_PORT:0,FinMessage:0,Block4:0,Document:0,MT103:0,F72a:0,[Choice]:0,F72:0,NarrativeStructuredFormat:0,Line1:0,Narrative:0">&lt;xsl:value-of select=&quot;MX2MT:com.fiorano.funclet.MXtoMT.MX_To_MT72FullField1Line1Narrative(string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:IntrmyAgt2/ns3:FinInstnId/ns3:BICFI),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:IntrmyAgt2/ns3:FinInstnId/ns3:Nm),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:IntrmyAgt2/ns3:FinInstnId/ns3:ClrSysMmbId/ns3:ClrSysId/ns3:Cd),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:IntrmyAgt2/ns3:FinInstnId/ns3:ClrSysMmbId/ns3:MmbId),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:IntrmyAgt2/ns3:FinInstnId/ns3:PstlAdr/ns3:TwnNm),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:IntrmyAgt2/ns3:FinInstnId/ns3:PstlAdr/ns3:Ctry),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:IntrmyAgt3/ns3:FinInstnId/ns3:BICFI),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:IntrmyAgt3/ns3:FinInstnId/ns3:Nm),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:IntrmyAgt3/ns3:FinInstnId/ns3:ClrSysMmbId/ns3:ClrSysId/ns3:Cd),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:IntrmyAgt3/ns3:FinInstnId/ns3:ClrSysMmbId/ns3:MmbId),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:IntrmyAgt3/ns3:FinInstnId/ns3:PstlAdr/ns3:TwnNm),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:IntrmyAgt3/ns3:FinInstnId/ns3:PstlAdr/ns3:Ctry),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:PrvsInstgAgt1/ns3:FinInstnId/ns3:BICFI),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:PrvsInstgAgt2/ns3:FinInstnId/ns3:BICFI),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:PrvsInstgAgt3/ns3:FinInstnId/ns3:BICFI),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:PrvsInstgAgt1/ns3:FinInstnId/ns3:Nm),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:PrvsInstgAgt2/ns3:FinInstnId/ns3:Nm),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:PrvsInstgAgt3/ns3:FinInstnId/ns3:Nm),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:PrvsInstgAgt1/ns3:FinInstnId/ns3:ClrSysMmbId/ns3:ClrSysId/ns3:Cd),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:PrvsInstgAgt2/ns3:FinInstnId/ns3:ClrSysMmbId/ns3:ClrSysId/ns3:Cd),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:PrvsInstgAgt3/ns3:FinInstnId/ns3:ClrSysMmbId/ns3:ClrSysId/ns3:Cd),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:PrvsInstgAgt1/ns3:FinInstnId/ns3:ClrSysMmbId/ns3:MmbId),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:PrvsInstgAgt2/ns3:FinInstnId/ns3:ClrSysMmbId/ns3:MmbId),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:PrvsInstgAgt3/ns3:FinInstnId/ns3:ClrSysMmbId/ns3:MmbId),string($ServiceLevelPropArr),string($ServiceLevelCodeArr),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:PmtTpInf/ns3:LclInstrm/ns3:Prtry),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:PmtTpInf/ns3:LclInstrm/ns3:Cd),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:PmtTpInf/ns3:CtgyPurp/ns3:Prtry),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:PmtTpInf/ns3:CtgyPurp/ns3:Cd),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:CdtrAgt/ns3:BrnchId/ns3:Id),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:CdtrAgt/ns3:FinInstnId/ns3:BICFI),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:CdtrAgt/ns3:FinInstnId/ns3:PstlAdr/ns3:Ctry),string($InstrForCdtrAgtCodeArr),string($InstrForCdtrAgtInstructionArr),string($InstrForNxtAgtInstructionArr),string($LineSeparator),string($VariableSeparator))&quot;>&lt;/xsl:value-of></mappermodel:UserXSL>
  <mappermodel:UserXSL index="1" node="OUT_PORT:0,FinMessage:0,Block5:0,SYS:0,MIR:0,LTIdentifier:0">&lt;xsl:variable name=&quot;TruncatedWithLimitter&quot;>
&lt;xsl:value-of select=&quot;(concat(java:_getStringProperty($_TIF_MESSAGE_, 'Truncated_Fields'),'ENDOFTRUNK'))&quot;>&lt;/xsl:value-of>
&lt;/xsl:variable>
&lt;xsl:variable name=&quot;Truncated_Additional&quot;>
&lt;xsl:value-of select=&quot;(concat($TruncatedWithLimitter,java:_getStringProperty($_TIF_MESSAGE_, 'Additional_Fields')))&quot;>&lt;/xsl:value-of>
&lt;/xsl:variable>
&lt;xsl:value-of select=&quot;java:_setStringProperty($_TIF_MESSAGE_, 'File_Truncated', java:com.fiorano.xslt.functions.base64.Base64.getEncodedString(MXToMT:com.fiorano.funclet.MXtoMT.generateReadableData(string(concat($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:PmtId/ns3:UETR,'ENDOFUETR',$Truncated_Additional)))))&quot;>&lt;/xsl:value-of></mappermodel:UserXSL>
  <mappermodel:UserXSL index="1" node="OUT_PORT:0">&lt;xsl:template name=&quot;tokenizeLine&quot;>
 &lt;xsl:param name=&quot;text&quot; select=&quot;.&quot;/>
 &lt;xsl:param name=&quot;separator&quot; select=&quot;'ENDOFLINE'&quot;/>
        &lt;xsl:choose>
            &lt;xsl:when test=&quot;not(contains($text, $separator))&quot;>
                &lt;ns6:Line>
                    &lt;xsl:value-of select=&quot;normalize-space($text)&quot;/>
                &lt;/ns6:Line>
            &lt;/xsl:when>
            &lt;xsl:otherwise>
               &lt;ns6:Line>
                    &lt;xsl:value-of select=&quot;normalize-space(substring-before($text, $separator))&quot;/>
               &lt;/ns6:Line>
                &lt;xsl:call-template name=&quot;tokenizeLine&quot;>
                    &lt;xsl:with-param name=&quot;text&quot; select=&quot;substring-after($text, $separator)&quot;/>
                &lt;/xsl:call-template>
            &lt;/xsl:otherwise>
        &lt;/xsl:choose>
&lt;/xsl:template>
&lt;xsl:template name=&quot;tokenizeF13C&quot;>
 &lt;xsl:param name=&quot;text&quot; select=&quot;.&quot;/>
 &lt;xsl:param name=&quot;separator&quot; select=&quot;'ENDOFLINE'&quot;/>
        &lt;xsl:choose>
            &lt;xsl:when test=&quot;not(contains($text, $separator))&quot;>
			  &lt;xsl:if test=&quot;string-length($text)&quot;>  
                &lt;xsl:call-template name=&quot;MXDateTimeOffsetF13C&quot;>
					&lt;xsl:with-param name=&quot;text&quot; select=&quot;normalize-space($text)&quot;/>
				&lt;/xsl:call-template>
			  &lt;/xsl:if>
            &lt;/xsl:when>
            &lt;xsl:otherwise>
                &lt;xsl:call-template name=&quot;MXDateTimeOffsetF13C&quot;>
					&lt;xsl:with-param name=&quot;text&quot; select=&quot;normalize-space(substring-before($text, $separator))&quot;/>
				&lt;/xsl:call-template>
                &lt;xsl:call-template name=&quot;tokenizeF13C&quot;>
                    &lt;xsl:with-param name=&quot;text&quot; select=&quot;substring-after($text, $separator)&quot;/>
                &lt;/xsl:call-template>
            &lt;/xsl:otherwise>
        &lt;/xsl:choose>
&lt;/xsl:template>



&lt;xsl:template name=&quot;MXDateTimeOffsetF13C&quot;>
  &lt;xsl:param name=&quot;text&quot; select=&quot;.&quot;/>
  &lt;ns6:F13a>
      &lt;ns6:F13C>
        &lt;ns6:Code>
		  &lt;xsl:value-of select=&quot;substring($text,1,7)&quot;>&lt;/xsl:value-of>
        &lt;/ns6:Code>
		  &lt;xsl:choose>
            &lt;xsl:when test=&quot;starts-with($text,'SNDTIME') or starts-with($text,'RNCTIME')&quot;>
			  &lt;ns6:TimeIndication>
				&lt;xsl:value-of select=&quot;MX2MT:com.fiorano.funclet.MXtoMT.MX_To_MTDateTimeOffset_Time(string(substring($text,8)))&quot;>&lt;/xsl:value-of>
			  &lt;/ns6:TimeIndication>
			  &lt;ns6:Sign>
				&lt;xsl:value-of select=&quot;MX2MT:com.fiorano.funclet.MXtoMT.MX_To_MTDateTimeOffset_Sign(string(substring($text,8)))&quot;>&lt;/xsl:value-of>
			  &lt;/ns6:Sign>
			  &lt;ns6:TimeOffset>
				&lt;xsl:value-of select=&quot;MX2MT:com.fiorano.funclet.MXtoMT.MX_To_MTDateTimeOffset_Offset(string(substring($text,8)))&quot;>&lt;/xsl:value-of>
			  &lt;/ns6:TimeOffset>
			&lt;/xsl:when>  
			&lt;xsl:otherwise>
			  &lt;ns6:TimeIndication>
				&lt;xsl:value-of select=&quot;MX2MT:com.fiorano.funclet.MXtoMT.MX_To_MTTime_Time(string(substring($text,8)))&quot;>&lt;/xsl:value-of>
			  &lt;/ns6:TimeIndication>
			  &lt;ns6:Sign>
				&lt;xsl:value-of select=&quot;MX2MT:com.fiorano.funclet.MXtoMT.MX_To_MTTime_Sign(string(substring($text,8)))&quot;>&lt;/xsl:value-of>
			  &lt;/ns6:Sign>
			  &lt;ns6:TimeOffset>
				&lt;xsl:value-of select=&quot;MX2MT:com.fiorano.funclet.MXtoMT.MX_To_MTTime_Offset(string(substring($text,8)))&quot;>&lt;/xsl:value-of>
			  &lt;/ns6:TimeOffset>
			&lt;/xsl:otherwise>
		  &lt;/xsl:choose>
	  &lt;/ns6:F13C>
  &lt;/ns6:F13a>
&lt;/xsl:template>

&lt;xsl:template name=&quot;tokenize3&quot;>
	&lt;xsl:param name=&quot;text&quot; select=&quot;.&quot;/>
	&lt;xsl:param name=&quot;LineSeparator&quot; select=&quot;'ENDOFLINE'&quot;/>
	&lt;xsl:param name=&quot;VarSeparator&quot; select=&quot;'ENDOFVAR'&quot;/>
	&lt;xsl:choose>
		&lt;xsl:when test=&quot;not(string-length($text))&quot;>
		&lt;/xsl:when>
		&lt;xsl:when test=&quot;not(contains($text, $LineSeparator))&quot;>
			&lt;ns6:Lines2to5>
				&lt;ns6:Number>
					&lt;xsl:value-of select=&quot;normalize-space(substring-before($text, $VarSeparator))&quot;/>
				&lt;/ns6:Number>

				&lt;xsl:variable name=&quot;Cdval&quot;>
					&lt;xsl:value-of select=&quot;substring-after($text, $VarSeparator)&quot;/>
				&lt;/xsl:variable>

				&lt;ns6:Details>
					&lt;xsl:value-of select=&quot;normalize-space(substring-before($Cdval, $VarSeparator))&quot;/>
				&lt;/ns6:Details>

			&lt;/ns6:Lines2to5>
		&lt;/xsl:when>
		&lt;xsl:when test=&quot;((contains($text, $LineSeparator))) &quot;>

			&lt;ns6:Lines2to5>
				&lt;ns6:Number>
					&lt;xsl:value-of select=&quot;normalize-space(substring-before($text, $VarSeparator))&quot;/>
				&lt;/ns6:Number>

				&lt;xsl:variable name=&quot;Cdval1&quot;>
					&lt;xsl:value-of select=&quot;substring-after($text, $VarSeparator)&quot;/>
				&lt;/xsl:variable>

				&lt;ns6:Details>
					&lt;xsl:value-of select=&quot;normalize-space(substring-before($Cdval1, $VarSeparator))&quot;/>
				&lt;/ns6:Details>

			&lt;/ns6:Lines2to5>
			&lt;xsl:call-template name=&quot;tokenize3&quot;>
				&lt;xsl:with-param name=&quot;text&quot; select=&quot;substring-after($text, $LineSeparator)&quot;/>
			&lt;/xsl:call-template>
		&lt;/xsl:when>
	&lt;/xsl:choose>
&lt;/xsl:template>

&lt;xsl:template name=&quot;tokenizeF23E&quot;>
	&lt;xsl:param name=&quot;text&quot; select=&quot;.&quot;/>
	&lt;xsl:param name=&quot;LineSeparator&quot; select=&quot;'ENDOFLINE'&quot;/>
	&lt;xsl:param name=&quot;VarSeparator&quot; select=&quot;'ENDOFVAR'&quot;/>
	&lt;xsl:choose>
		&lt;xsl:when test=&quot;not(string-length($text))&quot;>
		&lt;/xsl:when>
		&lt;xsl:when test=&quot;not(contains($text, $LineSeparator))&quot;>
			&lt;ns6:F23a_2>
			&lt;ns6:F23E>
				&lt;ns6:InstructionCode>
					&lt;xsl:value-of select=&quot;normalize-space(substring-before($text, $VarSeparator))&quot;/>
				&lt;/ns6:InstructionCode>

				&lt;xsl:variable name=&quot;Cdval&quot;>
					&lt;xsl:value-of select=&quot;substring-after($text, $VarSeparator)&quot;/>
				&lt;/xsl:variable>

				&lt;ns6:AdditionalInformation>
					&lt;xsl:value-of select=&quot;normalize-space(substring-before($Cdval, $VarSeparator))&quot;/>
				&lt;/ns6:AdditionalInformation>

			&lt;/ns6:F23E>
			&lt;/ns6:F23a_2>
		&lt;/xsl:when>
		&lt;xsl:when test=&quot;((contains($text, $LineSeparator))) &quot;>

			&lt;ns6:F23a_2>
			&lt;ns6:F23E>
				&lt;ns6:InstructionCode>
					&lt;xsl:value-of select=&quot;normalize-space(substring-before($text, $VarSeparator))&quot;/>
				&lt;/ns6:InstructionCode>

				&lt;xsl:variable name=&quot;Cdval1&quot;>
					&lt;xsl:value-of select=&quot;substring-after($text, $VarSeparator)&quot;/>
				&lt;/xsl:variable>

				&lt;ns6:AdditionalInformation>
					&lt;xsl:value-of select=&quot;normalize-space(substring-before($Cdval1, $VarSeparator))&quot;/>
				&lt;/ns6:AdditionalInformation>

			&lt;/ns6:F23E>
			&lt;/ns6:F23a_2>
			&lt;xsl:call-template name=&quot;tokenizeF23E&quot;>
				&lt;xsl:with-param name=&quot;text&quot; select=&quot;substring-after($text, $LineSeparator)&quot;/>
			&lt;/xsl:call-template>
		&lt;/xsl:when>
	&lt;/xsl:choose>
&lt;/xsl:template>

&lt;xsl:template name=&quot;tokenize4&quot;>
	&lt;xsl:param name=&quot;text&quot; select=&quot;.&quot;/>
	&lt;xsl:param name=&quot;LineSeparator&quot; select=&quot;'ENDOFLINE'&quot;/>
	&lt;xsl:param name=&quot;VarSeparator&quot; select=&quot;'ENDOFVAR'&quot;/>
	&lt;xsl:choose>
		&lt;xsl:when test=&quot;not(string-length($text))&quot;>
		&lt;/xsl:when>
		&lt;xsl:when test=&quot;not(contains($text, $LineSeparator))&quot;>
			&lt;ns6:NumberNameAndAddressDetails>
				&lt;ns6:Number>
					&lt;xsl:value-of select=&quot;normalize-space(substring-before($text, $VarSeparator))&quot;/>
				&lt;/ns6:Number>

				&lt;xsl:variable name=&quot;Cdval&quot;>
					&lt;xsl:value-of select=&quot;substring-after($text, $VarSeparator)&quot;/>
				&lt;/xsl:variable>

				&lt;ns6:Details>
					&lt;xsl:value-of select=&quot;normalize-space(substring-before($Cdval, $VarSeparator))&quot;/>
				&lt;/ns6:Details>

			&lt;/ns6:NumberNameAndAddressDetails>
		&lt;/xsl:when>
		&lt;xsl:when test=&quot;((contains($text, $LineSeparator))) &quot;>

			&lt;ns6:NumberNameAndAddressDetails>
				&lt;ns6:Number>
					&lt;xsl:value-of select=&quot;normalize-space(substring-before($text, $VarSeparator))&quot;/>
				&lt;/ns6:Number>

				&lt;xsl:variable name=&quot;Cdval1&quot;>
					&lt;xsl:value-of select=&quot;substring-after($text, $VarSeparator)&quot;/>
				&lt;/xsl:variable>

				&lt;ns6:Details>
					&lt;xsl:value-of select=&quot;normalize-space(substring-before($Cdval1, $VarSeparator))&quot;/>
				&lt;/ns6:Details>

			&lt;/ns6:NumberNameAndAddressDetails>
			&lt;xsl:call-template name=&quot;tokenize4&quot;>
				&lt;xsl:with-param name=&quot;text&quot; select=&quot;substring-after($text, $LineSeparator)&quot;/>
			&lt;/xsl:call-template>
		&lt;/xsl:when>
	&lt;/xsl:choose>
&lt;/xsl:template>

&lt;xsl:template name=&quot;tokenize6&quot;>
 &lt;xsl:param name=&quot;text&quot; select=&quot;.&quot;/>
 &lt;xsl:param name=&quot;LineSeparator&quot; select=&quot;'ENDOFLINE'&quot;/>
 &lt;xsl:param name=&quot;VarSeparator&quot; select=&quot;'ENDOFVAR'&quot;/>
        &lt;xsl:choose>
        &lt;xsl:when test=&quot;not(string-length($text))&quot;>
        &lt;/xsl:when>
            &lt;xsl:when test=&quot;not(contains($text, $LineSeparator))&quot;>
            &lt;ns6:Lines2to6>
                &lt;ns6:Narrative1>
                &lt;xsl:value-of select=&quot;normalize-space(substring-before($text, $VarSeparator))&quot;/>
                &lt;/ns6:Narrative1>

                &lt;xsl:variable name=&quot;Cdval22&quot;>
                &lt;xsl:value-of select=&quot;substring-after($text, $VarSeparator)&quot;/>
                &lt;/xsl:variable>

                &lt;ns6:Code>
                &lt;xsl:value-of select=&quot;normalize-space(substring-before($Cdval22, $VarSeparator))&quot;/>
                &lt;/ns6:Code>

                &lt;xsl:variable name=&quot;Cdval&quot;>
                &lt;xsl:value-of select=&quot;substring-after($Cdval22, $VarSeparator)&quot;/>
                &lt;/xsl:variable>

                &lt;ns6:Narrative2>
                &lt;xsl:value-of select=&quot;normalize-space(substring-before($Cdval, $VarSeparator))&quot;/>
                &lt;/ns6:Narrative2>

                &lt;/ns6:Lines2to6>
            &lt;/xsl:when>
           &lt;xsl:when test=&quot;((contains($text, $LineSeparator))) &quot;>

              &lt;ns6:Lines2to6>
                &lt;ns6:Narrative1>
                &lt;xsl:value-of select=&quot;normalize-space(substring-before($text, $VarSeparator))&quot;/>
                &lt;/ns6:Narrative1>

                &lt;xsl:variable name=&quot;Cdval111&quot;>
                &lt;xsl:value-of select=&quot;substring-after($text, $VarSeparator)&quot;/>
                &lt;/xsl:variable>

                &lt;ns6:Code>
                &lt;xsl:value-of select=&quot;normalize-space(substring-before($Cdval111, $VarSeparator))&quot;/>
                &lt;/ns6:Code>

                &lt;xsl:variable name=&quot;Cdval1&quot;>
                &lt;xsl:value-of select=&quot;substring-after($Cdval111, $VarSeparator)&quot;/>
                &lt;/xsl:variable>

                &lt;ns6:Narrative2>
                &lt;xsl:value-of select=&quot;normalize-space(substring-before($Cdval1, $VarSeparator))&quot;/>
                &lt;/ns6:Narrative2>

                &lt;/ns6:Lines2to6>
                &lt;xsl:call-template name=&quot;tokenize6&quot;>
                    &lt;xsl:with-param name=&quot;text&quot; select=&quot;substring-after($text, $LineSeparator)&quot;/>
                &lt;/xsl:call-template>
            &lt;/xsl:when>
        &lt;/xsl:choose>
&lt;/xsl:template>

 &lt;xsl:template name=&quot;tokenize7&quot;>
 &lt;xsl:param name=&quot;text&quot; select=&quot;.&quot;/>
 &lt;xsl:param name=&quot;LineSeparator&quot; select=&quot;'ENDOFFLINE'&quot;/>
 &lt;xsl:param name=&quot;VarSeparator&quot; select=&quot;'ENDOFFVAR'&quot;/>
        &lt;xsl:choose>
		&lt;xsl:when test=&quot;not(string-length($text))&quot;>
		&lt;/xsl:when>
            &lt;xsl:when test=&quot;not(contains($text, $LineSeparator))&quot;>
			&lt;ns6:F71a_2>
			&lt;ns6:F71F>
				&lt;ns6:Currency>
				&lt;xsl:value-of select=&quot;normalize-space(substring-before($text, $VarSeparator))&quot;/>
				&lt;/ns6:Currency>
				
				&lt;xsl:variable name=&quot;Cdval&quot;>
				&lt;xsl:value-of select=&quot;substring-after($text, $VarSeparator)&quot;/>
				&lt;/xsl:variable>
				
				&lt;ns6:Amount>
				&lt;xsl:value-of select=&quot;normalize-space(substring-before($Cdval, $VarSeparator))&quot;/>
				&lt;/ns6:Amount>

                &lt;/ns6:F71F>
				&lt;/ns6:F71a_2>
            &lt;/xsl:when>
           &lt;xsl:when test=&quot;((contains($text, $LineSeparator))) &quot;>
              &lt;ns6:F71a_2>
			  &lt;ns6:F71F>
				&lt;ns6:Currency>
				&lt;xsl:value-of select=&quot;normalize-space(substring-before($text, $VarSeparator))&quot;/>
				&lt;/ns6:Currency>
				
				&lt;xsl:variable name=&quot;Cdval1&quot;>
				&lt;xsl:value-of select=&quot;substring-after($text, $VarSeparator)&quot;/>
				&lt;/xsl:variable>
				
				&lt;ns6:Amount>
				&lt;xsl:value-of select=&quot;normalize-space(substring-before($Cdval1, $VarSeparator))&quot;/>
				&lt;/ns6:Amount>

				&lt;/ns6:F71F>
				&lt;/ns6:F71a_2>
                &lt;xsl:call-template name=&quot;tokenize7&quot;>
                    &lt;xsl:with-param name=&quot;text&quot; select=&quot;substring-after($text, $LineSeparator)&quot;/>
                &lt;/xsl:call-template>
            &lt;/xsl:when>
        &lt;/xsl:choose>
&lt;/xsl:template>

&lt;xsl:param name=&quot;_TIF_MESSAGE_&quot;>&lt;/xsl:param>
&lt;!--The list of Extensions defined by user-->
&lt;xsl:template name=&quot;myFunction&quot;>
  &lt;xsl:param name = &quot;splitups&quot;/>
  &lt;xsl:for-each select=&quot;*&quot;>
  &lt;xsl:variable name=&quot;tag&quot;>
  &lt;xsl:value-of select=&quot;local-name()&quot;>&lt;/xsl:value-of>
  &lt;/xsl:variable>
&lt;xsl:variable name = &quot;checker1&quot; >
&lt;xsl:value-of select =&quot;substring-after($splitups,$tag)&quot;/>
&lt;/xsl:variable>

&lt;xsl:variable name = &quot;checker2&quot;>
 &lt;xsl:value-of select =&quot;string(substring-before($splitups,$tag))&quot;/>
  
  &lt;/xsl:variable> 
  &lt;xsl:choose>
&lt;xsl:when test=&quot;starts-with(substring-after($splitups,$tag),'/') and  MX2MT:com.fiorano.funclet.MXtoMT.endsWith(substring-before($splitups,$tag),'/')='true' &quot;>
    &lt;/xsl:when>
    &lt;xsl:otherwise>
&lt;xsl:value-of select=&quot;'&amp;#xd;&amp;#xa;'&quot;/>
      &lt;xsl:variable name=&quot;tagFullForm&quot;>
  &lt;xsl:value-of select=&quot;MX2MT:com.fiorano.funclet.MXtoMT.fullFormGenerator(local-name())&quot;>&lt;/xsl:value-of>
&lt;/xsl:variable>&lt;xsl:if test=&quot;count(child::*)>0&quot;>-----------------Start of &lt;xsl:value-of select=&quot;$tagFullForm&quot;/> Details-----------------&lt;/xsl:if>&lt;xsl:if test=&quot;count(child::*)=0&quot;>&lt;xsl:value-of select=&quot;'&amp;#xd;&amp;#xa;'&quot;/>&lt;xsl:value-of select=&quot;$tagFullForm&quot;/>:&lt;/xsl:if>&lt;xsl:call-template name=&quot;myFunction&quot; >&lt;xsl:with-param name = &quot;splitups&quot; select=&quot;$splitups&quot;/>&lt;/xsl:call-template>&lt;xsl:if test = &quot;count(child::*)=0&quot;>&lt;xsl:value-of select=&quot;.&quot;/>
&lt;/xsl:if>
&lt;xsl:if test=&quot;count(child::*)>0&quot;>&lt;xsl:value-of select=&quot;'&amp;#xd;&amp;#xa;'&quot;/>-----------------End of &lt;xsl:value-of select=&quot;$tagFullForm&quot;/> Details-----------------&lt;xsl:value-of select=&quot;'&amp;#xd;&amp;#xa;'&quot;/>&lt;/xsl:if>
    &lt;/xsl:otherwise>                
&lt;/xsl:choose> 
&lt;/xsl:for-each>
  &lt;/xsl:template>
   &lt;xsl:template name=&quot;dynamicAdditionalData&quot;>
  &lt;xsl:param name=&quot;roottag&quot;/>
  &lt;xsl:param name=&quot;splitups&quot;/>
  &lt;xsl:variable name=&quot;AdditionalData&quot;>
    &lt;xsl:for-each select=&quot;$roottag&quot;>
      &lt;xsl:variable name=&quot;tagFullForm&quot;>
        &lt;xsl:value-of select=&quot;MX2MT:com.fiorano.funclet.MXtoMT.fullFormGenerator(local-name())&quot;>&lt;/xsl:value-of>
      &lt;/xsl:variable>
-----------------Start of &lt;xsl:value-of select=&quot;$tagFullForm&quot;/> Details-----------------&lt;xsl:call-template name=&quot;myFunction&quot;>
        &lt;xsl:with-param name=&quot;splitups&quot; select=&quot;$splitups&quot;/>
      &lt;/xsl:call-template>
-----------------End of &lt;xsl:value-of select=&quot;$tagFullForm&quot;/> Details-----------------&lt;/xsl:for-each>
&lt;xsl:value-of select=&quot;'&amp;#xd;&amp;#xa;'&quot;/>
&lt;xsl:value-of select=&quot;'&amp;#xd;&amp;#xa;'&quot;/>

  &lt;/xsl:variable>
  &lt;xsl:variable name=&quot;settedString&quot;>
        &lt;xsl:value-of select=&quot;java:_getStringProperty($_TIF_MESSAGE_, 'Additional_Fields')&quot;/>
      &lt;/xsl:variable>
  &lt;xsl:variable name=&quot;AdditionalDataWithLimitter&quot;>
    &lt;xsl:choose>
      &lt;xsl:when test=&quot;$settedString !=null or not(normalize-space($settedString)='')&quot;>
        &lt;xsl:value-of select=&quot;(concat($settedString,$AdditionalData))&quot;/>
      &lt;/xsl:when>
      &lt;xsl:otherwise>
        &lt;xsl:value-of select=&quot;$AdditionalData&quot;/>
      &lt;/xsl:otherwise>
    &lt;/xsl:choose>
  &lt;/xsl:variable>
  &lt;xsl:value-of select=&quot;java:_setStringProperty($_TIF_MESSAGE_, 'Additional_Fields',$AdditionalDataWithLimitter)&quot;/>
&lt;/xsl:template></mappermodel:UserXSL>
  <mappermodel:UserXSL index="1" node="OUT_PORT:0,FinMessage:0,Block3:0,F113:0">&lt;xsl:value-of select=&quot;java:_setBooleanProperty($_TIF_MESSAGE_, 'isIncludeAdditionalDetails', '1')&quot;>&lt;/xsl:value-of></mappermodel:UserXSL>
  <mappermodel:UserXSL index="1" node="OUT_PORT:0,FinMessage:0,Block5:0,PAC:0">&lt;xsl:if test=&quot;java:_getBooleanProperty($_TIF_MESSAGE_, 'isIncludeAdditionalDetails')&quot;>
&lt;xsl:variable name=&quot;settedString&quot;>
&lt;xsl:value-of select=&quot;''&quot;/>
&lt;/xsl:variable>
&lt;xsl:variable name=&quot;settedString1&quot;>
&lt;xsl:value-of select=&quot;'//InstrId//EndToEndId//UETR//'&quot;/>
&lt;/xsl:variable>
&lt;xsl:variable name=&quot;settedString2&quot;>
&lt;xsl:value-of select=&quot;'//ClrChanl//Cd//LclInstrm//CtgyPurp//'&quot;/>
&lt;/xsl:variable>
&lt;xsl:variable name=&quot;settedString3&quot;>
&lt;xsl:value-of select=&quot;'//Amt//'&quot;/>
&lt;/xsl:variable>
&lt;xsl:variable name=&quot;settedString4&quot;>
&lt;xsl:value-of select=&quot;'//AnyBIC//'&quot;/>
&lt;/xsl:variable>
&lt;xsl:variable name=&quot;settedString5&quot;>
&lt;xsl:value-of select=&quot;'//Prtry//LEI//PstlAdr//Othr//BrnchId//'&quot;/>
&lt;/xsl:variable>
&lt;xsl:variable name=&quot;settedString6&quot;>
&lt;xsl:value-of select=&quot;'//Prtry//LEI//PstlAdr//Othr//BrnchId//'&quot;/>
&lt;/xsl:variable>
&lt;xsl:variable name=&quot;settedString7&quot;>
&lt;xsl:value-of select=&quot;'//BICFI//ClrSysMmbId//MmbId//'&quot;/>
&lt;/xsl:variable>
&lt;xsl:variable name=&quot;settedString8&quot;>
&lt;xsl:value-of select=&quot;'//IBAN//Id//Cd//'&quot;/>
&lt;/xsl:variable>
&lt;xsl:variable name=&quot;settedString9&quot;>
&lt;xsl:value-of select=&quot;'//BICFI//ClrSysMmbId//MmbId//Nm//TwnNm//Ctry//'&quot;/>
&lt;/xsl:variable>
&lt;xsl:variable name=&quot;settedString10&quot;>
&lt;xsl:value-of select=&quot;'//Tp//Ccy//Nm//Prxy//'&quot;/>
&lt;/xsl:variable>
&lt;xsl:variable name=&quot;settedString11&quot;>
&lt;xsl:value-of select=&quot;'//LEI//AdrTp//Othr//BrnchId//Prtry//'&quot;/>
&lt;/xsl:variable>
&lt;xsl:variable name=&quot;settedString12&quot;>
&lt;xsl:value-of select=&quot;'//InstrInf//'&quot;/>
&lt;/xsl:variable>
&lt;xsl:variable name=&quot;settedString13&quot;>
&lt;xsl:value-of select=&quot;'//Inf//'&quot;/>
&lt;/xsl:variable>
&lt;xsl:variable name=&quot;settedString14&quot;>
&lt;xsl:value-of select=&quot;'//RmtId//'&quot;/>
&lt;/xsl:variable>
&lt;xsl:variable name=&quot;settedString15&quot;>
&lt;xsl:value-of select=&quot;'//BICFI//ClrSysMmbId//MmbId//Nm//'&quot;/>
&lt;/xsl:variable>
&lt;xsl:variable name=&quot;settedString16&quot;>
&lt;xsl:value-of select=&quot;'//BICFI//ClrSysMmbId//MmbId//Nm//Dept//SubDept//StrtNm//BldgNb//BldgNm//Flr//PstBx//Room//PstCd//TwnNm//TwnLctnNm//DstrctNm//CtrySubDvsn//Ctry//AdrLine//Id//'&quot;/>
&lt;/xsl:variable>
&lt;xsl:variable name=&quot;settedString17&quot;>
&lt;xsl:value-of select=&quot;'//Nm//Dept//SubDept//StrtNm//BldgNb//BldgNm//Flr//PstBx//Room//PstCd//TwnNm//TwnLctnNm//DstrctNm//CtrySubDvsn//Ctry//AdrLine//AnyBIC//LEI//CtryOfRes//'&quot;/>
&lt;/xsl:variable>
&lt;xsl:variable name=&quot;settedString18&quot;>
&lt;xsl:value-of select=&quot;'//Nm//TwnNm//Ctry//Id//'&quot;/>
&lt;/xsl:variable>
&lt;xsl:variable name=&quot;settedString19&quot;>
&lt;xsl:value-of select=&quot;'//Ustrd//'&quot;/>
&lt;/xsl:variable>
&lt;xsl:variable name=&quot;settedString20&quot;>
&lt;xsl:value-of select=&quot;'//PmtId//PmtTpInf//IntrBkSttlmAmt//IntrBkSttlmDt//SttlmTmIndctn//SttlmTmReq//InstdAmt//XchgRate//ChrgBr//ChrgsInf//PrvsInstgAgt1//PrvsInstgAgt2//PrvsInstgAgt3//IntrmyAgt1//IntrmyAgt1Acct//IntrmyAgt2//IntrmyAgt3//Dbtr//DbtrAgt//DbtrAgtAcct//Cdtr//CdtrAgt//CdtrAgtAcct//'&quot;/>
&lt;/xsl:variable>
&lt;xsl:call-template name=&quot;dynamicAdditionalData&quot;> 
&lt;xsl:with-param name=&quot;roottag&quot; select = &quot;$document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf&quot; />
&lt;xsl:with-param name = &quot;splitups&quot; select = &quot;$settedString20&quot; />
&lt;/xsl:call-template>
&lt;xsl:call-template name=&quot;dynamicAdditionalData&quot;> 
&lt;xsl:with-param name=&quot;roottag&quot; select = &quot;$document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:PmtId&quot; />
&lt;xsl:with-param name = &quot;splitups&quot; select = &quot;$settedString1&quot; />
&lt;/xsl:call-template>
&lt;xsl:call-template name=&quot;dynamicAdditionalData&quot;>
&lt;xsl:with-param name=&quot;roottag&quot; select = &quot;$document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:PmtTpInf&quot; />
&lt;xsl:with-param name = &quot;splitups&quot; select = &quot;$settedString2&quot; />
&lt;/xsl:call-template>
&lt;xsl:call-template name=&quot;dynamicAdditionalData&quot;>
&lt;xsl:with-param name=&quot;roottag&quot; select = &quot;$document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:ChrgsInf&quot; />
&lt;xsl:with-param name = &quot;splitups&quot; select = &quot;$settedString3&quot; />
&lt;/xsl:call-template>
&lt;xsl:call-template name=&quot;dynamicAdditionalData&quot;>
&lt;xsl:with-param name=&quot;roottag&quot; select = &quot;$document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:PrvsInstgAgt1&quot; />
&lt;xsl:with-param name = &quot;splitups&quot; select = &quot;$settedString15&quot; />
&lt;/xsl:call-template>
&lt;xsl:call-template name=&quot;dynamicAdditionalData&quot;>
&lt;xsl:with-param name=&quot;roottag&quot; select = &quot;$document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:PrvsInstgAgt1Acct&quot; />
&lt;xsl:with-param name = &quot;splitups&quot; select = &quot;$settedString&quot; />
&lt;/xsl:call-template>
&lt;xsl:call-template name=&quot;dynamicAdditionalData&quot;>
&lt;xsl:with-param name=&quot;roottag&quot; select = &quot;$document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:PrvsInstgAgt2&quot; />
&lt;xsl:with-param name = &quot;splitups&quot; select = &quot;$settedString15&quot; />
&lt;/xsl:call-template>
&lt;xsl:call-template name=&quot;dynamicAdditionalData&quot;>
&lt;xsl:with-param name=&quot;roottag&quot; select = &quot;$document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:PrvsInstgAgt2Acct&quot; />
&lt;xsl:with-param name = &quot;splitups&quot; select = &quot;$settedString&quot; />
&lt;/xsl:call-template>
&lt;xsl:call-template name=&quot;dynamicAdditionalData&quot;>
&lt;xsl:with-param name=&quot;roottag&quot; select = &quot;$document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:PrvsInstgAgt3&quot; />
&lt;xsl:with-param name = &quot;splitups&quot; select = &quot;$settedString15&quot; />
&lt;/xsl:call-template>
&lt;xsl:call-template name=&quot;dynamicAdditionalData&quot;>
&lt;xsl:with-param name=&quot;roottag&quot; select = &quot;$document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:PrvsInstgAgt3Acct&quot; />
&lt;xsl:with-param name = &quot;splitups&quot; select = &quot;$settedString&quot; />
&lt;/xsl:call-template>
&lt;xsl:call-template name=&quot;dynamicAdditionalData&quot;>
&lt;xsl:with-param name=&quot;roottag&quot; select = &quot;$document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:InstgAgt&quot; />
&lt;xsl:with-param name = &quot;splitups&quot; select = &quot;$settedString&quot; />
&lt;/xsl:call-template>
&lt;xsl:call-template name=&quot;dynamicAdditionalData&quot;>
&lt;xsl:with-param name=&quot;roottag&quot; select = &quot;$document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:InstdAgt&quot; />
&lt;xsl:with-param name = &quot;splitups&quot; select = &quot;$settedString&quot; />
&lt;/xsl:call-template>
&lt;xsl:call-template name=&quot;dynamicAdditionalData&quot;>
&lt;xsl:with-param name=&quot;roottag&quot; select = &quot;$document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:IntrmyAgt1&quot; />
&lt;xsl:with-param name = &quot;splitups&quot; select = &quot;$settedString15&quot; />
&lt;/xsl:call-template>
&lt;xsl:call-template name=&quot;dynamicAdditionalData&quot;>
&lt;xsl:with-param name=&quot;roottag&quot; select = &quot;$document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:IntrmyAgt1Acct&quot; />
&lt;xsl:with-param name = &quot;splitups&quot; select = &quot;$settedString8&quot; />
&lt;/xsl:call-template>
&lt;xsl:call-template name=&quot;dynamicAdditionalData&quot;>
&lt;xsl:with-param name=&quot;roottag&quot; select = &quot;$document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:IntrmyAgt2&quot; />
&lt;xsl:with-param name = &quot;splitups&quot; select = &quot;$settedString9&quot; />
&lt;/xsl:call-template>
&lt;xsl:call-template name=&quot;dynamicAdditionalData&quot;>
&lt;xsl:with-param name=&quot;roottag&quot; select = &quot;$document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:IntrmyAgt2Acct&quot; />
&lt;xsl:with-param name = &quot;splitups&quot; select = &quot;$settedString&quot; />
&lt;/xsl:call-template>
&lt;xsl:call-template name=&quot;dynamicAdditionalData&quot;>
&lt;xsl:with-param name=&quot;roottag&quot; select = &quot;$document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:IntrmyAgt3&quot; />
&lt;xsl:with-param name = &quot;splitups&quot; select = &quot;$settedString9&quot; />
&lt;/xsl:call-template>
&lt;xsl:call-template name=&quot;dynamicAdditionalData&quot;>
&lt;xsl:with-param name=&quot;roottag&quot; select = &quot;$document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:IntrmyAgt3Acct&quot; />
&lt;xsl:with-param name = &quot;splitups&quot; select = &quot;$settedString&quot; />
&lt;/xsl:call-template>
&lt;xsl:call-template name=&quot;dynamicAdditionalData&quot;>
&lt;xsl:with-param name=&quot;roottag&quot; select = &quot;$document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:InitgPty&quot; />
&lt;xsl:with-param name = &quot;splitups&quot; select = &quot;$settedString&quot; />
&lt;/xsl:call-template>
&lt;xsl:call-template name=&quot;dynamicAdditionalData&quot;>
&lt;xsl:with-param name=&quot;roottag&quot; select = &quot;$document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Dbtr&quot; />
&lt;xsl:with-param name = &quot;splitups&quot; select = &quot;$settedString4&quot; />
&lt;/xsl:call-template>
&lt;xsl:call-template name=&quot;dynamicAdditionalData&quot;>
&lt;xsl:with-param name=&quot;roottag&quot; select = &quot;$document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:DbtrAcct&quot; />
&lt;xsl:with-param name = &quot;splitups&quot; select = &quot;$settedString&quot; />
&lt;/xsl:call-template>
&lt;xsl:call-template name=&quot;dynamicAdditionalData&quot;>
&lt;xsl:with-param name=&quot;roottag&quot; select = &quot;$document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:DbtrAgt&quot; />
&lt;xsl:with-param name = &quot;splitups&quot; select = &quot;$settedString7&quot; />
&lt;/xsl:call-template>
&lt;xsl:call-template name=&quot;dynamicAdditionalData&quot;>
&lt;xsl:with-param name=&quot;roottag&quot; select = &quot;$document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:DbtrAgtAcct&quot; />
&lt;xsl:with-param name = &quot;splitups&quot; select = &quot;$settedString8&quot; />
&lt;/xsl:call-template>
&lt;xsl:call-template name=&quot;dynamicAdditionalData&quot;>
&lt;xsl:with-param name=&quot;roottag&quot; select = &quot;$document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:CdtrAgt&quot; />
&lt;xsl:with-param name = &quot;splitups&quot; select = &quot;$settedString16&quot; />
&lt;/xsl:call-template>
&lt;xsl:call-template name=&quot;dynamicAdditionalData&quot;>
&lt;xsl:with-param name=&quot;roottag&quot; select = &quot;$document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:CdtrAgtAcct&quot; />
&lt;xsl:with-param name = &quot;splitups&quot; select = &quot;$settedString8&quot; />
&lt;/xsl:call-template>
&lt;xsl:call-template name=&quot;dynamicAdditionalData&quot;>
&lt;xsl:with-param name=&quot;roottag&quot; select = &quot;$document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Cdtr&quot; />
&lt;xsl:with-param name = &quot;splitups&quot; select = &quot;$settedString17&quot; />
&lt;/xsl:call-template>
&lt;xsl:call-template name=&quot;dynamicAdditionalData&quot;>
&lt;xsl:with-param name=&quot;roottag&quot; select = &quot;$document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:CdtrAcct&quot; />
&lt;xsl:with-param name = &quot;splitups&quot; select = &quot;$settedString8&quot; />
&lt;/xsl:call-template>
&lt;xsl:call-template name=&quot;dynamicAdditionalData&quot;>
&lt;xsl:with-param name=&quot;roottag&quot; select = &quot;$document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:UltmtCdtr&quot; />
&lt;xsl:with-param name = &quot;splitups&quot; select = &quot;$settedString18&quot; />
&lt;/xsl:call-template>
&lt;xsl:call-template name=&quot;dynamicAdditionalData&quot;>
&lt;xsl:with-param name=&quot;roottag&quot; select = &quot;$document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:InstrForNxtAgt&quot; />
&lt;xsl:with-param name = &quot;splitups&quot; select = &quot;$settedString12&quot; />
&lt;/xsl:call-template>
&lt;xsl:call-template name=&quot;dynamicAdditionalData&quot;>
&lt;xsl:with-param name=&quot;roottag&quot; select = &quot;$document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:RgltryRptg&quot; />
&lt;xsl:with-param name = &quot;splitups&quot; select = &quot;$settedString13&quot; />
&lt;/xsl:call-template>
&lt;xsl:call-template name=&quot;dynamicAdditionalData&quot;>
&lt;xsl:with-param name=&quot;roottag&quot; select = &quot;$document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:RltdRmtInf&quot; />
&lt;xsl:with-param name = &quot;splitups&quot; select = &quot;$settedString14&quot; />
&lt;/xsl:call-template>
&lt;xsl:call-template name=&quot;dynamicAdditionalData&quot;>
&lt;xsl:with-param name=&quot;roottag&quot; select = &quot;$document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:RmtInf&quot; />
&lt;xsl:with-param name = &quot;splitups&quot; select = &quot;$settedString19&quot; />
&lt;/xsl:call-template>
&lt;/xsl:if></mappermodel:UserXSL>
  <mappermodel:UserXSL index="1" node="OUT_PORT:0,FinMessage:0,Block4:0,Document:0,MT103:0,F52a:0,[Choice]:0,F52D:0,NameAndAddress:0,[ONE MANY]:0,Line:0">&lt;xsl:value-of select=&quot;java:_setStringProperty($_TIF_MESSAGE_, 'Truncated_Fields', concat($TruncTemp,'F52D_NameAndAddress_LineENDOFFIELDTAG',substring-after($if4,'ENDOFOUTPUT'),'ENDOFTRUNCATEDFIELD'))&quot;/></mappermodel:UserXSL>
  <mappermodel:UserXSL index="1" node="OUT_PORT:0,FinMessage:0,Block4:0,Document:0,MT103:0,F54a:0,[Choice]:0,F54D:0,NameAndAddress:0,[ONE MANY]:0,Line:0">&lt;xsl:value-of select=&quot;java:_setStringProperty($_TIF_MESSAGE_, 'Truncated_Fields', concat($TruncTemp,'F54D_NameAndAddress_LineENDOFFIELDTAG',substring-after($if4,'ENDOFOUTPUT'),'ENDOFTRUNCATEDFIELD'))&quot;/></mappermodel:UserXSL>
  <mappermodel:UserXSL index="1" node="OUT_PORT:0,FinMessage:0,Block4:0,Document:0,MT103:0,F56a:0,[Choice]:0,F56D:0,NameAndAddress:0,[ONE MANY]:0,Line:0">&lt;xsl:value-of select=&quot;java:_setStringProperty($_TIF_MESSAGE_, 'Truncated_Fields', concat($TruncTemp,'F56D_NameAndAddress_LineENDOFFIELDTAG',substring-after($if4,'ENDOFOUTPUT'),'ENDOFTRUNCATEDFIELD'))&quot;/></mappermodel:UserXSL>
  <mappermodel:UserXSL index="1" node="OUT_PORT:0,FinMessage:0,Block4:0,Document:0,MT103:0,F57a:0,[Choice]:0,F57D:0,NameAndAddress:0,[ONE MANY]:0,Line:0">&lt;xsl:value-of select=&quot;java:_setStringProperty($_TIF_MESSAGE_, 'Truncated_Fields', concat($TruncTemp,'F57D_NameAndAddress_LineENDOFFIELDTAG',substring-after($if4,'ENDOFOUTPUT'),'ENDOFTRUNCATEDFIELD'))&quot;/></mappermodel:UserXSL>
  <mappermodel:UserXSL index="1" node="OUT_PORT:0,FinMessage:0,Block4:0,Document:0,MT103:0,F50a:0,[Choice]:0,F50F:0,NameAndAddress:0,[ONE MANY]:0,Lines2to5:0">&lt;xsl:value-of select=&quot;java:_setStringProperty($_TIF_MESSAGE_, 'Truncated_Fields', concat($TruncTemp,'F50F_NameAndAddress_Lines2to5ENDOFFIELDTAG',substring-after($ResultantMTAddressSplit,'ENDOFOUTPUT'),'ENDOFTRUNCATEDFIELD'))&quot;/></mappermodel:UserXSL>
  <mappermodel:UserXSL index="0" node="OUT_PORT:0,FinMessage:0,Block4:0,Document:0,MT103:0,F70a:0,[Choice]:0,F70:0,Narrative:0,[ONE MANY]:0,Line:0">&lt;xsl:variable name=&quot;F70&quot;>
	&lt;xsl:value-of select=&quot;MX2MT:com.fiorano.funclet.MXtoMT.MX_To_MTRemittanceInformationwithTruncate(string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:RmtInf),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:RltdRmtInf),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:UltmtCdtr),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:UltmtDbtr),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Purp),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Purp/ns3:Prtry),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:PmtId/ns3:EndToEndId),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:RmtInf/ns3:Ustrd),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:RltdRmtInf/ns3:RmtId),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:RmtInf/ns3:Strd),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:UltmtCdtr/ns3:Nm),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:UltmtCdtr/ns3:PstlAdr/ns3:Ctry),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:UltmtCdtr/ns3:PstlAdr/ns3:TwnNm),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:UltmtCdtr/ns3:Id/ns3:OrgId/ns3:Othr/ns3:Id),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:UltmtCdtr/ns3:Id/ns3:PrvtId/ns3:Othr/ns3:Id),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:UltmtDbtr/ns3:Nm),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:UltmtDbtr/ns3:PstlAdr/ns3:Ctry),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:UltmtDbtr/ns3:PstlAdr/ns3:TwnNm),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:UltmtDbtr/ns3:Id/ns3:OrgId/ns3:Othr/ns3:Id),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:UltmtDbtr/ns3:Id/ns3:PrvtId/ns3:Othr/ns3:Id))&quot;>&lt;/xsl:value-of>
&lt;/xsl:variable>

&lt;xsl:call-template name=&quot;tokenizeLine&quot;>
	&lt;xsl:with-param name=&quot;text&quot; select=&quot;substring-before($F70,'ENDOFOUTPUT')&quot;/>
	&lt;xsl:with-param name=&quot;separator&quot; select=&quot;$LineSeparator&quot;/>
&lt;/xsl:call-template></mappermodel:UserXSL>
  <mappermodel:UserXSL index="1" node="OUT_PORT:0,FinMessage:0,Block4:0,Document:0,MT103:0,F70a:0,[Choice]:0,F70:0,Narrative:0,[ONE MANY]:0,Line:0">&lt;xsl:variable name=&quot;TruncTemp&quot;>
	&lt;xsl:value-of select=&quot;java:_getStringProperty($_TIF_MESSAGE_, 'Truncated_Fields')&quot;>&lt;/xsl:value-of>
&lt;/xsl:variable>
&lt;xsl:value-of select=&quot;java:_setStringProperty($_TIF_MESSAGE_, 'Truncated_Fields', concat($TruncTemp,'F70_LineENDOFFIELDTAG',substring-after($F70,'ENDOFOUTPUT'),'ENDOFTRUNCATEDFIELD'))&quot;/></mappermodel:UserXSL>
  <mappermodel:UserXSL index="1" node="OUT_PORT:0,FinMessage:0,Block4:0,Document:0,MT103:0,F50a:0,[Choice]:0,F50F:0,PartyIdentifier:0,[Choice]:0,Account:0">&lt;xsl:variable name=&quot;LineSeparator&quot;>
&lt;xsl:value-of select=&quot;'ENDOFFLINE'&quot;/>
&lt;/xsl:variable>

&lt;xsl:variable name=&quot;VariableSeparator&quot;>
  &lt;xsl:value-of select=&quot;'ENDOFFVAR'&quot;/>
&lt;/xsl:variable>

&lt;xsl:variable name=&quot;AppendedPostalAddress&quot;>
&lt;xsl:for-each select=&quot;$document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Dbtr/ns3:PstlAdr/ns3:AdrLine&quot;>
&lt;xsl:value-of select=&quot;.&quot; />
 &lt;xsl:value-of select=&quot;$LineSeparator&quot;/> 
&lt;/xsl:for-each>
&lt;/xsl:variable>

&lt;xsl:variable name=&quot;OrgIdentifierTable&quot;>
&lt;xsl:for-each select=&quot;$document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Dbtr/ns3:Id/ns3:OrgId/ns3:Othr&quot;>
    &lt;xsl:value-of select=&quot;./ns3:Id&quot;/>
    &lt;xsl:value-of select=&quot;$VariableSeparator&quot;/>
    &lt;xsl:value-of select=&quot;./ns3:SchmeNm/ns3:Cd&quot;/>
    &lt;xsl:value-of select=&quot;$VariableSeparator&quot;/>
    &lt;xsl:value-of select=&quot;./ns3:Issr&quot;/>
    &lt;xsl:value-of select=&quot;$VariableSeparator&quot;/>
    &lt;xsl:value-of select=&quot;$LineSeparator&quot;/>
  &lt;/xsl:for-each>
&lt;/xsl:variable>

&lt;xsl:variable name=&quot;PrivateOrgIdentifierTable&quot;>
&lt;xsl:for-each select=&quot;$document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Dbtr/ns3:Id/ns3:PrvtId/ns3:Othr&quot;>
    &lt;xsl:value-of select=&quot;./ns3:Id&quot;/>
    &lt;xsl:value-of select=&quot;$VariableSeparator&quot;/>
    &lt;xsl:value-of select=&quot;./ns3:SchmeNm/ns3:Cd&quot;/>
    &lt;xsl:value-of select=&quot;$VariableSeparator&quot;/>
    &lt;xsl:value-of select=&quot;./ns3:Issr&quot;/>
    &lt;xsl:value-of select=&quot;$VariableSeparator&quot;/>
    &lt;xsl:value-of select=&quot;$LineSeparator&quot;/>
  &lt;/xsl:for-each>
&lt;/xsl:variable>

&lt;xsl:variable name=&quot;ResultantMTAddressTable&quot;>
&lt;xsl:choose>
 &lt;xsl:when test=&quot;(not(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Dbtr/ns3:Id/ns3:OrgId/ns3:AnyBIC)) and not(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:DbtrAcct/ns3:Id/ns3:Othr/ns3:Id)) and not(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Dbtr/ns3:Id/ns3:PrvtId/ns3:Othr/ns3:Id)) and not(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Dbtr/ns3:Id/ns3:OrgId/ns3:Othr/ns3:Id)) and (string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Dbtr/ns3:PstlAdr/ns3:AdrLine)) and (('true')=(MX2MT:com.fiorano.funclet.MXtoMT.MX_To_MTAddressLineType(string($AppendedPostalAddress),string($LineSeparator)))))&quot;>
                          &lt;xsl:value-of select=&quot;'NOTPROVIDEDENDOFOUTPUT'&quot;>&lt;/xsl:value-of>
                        &lt;/xsl:when>
            
             &lt;xsl:when test=&quot;(not(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Dbtr/ns3:Id/ns3:OrgId/ns3:AnyBIC)) and not(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:DbtrAcct/ns3:Id/ns3:Othr/ns3:Id)) and not(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Dbtr/ns3:Id/ns3:PrvtId/ns3:Othr/ns3:Id)) and not(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Dbtr/ns3:Id/ns3:OrgId/ns3:Othr/ns3:Id)) and (string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Dbtr/ns3:Nm)) and (not(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Dbtr/ns3:PstlAdr/ns3:AdrLine))))&quot;>
             &lt;xsl:value-of select=&quot;'NOTPROVIDEDENDOFOUTPUT'&quot;>&lt;/xsl:value-of>
                        &lt;/xsl:when>
            
             &lt;xsl:when test=&quot;(not(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Dbtr/ns3:Id/ns3:OrgId/ns3:AnyBIC)) and not(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:DbtrAcct/ns3:Id/ns3:Othr/ns3:Id)) and not(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Dbtr/ns3:Id/ns3:PrvtId/ns3:Othr/ns3:Id)) and not(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Dbtr/ns3:Id/ns3:OrgId/ns3:Othr/ns3:Id)) and (string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Dbtr/ns3:PstlAdr/ns3:Ctry)))&quot;>
             &lt;xsl:value-of select=&quot;'NOTPROVIDEDENDOFOUTPUT'&quot;>&lt;/xsl:value-of>
                        &lt;/xsl:when>
                        
         &lt;xsl:when test=&quot;(not(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Dbtr/ns3:Id/ns3:OrgId/ns3:AnyBIC)) and (string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:DbtrAcct/ns3:Id/ns3:Othr/ns3:Id)) and (string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Dbtr/ns3:PstlAdr/ns3:AdrLine)) and (('true')=(MX2MT:com.fiorano.funclet.MXtoMT.MX_To_MTAddressLineType(string($AppendedPostalAddress),string($LineSeparator)))))&quot;>
                           &lt;xsl:value-of select=&quot;MX2MT:com.fiorano.funclet.MXtoMT.mx2MTAccountwithTruncate(string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:DbtrAcct/ns3:Id/ns3:IBAN),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:DbtrAcct/ns3:Id/ns3:Othr/ns3:Id),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:DbtrAcct/ns3:Id/ns3:Othr/ns3:SchmeNm/ns3:Cd))&quot;>&lt;/xsl:value-of>
                        &lt;/xsl:when>
            
             &lt;xsl:when test=&quot;(not(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Dbtr/ns3:Id/ns3:OrgId/ns3:AnyBIC)) and (string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:DbtrAcct/ns3:Id/ns3:Othr/ns3:Id)) and (string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Dbtr/ns3:Nm)) and (not(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Dbtr/ns3:PstlAdr/ns3:AdrLine))))&quot;>
             &lt;xsl:value-of select=&quot;MX2MT:com.fiorano.funclet.MXtoMT.mx2MTAccountwithTruncate(string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:DbtrAcct/ns3:Id/ns3:IBAN),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:DbtrAcct/ns3:Id/ns3:Othr/ns3:Id),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:DbtrAcct/ns3:Id/ns3:Othr/ns3:SchmeNm/ns3:Cd))&quot;>&lt;/xsl:value-of>
                        &lt;/xsl:when>
            
             &lt;xsl:when test=&quot;(not(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Dbtr/ns3:Id/ns3:OrgId/ns3:AnyBIC)) and (string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:DbtrAcct/ns3:Id/ns3:Othr/ns3:Id)) and (string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Dbtr/ns3:PstlAdr/ns3:Ctry)))&quot;>
             &lt;xsl:value-of select=&quot;MX2MT:com.fiorano.funclet.MXtoMT.mx2MTAccountwithTruncate(string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:DbtrAcct/ns3:Id/ns3:IBAN),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:DbtrAcct/ns3:Id/ns3:Othr/ns3:Id),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:DbtrAcct/ns3:Id/ns3:Othr/ns3:SchmeNm/ns3:Cd))&quot;>&lt;/xsl:value-of>
                        &lt;/xsl:when>
            
               &lt;xsl:when test=&quot;(not(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Dbtr/ns3:Id/ns3:OrgId/ns3:AnyBIC)) and (not(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:DbtrAcct/ns3:Id/ns3:IBAN))) and (not(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:DbtrAcct/ns3:Id/ns3:Othr/ns3:Id))) and ((string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Dbtr/ns3:Id/ns3:OrgId/ns3:Othr/ns3:Id)) or (string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Dbtr/ns3:Id/ns3:PrvtId/ns3:Othr/ns3:Id))) and (string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Dbtr/ns3:PstlAdr/ns3:AdrLine)) and (('true')=(MX2MT:com.fiorano.funclet.MXtoMT.MX_To_MTAddressLineType(string($AppendedPostalAddress),string($LineSeparator)))))&quot;>
                           &lt;xsl:value-of select=&quot;concat(MX2MT:com.fiorano.funclet.MXtoMT.MX_To_MTFATFIdentification_MTAccountVal(string($OrgIdentifierTable),string($PrivateOrgIdentifierTable),string($LineSeparator),string($VariableSeparator),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Dbtr/ns3:PstlAdr/ns3:Ctry),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Dbtr/ns3:CtryOfRes)),'ENDOFOUTPUT')&quot;/>
                        &lt;/xsl:when>
            
             &lt;xsl:when test=&quot;(not(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Dbtr/ns3:Id/ns3:OrgId/ns3:AnyBIC)) and (not(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:DbtrAcct/ns3:Id/ns3:IBAN))) and (not(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:DbtrAcct/ns3:Id/ns3:Othr/ns3:Id))) and ((string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Dbtr/ns3:Id/ns3:OrgId/ns3:Othr/ns3:Id)) or (string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Dbtr/ns3:Id/ns3:PrvtId/ns3:Othr/ns3:Id))) and (string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Dbtr/ns3:Nm)) and (not(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Dbtr/ns3:PstlAdr/ns3:AdrLine))))&quot;>
            &lt;xsl:value-of select=&quot;concat(MX2MT:com.fiorano.funclet.MXtoMT.MX_To_MTFATFIdentification_MTAccountVal(string($OrgIdentifierTable),string($PrivateOrgIdentifierTable),string($LineSeparator),string($VariableSeparator),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Dbtr/ns3:PstlAdr/ns3:Ctry),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Dbtr/ns3:PstlAdr/ns3:Ctry)),'ENDOFOUTPUT')&quot;/>
                        &lt;/xsl:when>
            
             &lt;xsl:when test=&quot;(not(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Dbtr/ns3:Id/ns3:OrgId/ns3:AnyBIC)) and (not(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:DbtrAcct/ns3:Id/ns3:IBAN))) and (not(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:DbtrAcct/ns3:Id/ns3:Othr/ns3:Id))) and ((string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Dbtr/ns3:Id/ns3:OrgId/ns3:Othr/ns3:Id)) or (string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Dbtr/ns3:Id/ns3:PrvtId/ns3:Othr/ns3:Id))) and (string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Dbtr/ns3:CtryOfRes)))&quot;>
            &lt;xsl:value-of select=&quot;concat(MX2MT:com.fiorano.funclet.MXtoMT.MX_To_MTFATFIdentification_MTAccountVal(string($OrgIdentifierTable),string($PrivateOrgIdentifierTable),string($LineSeparator),string($VariableSeparator),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Dbtr/ns3:PstlAdr/ns3:Ctry),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Dbtr/ns3:CtryOfRes)),'ENDOFOUTPUT')&quot;/>
                        &lt;/xsl:when>
                
      
&lt;/xsl:choose>
&lt;/xsl:variable>
&lt;xsl:value-of select=&quot;normalize-space(substring-before($ResultantMTAddressTable,'ENDOFOUTPUT'))&quot;/>
&lt;xsl:variable name=&quot;TruncTemp&quot;>
  &lt;xsl:value-of select=&quot;java:_getStringProperty($_TIF_MESSAGE_, 'Truncated_Fields')&quot;/>
&lt;/xsl:variable>

&lt;xsl:value-of select=&quot;java:_setStringProperty($_TIF_MESSAGE_, 'Truncated_Fields', concat($TruncTemp,'F50F_Account_ENDOFFIELDTAG',substring-after($ResultantMTAddressTable,'ENDOFOUTPUT'),'ENDOFTRUNCATEDFIELD'))&quot;/></mappermodel:UserXSL>
  <mappermodel:UserXSL index="1" node="OUT_PORT:0,FinMessage:0,Block4:0,Document:0,MT103:0,F50a:0,[Choice]:0,F50K:0,Account:0">&lt;xsl:variable name=&quot;LineSeparator&quot;>
	&lt;xsl:value-of select=&quot;'ENDOFFLINE'&quot;/>
&lt;/xsl:variable>
&lt;xsl:variable name=&quot;VariableSeparator&quot;>
	&lt;xsl:value-of select=&quot;'ENDOFFVAR'&quot;/>
&lt;/xsl:variable>
&lt;xsl:variable name=&quot;AppendedPostalAddress&quot;>
	&lt;xsl:for-each select=&quot;$document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Dbtr/ns3:PstlAdr/ns3:AdrLine&quot;>
		&lt;xsl:value-of select=&quot;.&quot;/>
		&lt;xsl:value-of select=&quot;$LineSeparator&quot;/>
	&lt;/xsl:for-each>
&lt;/xsl:variable>

&lt;xsl:variable name=&quot;ResultantMTAddressTable&quot;>
&lt;xsl:choose>

		 &lt;xsl:when test=&quot;(not(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Dbtr/ns3:Id/ns3:OrgId/ns3:AnyBIC)) and (string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Dbtr/ns3:PstlAdr/ns3:AdrLine)) and (('true')=(MXToMT:com.fiorano.funclet.MXtoMT.MX_To_MTAddressLineType(string($AppendedPostalAddress),string($LineSeparator)))))&quot;>
		 &lt;xsl:value-of select=&quot;'ENDOFOUTPUT'&quot;/>
		&lt;/xsl:when>
		&lt;xsl:when test=&quot;(not(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Dbtr/ns3:Id/ns3:OrgId/ns3:AnyBIC)) and (string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Dbtr/ns3:Nm)) and (not(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Dbtr/ns3:PstlAdr/ns3:AdrLine))))&quot;>
			&lt;xsl:value-of select=&quot;'ENDOFOUTPUT'&quot;/>
		&lt;/xsl:when>
		
		&lt;xsl:when test=&quot;(not(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Dbtr/ns3:Id/ns3:OrgId/ns3:AnyBIC)) and (string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Dbtr/ns3:PstlAdr/ns3:Ctry)))&quot;>
			&lt;xsl:value-of select=&quot;'ENDOFOUTPUT'&quot;/>
		&lt;/xsl:when>
		
		&lt;xsl:when test=&quot;((not(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Dbtr/ns3:Id/ns3:OrgId/ns3:AnyBIC))) and ((string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:DbtrAcct/ns3:Id/ns3:Othr/ns3:Id)) or (string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:DbtrAcct/ns3:Id/ns3:IBAN))))&quot;>
			&lt;xsl:value-of select=&quot;MXToMT:com.fiorano.funclet.MXtoMT.mx2MTAccountwithTruncate(string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:DbtrAcct/ns3:Id/ns3:IBAN),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:DbtrAcct/ns3:Id/ns3:Othr/ns3:Id),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:DbtrAcct/ns3:Id/ns3:Othr/ns3:SchmeNm/ns3:Cd))&quot;>&lt;/xsl:value-of>
                      &lt;/xsl:when>
                    &lt;/xsl:choose>
                    &lt;/xsl:variable>
&lt;xsl:value-of select=&quot;normalize-space(substring-before($ResultantMTAddressTable,'ENDOFOUTPUT'))&quot;/>
&lt;xsl:variable name=&quot;TruncTemp&quot;>
  &lt;xsl:value-of select=&quot;java:_getStringProperty($_TIF_MESSAGE_, 'Truncated_Fields')&quot;/>
&lt;/xsl:variable>

&lt;xsl:value-of select=&quot;java:_setStringProperty($_TIF_MESSAGE_, 'Truncated_Fields', concat($TruncTemp,'F50K_Account_ENDOFFIELDTAG',substring-after($ResultantMTAddressTable,'ENDOFOUTPUT'),'ENDOFTRUNCATEDFIELD'))&quot;/></mappermodel:UserXSL>
  <mappermodel:UserXSL index="0" node="OUT_PORT:0,FinMessage:0,Block4:0,Document:0,MT103:0,F50a:0,[Choice]:0,F50K:0,NameAndAddress:0,[ONE MANY]:0,Line:0">&lt;xsl:variable name=&quot;LineSeparator&quot;>
	&lt;xsl:value-of select=&quot;'ENDOFLINE'&quot;/>
&lt;/xsl:variable>
&lt;xsl:variable name=&quot;VariableSeparator&quot;>
	&lt;xsl:value-of select=&quot;'ENDOFFVAR'&quot;/>
&lt;/xsl:variable>
&lt;xsl:variable name=&quot;AppendedPostalAddress&quot;>
	&lt;xsl:for-each select=&quot;$document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Dbtr/ns3:PstlAdr/ns3:AdrLine&quot;>
		&lt;xsl:value-of select=&quot;.&quot;/>
		&lt;xsl:value-of select=&quot;$LineSeparator&quot;/>
	&lt;/xsl:for-each>
&lt;/xsl:variable>

&lt;xsl:variable name=&quot;ResultantMTAddressTable&quot;>
&lt;xsl:choose>

		 &lt;xsl:when test=&quot;(not(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Dbtr/ns3:Id/ns3:OrgId/ns3:AnyBIC)) and (string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Dbtr/ns3:PstlAdr/ns3:AdrLine)) and (('true')=(MXToMT:com.fiorano.funclet.MXtoMT.MX_To_MTAddressLineType(string($AppendedPostalAddress),string($LineSeparator)))))&quot;>
		 &lt;xsl:value-of select=&quot;'ENDOFOUTPUT'&quot;/>
		&lt;/xsl:when>
		&lt;xsl:when test=&quot;(not(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Dbtr/ns3:Id/ns3:OrgId/ns3:AnyBIC)) and (string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Dbtr/ns3:Nm)) and (not(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Dbtr/ns3:PstlAdr/ns3:AdrLine))))&quot;>
			&lt;xsl:value-of select=&quot;'ENDOFOUTPUT'&quot;/>
		&lt;/xsl:when>
		
		&lt;xsl:when test=&quot;(not(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Dbtr/ns3:Id/ns3:OrgId/ns3:AnyBIC)) and (string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Dbtr/ns3:PstlAdr/ns3:Ctry)))&quot;>
			&lt;xsl:value-of select=&quot;'ENDOFOUTPUT'&quot;/>
		&lt;/xsl:when>
		
		&lt;xsl:when test=&quot;((not(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Dbtr/ns3:Id/ns3:OrgId/ns3:AnyBIC))) and (string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Dbtr/ns3:PstlAdr/ns3:AdrLine)))&quot;>
			&lt;xsl:value-of select=&quot;MXToMT:com.fiorano.funclet.MXtoMT.MX_To_MTPartyNameAndUnstructuredAddresswithTruncate(string($AppendedPostalAddress),string($LineSeparator),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Dbtr/ns3:Nm))&quot;/>
		&lt;/xsl:when>
		
		&lt;xsl:when test=&quot;((not(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Dbtr/ns3:Id/ns3:OrgId/ns3:AnyBIC))) and not(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Dbtr/ns3:PstlAdr/ns3:AdrLine)) and (string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:Dbtr)))&quot;>
			&lt;xsl:value-of select=&quot;'NOTPROVIDEDENDOFOUTPUT'&quot;/>
		&lt;/xsl:when>
		&lt;/xsl:choose>
&lt;/xsl:variable>


&lt;xsl:call-template name=&quot;tokenizeLine&quot;>
	&lt;xsl:with-param name=&quot;text&quot; select=&quot;substring-before($ResultantMTAddressTable,'ENDOFOUTPUT')&quot;/>
&lt;/xsl:call-template>
 &lt;xsl:variable name=&quot;TruncTemp&quot;>
  &lt;xsl:value-of select=&quot;java:_getStringProperty($_TIF_MESSAGE_, 'Truncated_Fields')&quot;/>
&lt;/xsl:variable></mappermodel:UserXSL>
  <mappermodel:UserXSL index="0" node="OUT_PORT:0,FinMessage:0,Block4:0,Document:0,MT103:0,F52a:0,[Choice]:0,F52D:0,NameAndAddress:0,[ONE MANY]:0,Line:0">&lt;xsl:variable name=&quot;AppendedPostalAddress&quot;>
	&lt;xsl:for-each select=&quot;$document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:DbtrAgt/ns3:FinInstnId/ns3:PstlAdr/ns3:AdrLine&quot;>
		&lt;xsl:value-of select=&quot;.&quot;/>
		&lt;xsl:value-of select=&quot;$LineSeparator&quot;/>
	&lt;/xsl:for-each>
&lt;/xsl:variable>

&lt;xsl:variable name=&quot;if4&quot;>
  &lt;xsl:choose>
    &lt;xsl:when test=&quot;string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:DbtrAgt/ns3:FinInstnId/ns3:PstlAdr/ns3:AdrLine)&quot;>
      &lt;xsl:value-of select=&quot;MX2MT:com.fiorano.funclet.MXtoMT.MX_To_MTFinancialInstitutionNameAndUnstructuredAddresswithTruncate(string($AppendedPostalAddress),string($LineSeparator),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:DbtrAgt/ns3:FinInstnId/ns3:Nm))&quot;>&lt;/xsl:value-of>
    &lt;/xsl:when>
    &lt;xsl:when test=&quot;string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:DbtrAgt/ns3:FinInstnId/ns3:PstlAdr/ns3:Ctry)&quot;>
      &lt;xsl:value-of select=&quot;MX2MT:com.fiorano.funclet.MXtoMT.MX_To_MTFinancialInstitutionNameAndStructuredAddresswithTruncate(string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:DbtrAgt/ns3:FinInstnId/ns3:Nm),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:DbtrAgt/ns3:FinInstnId/ns3:PstlAdr/ns3:Dept),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:DbtrAgt/ns3:FinInstnId/ns3:PstlAdr/ns3:SubDept),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:DbtrAgt/ns3:FinInstnId/ns3:PstlAdr/ns3:StrtNm),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:DbtrAgt/ns3:FinInstnId/ns3:PstlAdr/ns3:BldgNb),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:DbtrAgt/ns3:FinInstnId/ns3:PstlAdr/ns3:BldgNm),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:DbtrAgt/ns3:FinInstnId/ns3:PstlAdr/ns3:PstBx),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:DbtrAgt/ns3:FinInstnId/ns3:PstlAdr/ns3:Flr),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:DbtrAgt/ns3:FinInstnId/ns3:PstlAdr/ns3:Room),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:DbtrAgt/ns3:FinInstnId/ns3:PstlAdr/ns3:PstCd),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:DbtrAgt/ns3:FinInstnId/ns3:PstlAdr/ns3:TwnNm),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:DbtrAgt/ns3:FinInstnId/ns3:PstlAdr/ns3:TwnLctnNm),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:DbtrAgt/ns3:FinInstnId/ns3:PstlAdr/ns3:DstrctNm),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:DbtrAgt/ns3:FinInstnId/ns3:PstlAdr/ns3:CtrySubDvsn),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:DbtrAgt/ns3:FinInstnId/ns3:PstlAdr/ns3:Ctry),string($LineSeparator))&quot;>&lt;/xsl:value-of>
    &lt;/xsl:when>
    &lt;xsl:when test=&quot;string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:DbtrAgt/ns3:FinInstnId/ns3:Nm)&quot;>
      &lt;xsl:value-of select=&quot;MX2MT:com.fiorano.funclet.MXtoMT.MX_To_MTFinancialInstitutionNameAndUnstructuredAddresswithTruncate(string($AppendedPostalAddress),string($LineSeparator),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:DbtrAgt/ns3:FinInstnId/ns3:Nm))&quot;>&lt;/xsl:value-of>
    &lt;/xsl:when>
    &lt;xsl:otherwise>
      &lt;xsl:value-of select=&quot;'NOTPROVIDEDENDOFOUTPUT'&quot;>&lt;/xsl:value-of>
    &lt;/xsl:otherwise>
  &lt;/xsl:choose>
&lt;/xsl:variable>
					
&lt;xsl:call-template name=&quot;tokenizeLine&quot;>
	&lt;xsl:with-param name=&quot;text&quot; select=&quot;substring-before($if4,'ENDOFOUTPUT')&quot;/>
	&lt;xsl:with-param name=&quot;separator&quot; select=&quot;$LineSeparator&quot;/>
&lt;/xsl:call-template>
&lt;xsl:variable name=&quot;TruncTemp&quot;>
  &lt;xsl:value-of select=&quot;java:_getStringProperty($_TIF_MESSAGE_, 'Truncated_Fields')&quot;/>
&lt;/xsl:variable></mappermodel:UserXSL>
  <mappermodel:UserXSL index="0" node="OUT_PORT:0,FinMessage:0,Block4:0,Document:0,MT103:0,F53a:0,[Choice]:0,F53D:0,NameAndAddress:0,[ONE MANY]:0,Line:0">&lt;xsl:variable name=&quot;LineSeparator&quot;>
	&lt;xsl:value-of select=&quot;'ENDOFLINE'&quot;/>
&lt;/xsl:variable>
&lt;xsl:variable name=&quot;AppendedPostalAddress&quot;>
	&lt;xsl:for-each select=&quot;$document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:GrpHdr/ns3:SttlmInf/ns3:InstgRmbrsmntAgt/ns3:FinInstnId/ns3:PstlAdr/ns3:AdrLine&quot;>
		&lt;xsl:value-of select=&quot;.&quot;/>
		&lt;xsl:value-of select=&quot;$LineSeparator&quot;/>
	&lt;/xsl:for-each>
&lt;/xsl:variable>

&lt;xsl:variable name=&quot;if4&quot;>
&lt;xsl:choose>
&lt;xsl:when test=&quot;$document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:GrpHdr/ns3:SttlmInf/ns3:SttlmMtd='INGA' or $document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:GrpHdr/ns3:SttlmInf/ns3:SttlmMtd='INDA'&quot;>
&lt;xsl:value-of select=&quot;'ENDOFOUTPUT'&quot;/>
    &lt;/xsl:when>
	&lt;xsl:otherwise>
  &lt;xsl:choose>
    &lt;xsl:when test=&quot;string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:GrpHdr/ns3:SttlmInf/ns3:InstgRmbrsmntAgt/ns3:FinInstnId/ns3:PstlAdr/ns3:AdrLine)&quot;>
      &lt;xsl:value-of select=&quot;MX2MT:com.fiorano.funclet.MXtoMT.MX_To_MTFinancialInstitutionNameAndUnstructuredAddresswithTruncate(string($AppendedPostalAddress),string($LineSeparator),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:GrpHdr/ns3:SttlmInf/ns3:InstgRmbrsmntAgt/ns3:FinInstnId/ns3:Nm))&quot;>&lt;/xsl:value-of>
    &lt;/xsl:when>
    &lt;xsl:when test=&quot;string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:GrpHdr/ns3:SttlmInf/ns3:InstgRmbrsmntAgt/ns3:FinInstnId/ns3:PstlAdr/ns3:Ctry)&quot;>
      &lt;xsl:value-of select=&quot;MX2MT:com.fiorano.funclet.MXtoMT.MX_To_MTFinancialInstitutionNameAndStructuredAddresswithTruncate(string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:GrpHdr/ns3:SttlmInf/ns3:InstgRmbrsmntAgt/ns3:FinInstnId/ns3:Nm),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:GrpHdr/ns3:SttlmInf/ns3:InstgRmbrsmntAgt/ns3:FinInstnId/ns3:PstlAdr/ns3:Dept),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:GrpHdr/ns3:SttlmInf/ns3:InstgRmbrsmntAgt/ns3:FinInstnId/ns3:PstlAdr/ns3:SubDept),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:GrpHdr/ns3:SttlmInf/ns3:InstgRmbrsmntAgt/ns3:FinInstnId/ns3:PstlAdr/ns3:StrtNm),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:GrpHdr/ns3:SttlmInf/ns3:InstgRmbrsmntAgt/ns3:FinInstnId/ns3:PstlAdr/ns3:BldgNb),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:GrpHdr/ns3:SttlmInf/ns3:InstgRmbrsmntAgt/ns3:FinInstnId/ns3:PstlAdr/ns3:BldgNm),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:GrpHdr/ns3:SttlmInf/ns3:InstgRmbrsmntAgt/ns3:FinInstnId/ns3:PstlAdr/ns3:PstBx),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:GrpHdr/ns3:SttlmInf/ns3:InstgRmbrsmntAgt/ns3:FinInstnId/ns3:PstlAdr/ns3:Flr),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:GrpHdr/ns3:SttlmInf/ns3:InstgRmbrsmntAgt/ns3:FinInstnId/ns3:PstlAdr/ns3:Room),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:GrpHdr/ns3:SttlmInf/ns3:InstgRmbrsmntAgt/ns3:FinInstnId/ns3:PstlAdr/ns3:PstCd),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:GrpHdr/ns3:SttlmInf/ns3:InstgRmbrsmntAgt/ns3:FinInstnId/ns3:PstlAdr/ns3:TwnNm),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:GrpHdr/ns3:SttlmInf/ns3:InstgRmbrsmntAgt/ns3:FinInstnId/ns3:PstlAdr/ns3:TwnLctnNm),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:GrpHdr/ns3:SttlmInf/ns3:InstgRmbrsmntAgt/ns3:FinInstnId/ns3:PstlAdr/ns3:DstrctNm),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:GrpHdr/ns3:SttlmInf/ns3:InstgRmbrsmntAgt/ns3:FinInstnId/ns3:PstlAdr/ns3:CtrySubDvsn),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:GrpHdr/ns3:SttlmInf/ns3:InstgRmbrsmntAgt/ns3:FinInstnId/ns3:PstlAdr/ns3:Ctry),string($LineSeparator))&quot;>&lt;/xsl:value-of>
    &lt;/xsl:when>
    &lt;xsl:when test=&quot;string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:GrpHdr/ns3:SttlmInf/ns3:InstgRmbrsmntAgt/ns3:FinInstnId/ns3:Nm)&quot;>
      &lt;xsl:value-of select=&quot;MX2MT:com.fiorano.funclet.MXtoMT.MX_To_MTFinancialInstitutionNameAndUnstructuredAddresswithTruncate(string($AppendedPostalAddress),string($LineSeparator),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:GrpHdr/ns3:SttlmInf/ns3:InstgRmbrsmntAgt/ns3:FinInstnId/ns3:Nm))&quot;>&lt;/xsl:value-of>
    &lt;/xsl:when>
    &lt;xsl:otherwise>
      &lt;xsl:value-of select=&quot;'NOTPROVIDEDENDOFOUTPUT'&quot;>&lt;/xsl:value-of>
    &lt;/xsl:otherwise>
  &lt;/xsl:choose>
  &lt;/xsl:otherwise>
  &lt;/xsl:choose>
&lt;/xsl:variable>
					
&lt;xsl:call-template name=&quot;tokenizeLine&quot;>
	&lt;xsl:with-param name=&quot;text&quot; select=&quot;substring-before($if4,'ENDOFOUTPUT')&quot;/>
	&lt;xsl:with-param name=&quot;separator&quot; select=&quot;$LineSeparator&quot;/>
&lt;/xsl:call-template>
&lt;xsl:variable name=&quot;TruncTemp&quot;>
  &lt;xsl:value-of select=&quot;java:_getStringProperty($_TIF_MESSAGE_, 'Truncated_Fields')&quot;/>
&lt;/xsl:variable></mappermodel:UserXSL>
  <mappermodel:UserXSL index="0" node="OUT_PORT:0,FinMessage:0,Block4:0,Document:0,MT103:0,F54a:0,[Choice]:0,F54D:0,NameAndAddress:0,[ONE MANY]:0,Line:0">&lt;xsl:variable name=&quot;LineSeparator&quot;>
	&lt;xsl:value-of select=&quot;'ENDOFLINE'&quot;/>
&lt;/xsl:variable>
&lt;xsl:variable name=&quot;AppendedPostalAddress&quot;>
	&lt;xsl:for-each select=&quot;$document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:GrpHdr/ns3:SttlmInf/ns3:InstdRmbrsmntAgt/ns3:FinInstnId/ns3:PstlAdr/ns3:AdrLine&quot;>
		&lt;xsl:value-of select=&quot;.&quot;/>
		&lt;xsl:value-of select=&quot;$LineSeparator&quot;/>
	&lt;/xsl:for-each>
&lt;/xsl:variable>

&lt;xsl:variable name=&quot;if4&quot;>
&lt;xsl:choose>
&lt;xsl:when test=&quot;$document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:GrpHdr/ns3:SttlmInf/ns3:SttlmMtd='INGA' or $document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:GrpHdr/ns3:SttlmInf/ns3:SttlmMtd='INDA'&quot;>
&lt;xsl:value-of select=&quot;'ENDOFOUTPUT'&quot;/>
    &lt;/xsl:when>
	&lt;xsl:otherwise>
  &lt;xsl:choose>
    &lt;xsl:when test=&quot;string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:GrpHdr/ns3:SttlmInf/ns3:InstdRmbrsmntAgt/ns3:FinInstnId/ns3:PstlAdr/ns3:AdrLine)&quot;>
      &lt;xsl:value-of select=&quot;MX2MT:com.fiorano.funclet.MXtoMT.MX_To_MTFinancialInstitutionNameAndUnstructuredAddresswithTruncate(string($AppendedPostalAddress),string($LineSeparator),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:GrpHdr/ns3:SttlmInf/ns3:InstdRmbrsmntAgt/ns3:FinInstnId/ns3:Nm))&quot;>&lt;/xsl:value-of>
    &lt;/xsl:when>
    &lt;xsl:when test=&quot;string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:GrpHdr/ns3:SttlmInf/ns3:InstdRmbrsmntAgt/ns3:FinInstnId/ns3:PstlAdr/ns3:Ctry)&quot;>
      &lt;xsl:value-of select=&quot;MX2MT:com.fiorano.funclet.MXtoMT.MX_To_MTFinancialInstitutionNameAndStructuredAddresswithTruncate(string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:GrpHdr/ns3:SttlmInf/ns3:InstdRmbrsmntAgt/ns3:FinInstnId/ns3:Nm),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:GrpHdr/ns3:SttlmInf/ns3:InstdRmbrsmntAgt/ns3:FinInstnId/ns3:PstlAdr/ns3:Dept),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:GrpHdr/ns3:SttlmInf/ns3:InstdRmbrsmntAgt/ns3:FinInstnId/ns3:PstlAdr/ns3:SubDept),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:GrpHdr/ns3:SttlmInf/ns3:InstdRmbrsmntAgt/ns3:FinInstnId/ns3:PstlAdr/ns3:StrtNm),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:GrpHdr/ns3:SttlmInf/ns3:InstdRmbrsmntAgt/ns3:FinInstnId/ns3:PstlAdr/ns3:BldgNb),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:GrpHdr/ns3:SttlmInf/ns3:InstdRmbrsmntAgt/ns3:FinInstnId/ns3:PstlAdr/ns3:BldgNm),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:GrpHdr/ns3:SttlmInf/ns3:InstdRmbrsmntAgt/ns3:FinInstnId/ns3:PstlAdr/ns3:PstBx),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:GrpHdr/ns3:SttlmInf/ns3:InstdRmbrsmntAgt/ns3:FinInstnId/ns3:PstlAdr/ns3:Flr),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:GrpHdr/ns3:SttlmInf/ns3:InstdRmbrsmntAgt/ns3:FinInstnId/ns3:PstlAdr/ns3:Room),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:GrpHdr/ns3:SttlmInf/ns3:InstdRmbrsmntAgt/ns3:FinInstnId/ns3:PstlAdr/ns3:PstCd),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:GrpHdr/ns3:SttlmInf/ns3:InstdRmbrsmntAgt/ns3:FinInstnId/ns3:PstlAdr/ns3:TwnNm),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:GrpHdr/ns3:SttlmInf/ns3:InstdRmbrsmntAgt/ns3:FinInstnId/ns3:PstlAdr/ns3:TwnLctnNm),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:GrpHdr/ns3:SttlmInf/ns3:InstdRmbrsmntAgt/ns3:FinInstnId/ns3:PstlAdr/ns3:DstrctNm),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:GrpHdr/ns3:SttlmInf/ns3:InstdRmbrsmntAgt/ns3:FinInstnId/ns3:PstlAdr/ns3:CtrySubDvsn),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:GrpHdr/ns3:SttlmInf/ns3:InstdRmbrsmntAgt/ns3:FinInstnId/ns3:PstlAdr/ns3:Ctry),string($LineSeparator))&quot;>&lt;/xsl:value-of>
    &lt;/xsl:when>
    &lt;xsl:when test=&quot;string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:GrpHdr/ns3:SttlmInf/ns3:InstdRmbrsmntAgt/ns3:FinInstnId/ns3:Nm)&quot;>
      &lt;xsl:value-of select=&quot;MX2MT:com.fiorano.funclet.MXtoMT.MX_To_MTFinancialInstitutionNameAndUnstructuredAddresswithTruncate(string($AppendedPostalAddress),string($LineSeparator),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:GrpHdr/ns3:SttlmInf/ns3:InstdRmbrsmntAgt/ns3:FinInstnId/ns3:Nm))&quot;>&lt;/xsl:value-of>
    &lt;/xsl:when>
    &lt;xsl:otherwise>
      &lt;xsl:value-of select=&quot;'NOTPROVIDEDENDOFOUTPUT'&quot;>&lt;/xsl:value-of>
    &lt;/xsl:otherwise>
  &lt;/xsl:choose>
  &lt;/xsl:otherwise>
  &lt;/xsl:choose>
&lt;/xsl:variable>
					
&lt;xsl:call-template name=&quot;tokenizeLine&quot;>
	&lt;xsl:with-param name=&quot;text&quot; select=&quot;substring-before($if4,'ENDOFOUTPUT')&quot;/>
	&lt;xsl:with-param name=&quot;separator&quot; select=&quot;$LineSeparator&quot;/>
&lt;/xsl:call-template>
&lt;xsl:variable name=&quot;TruncTemp&quot;>
  &lt;xsl:value-of select=&quot;java:_getStringProperty($_TIF_MESSAGE_, 'Truncated_Fields')&quot;/>
&lt;/xsl:variable></mappermodel:UserXSL>
  <mappermodel:UserXSL index="0" node="OUT_PORT:0,FinMessage:0,Block4:0,Document:0,MT103:0,F55a:0,[Choice]:0,F55D:0,NameAndAddress:0,[ONE MANY]:0,Line:0">&lt;xsl:variable name=&quot;LineSeparator&quot;>
	&lt;xsl:value-of select=&quot;'ENDOFLINE'&quot;/>
&lt;/xsl:variable>
&lt;xsl:variable name=&quot;AppendedPostalAddress&quot;>
	&lt;xsl:for-each select=&quot;$document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:GrpHdr/ns3:SttlmInf/ns3:ThrdRmbrsmntAgt/ns3:FinInstnId/ns3:PstlAdr/ns3:AdrLine&quot;>
		&lt;xsl:value-of select=&quot;.&quot;/>
		&lt;xsl:value-of select=&quot;$LineSeparator&quot;/>
	&lt;/xsl:for-each>
&lt;/xsl:variable>

&lt;xsl:variable name=&quot;if4&quot;>
  &lt;xsl:choose>
    &lt;xsl:when test=&quot;string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:GrpHdr/ns3:SttlmInf/ns3:ThrdRmbrsmntAgt/ns3:FinInstnId/ns3:PstlAdr/ns3:AdrLine)&quot;>
      &lt;xsl:value-of select=&quot;MX2MT:com.fiorano.funclet.MXtoMT.MX_To_MTFinancialInstitutionNameAndUnstructuredAddresswithTruncate(string($AppendedPostalAddress),string($LineSeparator),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:GrpHdr/ns3:SttlmInf/ns3:ThrdRmbrsmntAgt/ns3:FinInstnId/ns3:Nm))&quot;>&lt;/xsl:value-of>
    &lt;/xsl:when>
    &lt;xsl:when test=&quot;string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:GrpHdr/ns3:SttlmInf/ns3:ThrdRmbrsmntAgt/ns3:FinInstnId/ns3:PstlAdr/ns3:Ctry)&quot;>
      &lt;xsl:value-of select=&quot;MX2MT:com.fiorano.funclet.MXtoMT.MX_To_MTFinancialInstitutionNameAndStructuredAddresswithTruncate(string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:GrpHdr/ns3:SttlmInf/ns3:ThrdRmbrsmntAgt/ns3:FinInstnId/ns3:Nm),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:GrpHdr/ns3:SttlmInf/ns3:ThrdRmbrsmntAgt/ns3:FinInstnId/ns3:PstlAdr/ns3:Dept),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:GrpHdr/ns3:SttlmInf/ns3:ThrdRmbrsmntAgt/ns3:FinInstnId/ns3:PstlAdr/ns3:SubDept),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:GrpHdr/ns3:SttlmInf/ns3:ThrdRmbrsmntAgt/ns3:FinInstnId/ns3:PstlAdr/ns3:StrtNm),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:GrpHdr/ns3:SttlmInf/ns3:ThrdRmbrsmntAgt/ns3:FinInstnId/ns3:PstlAdr/ns3:BldgNb),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:GrpHdr/ns3:SttlmInf/ns3:ThrdRmbrsmntAgt/ns3:FinInstnId/ns3:PstlAdr/ns3:BldgNm),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:GrpHdr/ns3:SttlmInf/ns3:ThrdRmbrsmntAgt/ns3:FinInstnId/ns3:PstlAdr/ns3:PstBx),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:GrpHdr/ns3:SttlmInf/ns3:ThrdRmbrsmntAgt/ns3:FinInstnId/ns3:PstlAdr/ns3:Flr),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:GrpHdr/ns3:SttlmInf/ns3:ThrdRmbrsmntAgt/ns3:FinInstnId/ns3:PstlAdr/ns3:Room),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:GrpHdr/ns3:SttlmInf/ns3:ThrdRmbrsmntAgt/ns3:FinInstnId/ns3:PstlAdr/ns3:PstCd),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:GrpHdr/ns3:SttlmInf/ns3:ThrdRmbrsmntAgt/ns3:FinInstnId/ns3:PstlAdr/ns3:TwnNm),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:GrpHdr/ns3:SttlmInf/ns3:ThrdRmbrsmntAgt/ns3:FinInstnId/ns3:PstlAdr/ns3:TwnLctnNm),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:GrpHdr/ns3:SttlmInf/ns3:ThrdRmbrsmntAgt/ns3:FinInstnId/ns3:PstlAdr/ns3:DstrctNm),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:GrpHdr/ns3:SttlmInf/ns3:ThrdRmbrsmntAgt/ns3:FinInstnId/ns3:PstlAdr/ns3:CtrySubDvsn),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:GrpHdr/ns3:SttlmInf/ns3:ThrdRmbrsmntAgt/ns3:FinInstnId/ns3:PstlAdr/ns3:Ctry),string($LineSeparator))&quot;>&lt;/xsl:value-of>
    &lt;/xsl:when>
    &lt;xsl:when test=&quot;string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:GrpHdr/ns3:SttlmInf/ns3:ThrdRmbrsmntAgt/ns3:FinInstnId/ns3:Nm)&quot;>
      &lt;xsl:value-of select=&quot;MX2MT:com.fiorano.funclet.MXtoMT.MX_To_MTFinancialInstitutionNameAndUnstructuredAddresswithTruncate(string($AppendedPostalAddress),string($LineSeparator),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:GrpHdr/ns3:SttlmInf/ns3:ThrdRmbrsmntAgt/ns3:FinInstnId/ns3:Nm))&quot;>&lt;/xsl:value-of>
    &lt;/xsl:when>
    &lt;xsl:otherwise>
      &lt;xsl:value-of select=&quot;'NOTPROVIDEDENDOFOUTPUT'&quot;>&lt;/xsl:value-of>
    &lt;/xsl:otherwise>
  &lt;/xsl:choose>
&lt;/xsl:variable>
					
&lt;xsl:call-template name=&quot;tokenizeLine&quot;>
  &lt;xsl:with-param name=&quot;text&quot; select=&quot;substring-before($if4,'ENDOFOUTPUT')&quot;/>
	&lt;xsl:with-param name=&quot;separator&quot; select=&quot;$LineSeparator&quot;/>
&lt;/xsl:call-template>
&lt;xsl:variable name=&quot;TruncTemp&quot;>
  &lt;xsl:value-of select=&quot;java:_getStringProperty($_TIF_MESSAGE_, 'Truncated_Fields')&quot;/>
&lt;/xsl:variable></mappermodel:UserXSL>
  <mappermodel:UserXSL index="0" node="OUT_PORT:0,FinMessage:0,Block4:0,Document:0,MT103:0,F56a:0,[Choice]:0,F56D:0,NameAndAddress:0,[ONE MANY]:0,Line:0">&lt;xsl:variable name=&quot;AppendedPostalAddress&quot;>
	&lt;xsl:for-each select=&quot;$document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:IntrmyAgt1/ns3:FinInstnId/ns3:PstlAdr/ns3:AdrLine&quot;>
		&lt;xsl:value-of select=&quot;.&quot;/>
		&lt;xsl:value-of select=&quot;$LineSeparator&quot;/>
	&lt;/xsl:for-each>
&lt;/xsl:variable>

&lt;xsl:variable name=&quot;if4&quot;>
  &lt;xsl:choose>
    &lt;xsl:when test=&quot;string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:IntrmyAgt1/ns3:FinInstnId/ns3:PstlAdr/ns3:AdrLine)&quot;>
      &lt;xsl:value-of select=&quot;MX2MT:com.fiorano.funclet.MXtoMT.MX_To_MTFinancialInstitutionNameAndUnstructuredAddresswithTruncate(string($AppendedPostalAddress),string($LineSeparator),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:IntrmyAgt1/ns3:FinInstnId/ns3:Nm))&quot;>&lt;/xsl:value-of>
    &lt;/xsl:when>
    &lt;xsl:when test=&quot;string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:IntrmyAgt1/ns3:FinInstnId/ns3:PstlAdr/ns3:Ctry)&quot;>
      &lt;xsl:value-of select=&quot;MX2MT:com.fiorano.funclet.MXtoMT.MX_To_MTFinancialInstitutionNameAndStructuredAddresswithTruncate(string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:IntrmyAgt1/ns3:FinInstnId/ns3:Nm),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:IntrmyAgt1/ns3:FinInstnId/ns3:PstlAdr/ns3:Dept),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:IntrmyAgt1/ns3:FinInstnId/ns3:PstlAdr/ns3:SubDept),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:IntrmyAgt1/ns3:FinInstnId/ns3:PstlAdr/ns3:StrtNm),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:IntrmyAgt1/ns3:FinInstnId/ns3:PstlAdr/ns3:BldgNb),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:IntrmyAgt1/ns3:FinInstnId/ns3:PstlAdr/ns3:BldgNm),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:IntrmyAgt1/ns3:FinInstnId/ns3:PstlAdr/ns3:PstBx),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:IntrmyAgt1/ns3:FinInstnId/ns3:PstlAdr/ns3:Flr),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:IntrmyAgt1/ns3:FinInstnId/ns3:PstlAdr/ns3:Room),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:IntrmyAgt1/ns3:FinInstnId/ns3:PstlAdr/ns3:PstCd),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:IntrmyAgt1/ns3:FinInstnId/ns3:PstlAdr/ns3:TwnNm),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:IntrmyAgt1/ns3:FinInstnId/ns3:PstlAdr/ns3:TwnLctnNm),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:IntrmyAgt1/ns3:FinInstnId/ns3:PstlAdr/ns3:DstrctNm),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:IntrmyAgt1/ns3:FinInstnId/ns3:PstlAdr/ns3:CtrySubDvsn),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:IntrmyAgt1/ns3:FinInstnId/ns3:PstlAdr/ns3:Ctry),string($LineSeparator))&quot;>&lt;/xsl:value-of>
    &lt;/xsl:when>
    &lt;xsl:when test=&quot;string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:IntrmyAgt1/ns3:FinInstnId/ns3:Nm)&quot;>
      &lt;xsl:value-of select=&quot;MX2MT:com.fiorano.funclet.MXtoMT.MX_To_MTFinancialInstitutionNameAndUnstructuredAddresswithTruncate(string($AppendedPostalAddress),string($LineSeparator),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:IntrmyAgt1/ns3:FinInstnId/ns3:Nm))&quot;>&lt;/xsl:value-of>
    &lt;/xsl:when>
    &lt;xsl:otherwise>
      &lt;xsl:value-of select=&quot;'NOTPROVIDEDENDOFOUTPUT'&quot;>&lt;/xsl:value-of>
    &lt;/xsl:otherwise>
  &lt;/xsl:choose>
&lt;/xsl:variable>
					
&lt;xsl:call-template name=&quot;tokenizeLine&quot;>
	&lt;xsl:with-param name=&quot;text&quot; select=&quot;substring-before($if4,'ENDOFOUTPUT')&quot;/>
	&lt;xsl:with-param name=&quot;separator&quot; select=&quot;$LineSeparator&quot;/>
&lt;/xsl:call-template>
&lt;xsl:variable name=&quot;TruncTemp&quot;>
  &lt;xsl:value-of select=&quot;java:_getStringProperty($_TIF_MESSAGE_, 'Truncated_Fields')&quot;/>
&lt;/xsl:variable></mappermodel:UserXSL>
  <mappermodel:UserXSL index="0" node="OUT_PORT:0,FinMessage:0,Block4:0,Document:0,MT103:0,F57a:0,[Choice]:0,F57D:0,NameAndAddress:0,[ONE MANY]:0,Line:0">&lt;xsl:variable name=&quot;AppendedPostalAddress&quot;>
	&lt;xsl:for-each select=&quot;$document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:CdtrAgt/ns3:FinInstnId/ns3:PstlAdr/ns3:AdrLine&quot;>
		&lt;xsl:value-of select=&quot;.&quot;/>
		&lt;xsl:value-of select=&quot;$LineSeparator&quot;/>
	&lt;/xsl:for-each>
&lt;/xsl:variable>

&lt;xsl:variable name=&quot;if4&quot;>
  &lt;xsl:choose>
    &lt;xsl:when test=&quot;string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:CdtrAgt/ns3:FinInstnId/ns3:PstlAdr/ns3:AdrLine)&quot;>
      &lt;xsl:value-of select=&quot;MX2MT:com.fiorano.funclet.MXtoMT.MX_To_MTFinancialInstitutionNameAndUnstructuredAddresswithTruncate(string($AppendedPostalAddress),string($LineSeparator),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:CdtrAgt/ns3:FinInstnId/ns3:Nm))&quot;>&lt;/xsl:value-of>
    &lt;/xsl:when>
    &lt;xsl:when test=&quot;string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:CdtrAgt/ns3:FinInstnId/ns3:PstlAdr/ns3:Ctry)&quot;>
      &lt;xsl:value-of select=&quot;MX2MT:com.fiorano.funclet.MXtoMT.MX_To_MTFinancialInstitutionNameAndStructuredAddresswithTruncate(string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:CdtrAgt/ns3:FinInstnId/ns3:Nm),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:CdtrAgt/ns3:FinInstnId/ns3:PstlAdr/ns3:Dept),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:CdtrAgt/ns3:FinInstnId/ns3:PstlAdr/ns3:SubDept),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:CdtrAgt/ns3:FinInstnId/ns3:PstlAdr/ns3:StrtNm),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:CdtrAgt/ns3:FinInstnId/ns3:PstlAdr/ns3:BldgNb),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:CdtrAgt/ns3:FinInstnId/ns3:PstlAdr/ns3:BldgNm),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:CdtrAgt/ns3:FinInstnId/ns3:PstlAdr/ns3:PstBx),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:CdtrAgt/ns3:FinInstnId/ns3:PstlAdr/ns3:Flr),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:CdtrAgt/ns3:FinInstnId/ns3:PstlAdr/ns3:Room),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:CdtrAgt/ns3:FinInstnId/ns3:PstlAdr/ns3:PstCd),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:CdtrAgt/ns3:FinInstnId/ns3:PstlAdr/ns3:TwnNm),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:CdtrAgt/ns3:FinInstnId/ns3:PstlAdr/ns3:TwnLctnNm),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:CdtrAgt/ns3:FinInstnId/ns3:PstlAdr/ns3:DstrctNm),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:CdtrAgt/ns3:FinInstnId/ns3:PstlAdr/ns3:CtrySubDvsn),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:CdtrAgt/ns3:FinInstnId/ns3:PstlAdr/ns3:Ctry),string($LineSeparator))&quot;>&lt;/xsl:value-of>
    &lt;/xsl:when>
    &lt;xsl:when test=&quot;string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:CdtrAgt/ns3:FinInstnId/ns3:Nm)&quot;>
      &lt;xsl:value-of select=&quot;MX2MT:com.fiorano.funclet.MXtoMT.MX_To_MTFinancialInstitutionNameAndUnstructuredAddresswithTruncate(string($AppendedPostalAddress),string($LineSeparator),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:FIToFICstmrCdtTrf/ns3:CdtTrfTxInf/ns3:CdtrAgt/ns3:FinInstnId/ns3:Nm))&quot;>&lt;/xsl:value-of>
    &lt;/xsl:when>
    &lt;xsl:otherwise>
      &lt;xsl:value-of select=&quot;'NOTPROVIDEDENDOFOUTPUT'&quot;>&lt;/xsl:value-of>
    &lt;/xsl:otherwise>
  &lt;/xsl:choose>
&lt;/xsl:variable>
					
&lt;xsl:call-template name=&quot;tokenizeLine&quot;>
	&lt;xsl:with-param name=&quot;text&quot; select=&quot;substring-before($if4,'ENDOFOUTPUT')&quot;/>
	&lt;xsl:with-param name=&quot;separator&quot; select=&quot;$LineSeparator&quot;/>
&lt;/xsl:call-template>
&lt;xsl:variable name=&quot;TruncTemp&quot;>
  &lt;xsl:value-of select=&quot;java:_getStringProperty($_TIF_MESSAGE_, 'Truncated_Fields')&quot;/>
&lt;/xsl:variable></mappermodel:UserXSL>
</mappermodel:MapperProject>