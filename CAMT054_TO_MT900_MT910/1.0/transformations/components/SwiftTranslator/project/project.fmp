<?xml version="1.0" encoding="UTF-8"?>
<mappermodel:MapperProject xmlns:mappermodel="http://www.fiorano.com/tools/mapper/mappermodel" convertor="nameIndexed" suppressEmptyItems="false" suppressPattern="" version="3.0.2">
  <mappermodel:XSLTVersion>1.0</mappermodel:XSLTVersion>
  <mappermodel:XSLTEngine>org.apache.xalan.processor.TransformerFactoryImpl</mappermodel:XSLTEngine>
  <mappermodel:XSLTEncoding>UTF-8</mappermodel:XSLTEncoding>
  <mappermodel:OutputMethod>unspecified</mappermodel:OutputMethod>
  <mappermodel:OutputEncoding>UTF-8</mappermodel:OutputEncoding>
  <mappermodel:indent>true</mappermodel:indent>
  <mappermodel:setDTD>false</mappermodel:setDTD>
  <mappermodel:omit-xml-declaration>false</mappermodel:omit-xml-declaration>
  <mappermodel:createEmptyOutputTags>false</mappermodel:createEmptyOutputTags>
  <mappermodel:copyUnmappedFromInput enabled="false"/>
  <mappermodel:disableOutputEscapingForANY>false</mappermodel:disableOutputEscapingForANY>
  <mappermodel:Comments>Key in relevant comments</mappermodel:Comments>
  <mappermodel:excludeResultPrefixes></mappermodel:excludeResultPrefixes>
  <mappermodel:addDefaultXSTypeAttributes>false</mappermodel:addDefaultXSTypeAttributes>
  <mappermodel:InputStructure>
    <mappermodel:Structure duplicates="" filePath="Application-Context.DTD" mime="DTD" name="Application-Context" rootName="Context"/>
    <mappermodel:Structure duplicates="" filePath="IN_PORT.XSD" mime="XSD" name="IN_PORT" rootName="{urn:swift:xsd:envelope}Envelope">
      <mappermodel:ExternalStructure filePath="IN_PORT_ext.XSD" mime="XSD" name="urn:iso:std:iso:20022:tech:xsd:head.001.001.02"/>
      <mappermodel:ExternalStructure filePath="IN_PORT_ext1.XSD" mime="XSD" name="urn:iso:std:iso:20022:tech:xsd:camt.054.001.08"/>
    </mappermodel:Structure>
  </mappermodel:InputStructure>
  <mappermodel:OutputStructure>
    <mappermodel:Structure duplicates="" filePath="OUT_PORT.XSD" mime="XSD" name="OUT_PORT" rootName="{urn:swift:xsd:mtmsg.2020}FinMessage">
      <mappermodel:ExternalStructure filePath="OUT_PORT_ext.XSD" mime="XSD" name="urn:swift:xsd:fin.910.2020"/>
    </mappermodel:Structure>
  </mappermodel:OutputStructure>
  <mappermodel:Namespaces/>
  <mappermodel:Mappings>
    <mappermodel:GraphModel inputPins="1,2" outputNode="OUT_PORT:0,FinMessage:0,Block1:0,ApplicationIdentifier:0" x="-1" y="-1">
      <mappermodel:FunctionGraphNode label="F" type="22" x="149" y="94">
        <mappermodel:InputPins></mappermodel:InputPins>
        <mappermodel:OutputPins>str</mappermodel:OutputPins>
        <mappermodel:Properties/>
      </mappermodel:FunctionGraphNode>
      <mappermodel:Link inputID="0" inputIndex="0" outputID="1" outputIndex="0"/>
    </mappermodel:GraphModel>
    <mappermodel:GraphModel inputPins="1,2,3" outputNode="OUT_PORT:0,FinMessage:0,Block1:0,ServiceIdentifier:0" x="-1" y="-1">
      <mappermodel:FunctionGraphNode label="01" type="22" x="90" y="96">
        <mappermodel:InputPins></mappermodel:InputPins>
        <mappermodel:OutputPins>str</mappermodel:OutputPins>
        <mappermodel:Properties/>
      </mappermodel:FunctionGraphNode>
      <mappermodel:Link inputID="0" inputIndex="0" outputID="1" outputIndex="0"/>
    </mappermodel:GraphModel>
    <mappermodel:GraphModel inputPins="1,2" outputNode="OUT_PORT:0,FinMessage:0,Block4:0,Document:0,MT910:0,F25a:0,[Choice]:0,F25:0" x="821" y="97">
      <mappermodel:TreeGraphNode inputNode="IN_PORT:0,Envelope:0,Document:0,BkToCstmrDbtCdtNtfctn:0,[ONE MANY]:0,Ntfctn:0,Acct:0,Id:0,[Choice]:0,Othr:0,Id:0" x="184" y="342">
        <mappermodel:InputPins>1st</mappermodel:InputPins>
        <mappermodel:OutputPins>1st</mappermodel:OutputPins>
      </mappermodel:TreeGraphNode>
      <mappermodel:TreeGraphNode inputNode="IN_PORT:0,Envelope:0,Document:0,BkToCstmrDbtCdtNtfctn:0,[ONE MANY]:0,Ntfctn:0,Acct:0,Id:0,[Choice]:0,IBAN:0" x="159" y="311">
        <mappermodel:InputPins>1st</mappermodel:InputPins>
        <mappermodel:OutputPins>1st</mappermodel:OutputPins>
      </mappermodel:TreeGraphNode>
      <mappermodel:FunctionGraphNode label="Length" type="21" x="382" y="300">
        <mappermodel:InputPins>str</mappermodel:InputPins>
        <mappermodel:OutputPins>num</mappermodel:OutputPins>
        <mappermodel:Properties/>
      </mappermodel:FunctionGraphNode>
      <mappermodel:FunctionGraphNode label="If-Then-Else" type="41" x="719" y="166">
        <mappermodel:InputPins>bool,then,bool,then,else</mappermodel:InputPins>
        <mappermodel:OutputPins>R</mappermodel:OutputPins>
        <mappermodel:Properties/>
      </mappermodel:FunctionGraphNode>
      <mappermodel:TreeGraphNode inputNode="IN_PORT:0,Envelope:0,Document:0,BkToCstmrDbtCdtNtfctn:0,[ONE MANY]:0,Ntfctn:0,Acct:0,Ownr:0,Id:0,[Choice]:0,OrgId:0,AnyBIC:0" x="162" y="165">
        <mappermodel:InputPins>1st</mappermodel:InputPins>
        <mappermodel:OutputPins>1st</mappermodel:OutputPins>
      </mappermodel:TreeGraphNode>
      <mappermodel:FunctionGraphNode label="Length" type="21" x="418" y="165">
        <mappermodel:InputPins>str</mappermodel:InputPins>
        <mappermodel:OutputPins>num</mappermodel:OutputPins>
        <mappermodel:Properties/>
      </mappermodel:FunctionGraphNode>
      <mappermodel:FunctionGraphNode label="NOT" type="39" x="588" y="134">
        <mappermodel:InputPins>1</mappermodel:InputPins>
        <mappermodel:OutputPins>R</mappermodel:OutputPins>
        <mappermodel:Properties/>
      </mappermodel:FunctionGraphNode>
      <mappermodel:FunctionGraphNode label="If-Then-Else" type="41" x="631" y="311">
        <mappermodel:InputPins>bool,then,bool,else</mappermodel:InputPins>
        <mappermodel:OutputPins>R</mappermodel:OutputPins>
        <mappermodel:Properties/>
      </mappermodel:FunctionGraphNode>
      <mappermodel:Link inputID="3" inputIndex="0" outputID="2" outputIndex="0"/>
      <mappermodel:Link inputID="0" inputIndex="0" outputID="4" outputIndex="0"/>
      <mappermodel:Link inputID="6" inputIndex="0" outputID="5" outputIndex="0"/>
      <mappermodel:Link inputID="7" inputIndex="0" outputID="6" outputIndex="0"/>
      <mappermodel:Link inputID="4" inputIndex="0" outputID="7" outputIndex="0"/>
      <mappermodel:Link inputID="8" inputIndex="0" outputID="3" outputIndex="0"/>
      <mappermodel:Link inputID="8" inputIndex="1" outputID="2" outputIndex="0"/>
      <mappermodel:Link inputID="8" inputIndex="3" outputID="1" outputIndex="0"/>
      <mappermodel:Link inputID="4" inputIndex="1" outputID="8" outputIndex="0"/>
    </mappermodel:GraphModel>
    <mappermodel:GraphModel inputPins="1,2" outputNode="OUT_PORT:0,FinMessage:0,Block4:0,Document:0,MT910:0,F25a:0,[Choice]:0,F25P:0,Account:0" x="981" y="105">
      <mappermodel:TreeGraphNode inputNode="IN_PORT:0,Envelope:0,Document:0,BkToCstmrDbtCdtNtfctn:0,[ONE MANY]:0,Ntfctn:0,Acct:0,Ownr:0,Id:0,[Choice]:0,OrgId:0,AnyBIC:0" x="-1" y="-1">
        <mappermodel:InputPins>1st</mappermodel:InputPins>
        <mappermodel:OutputPins>1st</mappermodel:OutputPins>
      </mappermodel:TreeGraphNode>
      <mappermodel:FunctionGraphNode label="Length" type="21" x="312" y="64">
        <mappermodel:InputPins>str</mappermodel:InputPins>
        <mappermodel:OutputPins>num</mappermodel:OutputPins>
        <mappermodel:Properties/>
      </mappermodel:FunctionGraphNode>
      <mappermodel:TreeGraphNode inputNode="IN_PORT:0,Envelope:0,Document:0,BkToCstmrDbtCdtNtfctn:0,[ONE MANY]:0,Ntfctn:0,Acct:0,Id:0,[Choice]:0,IBAN:0" x="97" y="216">
        <mappermodel:InputPins>1st</mappermodel:InputPins>
        <mappermodel:OutputPins>1st</mappermodel:OutputPins>
      </mappermodel:TreeGraphNode>
      <mappermodel:TreeGraphNode inputNode="IN_PORT:0,Envelope:0,Document:0,BkToCstmrDbtCdtNtfctn:0,[ONE MANY]:0,Ntfctn:0,Acct:0,Id:0,[Choice]:0,Othr:0,Id:0" x="93" y="290">
        <mappermodel:InputPins>1st</mappermodel:InputPins>
        <mappermodel:OutputPins>1st</mappermodel:OutputPins>
      </mappermodel:TreeGraphNode>
      <mappermodel:FunctionGraphNode label="Length" type="21" x="343" y="217">
        <mappermodel:InputPins>str</mappermodel:InputPins>
        <mappermodel:OutputPins>num</mappermodel:OutputPins>
        <mappermodel:Properties/>
      </mappermodel:FunctionGraphNode>
      <mappermodel:FunctionGraphNode label="If-Then-Else" type="41" x="636" y="102">
        <mappermodel:InputPins>bool,then,bool,else</mappermodel:InputPins>
        <mappermodel:OutputPins>R</mappermodel:OutputPins>
        <mappermodel:Properties/>
      </mappermodel:FunctionGraphNode>
      <mappermodel:FunctionGraphNode label="If-Then-Else" type="41" x="621" y="251">
        <mappermodel:InputPins>bool,then,bool,else</mappermodel:InputPins>
        <mappermodel:OutputPins>R</mappermodel:OutputPins>
        <mappermodel:Properties/>
      </mappermodel:FunctionGraphNode>
      <mappermodel:Link inputID="2" inputIndex="0" outputID="1" outputIndex="0"/>
      <mappermodel:Link inputID="5" inputIndex="0" outputID="3" outputIndex="0"/>
      <mappermodel:Link inputID="6" inputIndex="0" outputID="2" outputIndex="0"/>
      <mappermodel:Link inputID="7" inputIndex="0" outputID="5" outputIndex="0"/>
      <mappermodel:Link inputID="7" inputIndex="1" outputID="3" outputIndex="0"/>
      <mappermodel:Link inputID="7" inputIndex="3" outputID="4" outputIndex="0"/>
      <mappermodel:Link inputID="6" inputIndex="1" outputID="7" outputIndex="0"/>
      <mappermodel:Link inputID="0" inputIndex="0" outputID="6" outputIndex="0"/>
    </mappermodel:GraphModel>
    <mappermodel:GraphModel inputPins="1,2" outputNode="OUT_PORT:0,FinMessage:0,Block4:0,Document:0,MT910:0,F25a:0,[Choice]:0,F25P:0,IdentifierCode:0" x="716" y="51">
      <mappermodel:TreeGraphNode inputNode="IN_PORT:0,Envelope:0,Document:0,BkToCstmrDbtCdtNtfctn:0,[ONE MANY]:0,Ntfctn:0,Acct:0,Ownr:0,Id:0,[Choice]:0,OrgId:0,AnyBIC:0" x="-1" y="-1">
        <mappermodel:InputPins>1st</mappermodel:InputPins>
        <mappermodel:OutputPins>1st</mappermodel:OutputPins>
      </mappermodel:TreeGraphNode>
      <mappermodel:FunctionGraphNode label="Length" type="21" x="196" y="102">
        <mappermodel:InputPins>str</mappermodel:InputPins>
        <mappermodel:OutputPins>num</mappermodel:OutputPins>
        <mappermodel:Properties/>
      </mappermodel:FunctionGraphNode>
      <mappermodel:FunctionGraphNode label="If-Then-Else" type="41" x="426" y="129">
        <mappermodel:InputPins>bool,then,bool,else</mappermodel:InputPins>
        <mappermodel:OutputPins>R</mappermodel:OutputPins>
        <mappermodel:Properties/>
      </mappermodel:FunctionGraphNode>
      <mappermodel:Link inputID="2" inputIndex="0" outputID="1" outputIndex="0"/>
      <mappermodel:Link inputID="0" inputIndex="0" outputID="3" outputIndex="0"/>
      <mappermodel:Link inputID="3" inputIndex="1" outputID="1" outputIndex="0"/>
      <mappermodel:Link inputID="3" inputIndex="0" outputID="2" outputIndex="0"/>
    </mappermodel:GraphModel>
    <mappermodel:GraphModel inputPins="1,2" outputNode="OUT_PORT:0,FinMessage:0,Block4:0,Document:0,MT910:0,F32a:0,[Choice]:0,F32A:0,Date:0" x="861" y="41">
      <mappermodel:FunctionGraphNode label="Length" type="21" x="281" y="77">
        <mappermodel:InputPins>str</mappermodel:InputPins>
        <mappermodel:OutputPins>num</mappermodel:OutputPins>
        <mappermodel:Properties/>
      </mappermodel:FunctionGraphNode>
      <mappermodel:FunctionGraphNode label="If-Then-Else" type="41" x="540" y="77">
        <mappermodel:InputPins>bool,then,bool,then,bool,then,bool,else</mappermodel:InputPins>
        <mappermodel:OutputPins>R</mappermodel:OutputPins>
        <mappermodel:Properties/>
      </mappermodel:FunctionGraphNode>
      <mappermodel:FunctionGraphNode label="MXToMT:com.fiorano.funclet.MXtoMT.MX_To_MTDateTimeOffset_Date(java.lang.String arg1)" type="69" x="490" y="245">
        <mappermodel:InputPins>arg1</mappermodel:InputPins>
        <mappermodel:OutputPins>R</mappermodel:OutputPins>
        <mappermodel:Properties/>
      </mappermodel:FunctionGraphNode>
      <mappermodel:TreeGraphNode inputNode="IN_PORT:0,Envelope:0,Document:0,BkToCstmrDbtCdtNtfctn:0,[ONE MANY]:0,Ntfctn:0,[ONE MANY]:0,Ntry:0,ValDt:0,[Choice]:0,Dt:0" x="41" y="72">
        <mappermodel:InputPins>1st</mappermodel:InputPins>
        <mappermodel:OutputPins>1st</mappermodel:OutputPins>
      </mappermodel:TreeGraphNode>
      <mappermodel:TreeGraphNode inputNode="IN_PORT:0,Envelope:0,Document:0,BkToCstmrDbtCdtNtfctn:0,[ONE MANY]:0,Ntfctn:0,[ONE MANY]:0,Ntry:0,ValDt:0,[Choice]:0,DtTm:0" x="92" y="145">
        <mappermodel:InputPins>1st</mappermodel:InputPins>
        <mappermodel:OutputPins>1st</mappermodel:OutputPins>
      </mappermodel:TreeGraphNode>
      <mappermodel:FunctionGraphNode label="Length" type="21" x="302" y="139">
        <mappermodel:InputPins>str</mappermodel:InputPins>
        <mappermodel:OutputPins>num</mappermodel:OutputPins>
        <mappermodel:Properties/>
      </mappermodel:FunctionGraphNode>
      <mappermodel:FunctionGraphNode label="MXToMT:com.fiorano.funclet.MXtoMT.MX_To_MTDate(java.lang.String arg1)" type="69" x="234" y="209">
        <mappermodel:InputPins>arg1</mappermodel:InputPins>
        <mappermodel:OutputPins>R</mappermodel:OutputPins>
        <mappermodel:Properties/>
      </mappermodel:FunctionGraphNode>
      <mappermodel:TreeGraphNode inputNode="IN_PORT:0,Envelope:0,Document:0,BkToCstmrDbtCdtNtfctn:0,[ONE MANY]:0,Ntfctn:0,[ONE MANY]:0,Ntry:0,[ZERO MANY]:1,NtryDtls:0,[ZERO MANY]:0,TxDtls:0,RltdDts:0,IntrBkSttlmDt:0" x="138" y="252">
        <mappermodel:InputPins>1st</mappermodel:InputPins>
        <mappermodel:OutputPins>1st</mappermodel:OutputPins>
      </mappermodel:TreeGraphNode>
      <mappermodel:FunctionGraphNode label="MXToMT:com.fiorano.funclet.MXtoMT.MX_To_MTDate(java.lang.String arg1)" type="69" x="511" y="253">
        <mappermodel:InputPins>arg1</mappermodel:InputPins>
        <mappermodel:OutputPins>R</mappermodel:OutputPins>
        <mappermodel:Properties/>
      </mappermodel:FunctionGraphNode>
      <mappermodel:FunctionGraphNode label="Length" type="21" x="357" y="241">
        <mappermodel:InputPins>str</mappermodel:InputPins>
        <mappermodel:OutputPins>num</mappermodel:OutputPins>
        <mappermodel:Properties/>
      </mappermodel:FunctionGraphNode>
      <mappermodel:FunctionGraphNode label="991231" type="22" x="27" y="116">
        <mappermodel:InputPins></mappermodel:InputPins>
        <mappermodel:OutputPins>str</mappermodel:OutputPins>
        <mappermodel:Properties/>
      </mappermodel:FunctionGraphNode>
      <mappermodel:Link inputID="2" inputIndex="0" outputID="1" outputIndex="0"/>
      <mappermodel:Link inputID="1" inputIndex="0" outputID="4" outputIndex="0"/>
      <mappermodel:Link inputID="6" inputIndex="0" outputID="5" outputIndex="0"/>
      <mappermodel:Link inputID="2" inputIndex="2" outputID="6" outputIndex="0"/>
      <mappermodel:Link inputID="3" inputIndex="0" outputID="5" outputIndex="0"/>
      <mappermodel:Link inputID="2" inputIndex="3" outputID="3" outputIndex="0"/>
      <mappermodel:Link inputID="0" inputIndex="0" outputID="2" outputIndex="0"/>
      <mappermodel:Link inputID="7" inputIndex="0" outputID="4" outputIndex="0"/>
      <mappermodel:Link inputID="2" inputIndex="1" outputID="7" outputIndex="0"/>
      <mappermodel:Link inputID="10" inputIndex="0" outputID="8" outputIndex="0"/>
      <mappermodel:Link inputID="2" inputIndex="4" outputID="10" outputIndex="0"/>
      <mappermodel:Link inputID="2" inputIndex="5" outputID="9" outputIndex="0"/>
      <mappermodel:Link inputID="9" inputIndex="0" outputID="8" outputIndex="0"/>
      <mappermodel:Link inputID="2" inputIndex="7" outputID="11" outputIndex="0"/>
    </mappermodel:GraphModel>
    <mappermodel:GraphModel inputPins="1,2" outputNode="OUT_PORT:0,FinMessage:0,Block4:0,Document:0,MT910:0,F32a:0,[Choice]:0,F32A:0,Currency:0" x="-1" y="-1">
      <mappermodel:TreeGraphNode inputNode="IN_PORT:0,Envelope:0,Document:0,BkToCstmrDbtCdtNtfctn:0,[ONE MANY]:0,Ntfctn:0,[ONE MANY]:0,Ntry:0,Amt:0,Ccy:0" x="68" y="86">
        <mappermodel:InputPins>1st</mappermodel:InputPins>
        <mappermodel:OutputPins>1st</mappermodel:OutputPins>
      </mappermodel:TreeGraphNode>
      <mappermodel:FunctionGraphNode label="If-Then-Else" type="41" x="239" y="117">
        <mappermodel:InputPins>bool,then,bool,else</mappermodel:InputPins>
        <mappermodel:OutputPins>R</mappermodel:OutputPins>
        <mappermodel:Properties/>
      </mappermodel:FunctionGraphNode>
      <mappermodel:FunctionGraphNode label="Length" type="21" x="76" y="163">
        <mappermodel:InputPins>str</mappermodel:InputPins>
        <mappermodel:OutputPins>num</mappermodel:OutputPins>
        <mappermodel:Properties/>
      </mappermodel:FunctionGraphNode>
      <mappermodel:Link inputID="3" inputIndex="0" outputID="1" outputIndex="0"/>
      <mappermodel:Link inputID="2" inputIndex="1" outputID="1" outputIndex="0"/>
      <mappermodel:Link inputID="2" inputIndex="0" outputID="3" outputIndex="0"/>
      <mappermodel:Link inputID="0" inputIndex="0" outputID="2" outputIndex="0"/>
    </mappermodel:GraphModel>
    <mappermodel:GraphModel inputPins="1,2" outputNode="OUT_PORT:0,FinMessage:0,Block4:0,Document:0,MT910:0,F32a:0,[Choice]:0,F32A:0,Amount:0" x="615" y="75">
      <mappermodel:TreeGraphNode inputNode="IN_PORT:0,Envelope:0,Document:0,BkToCstmrDbtCdtNtfctn:0,[ONE MANY]:0,Ntfctn:0,[ONE MANY]:0,Ntry:0,Amt:0" x="68" y="87">
        <mappermodel:InputPins>1st</mappermodel:InputPins>
        <mappermodel:OutputPins>1st</mappermodel:OutputPins>
      </mappermodel:TreeGraphNode>
      <mappermodel:FunctionGraphNode label="MXToMT:com.fiorano.funclet.MXtoMT.mx2MTCurrencyAmount(java.lang.String arg1)" type="69" x="186" y="158">
        <mappermodel:InputPins>arg1</mappermodel:InputPins>
        <mappermodel:OutputPins>R</mappermodel:OutputPins>
        <mappermodel:Properties/>
      </mappermodel:FunctionGraphNode>
      <mappermodel:Link inputID="2" inputIndex="0" outputID="1" outputIndex="0"/>
      <mappermodel:Link inputID="0" inputIndex="0" outputID="2" outputIndex="0"/>
    </mappermodel:GraphModel>
    <mappermodel:GraphModel inputPins="1,2" outputNode="OUT_PORT:0,FinMessage:0,Block4:0,Document:0,MT910:0,F13a:0,[Choice]:0,F13D:0,Date:0" x="832" y="72">
      <mappermodel:TreeGraphNode inputNode="IN_PORT:0,Envelope:0,Document:0,BkToCstmrDbtCdtNtfctn:0,[ONE MANY]:0,Ntfctn:0,[ONE MANY]:0,Ntry:0,BookgDt:0,[Choice]:0,DtTm:0" x="207" y="145">
        <mappermodel:InputPins>1st</mappermodel:InputPins>
        <mappermodel:OutputPins>1st</mappermodel:OutputPins>
      </mappermodel:TreeGraphNode>
      <mappermodel:FunctionGraphNode label="MXToMT:com.fiorano.funclet.MXtoMT.MX_To_MTDateTimeOffset_Date(java.lang.String arg1)" type="69" x="536" y="147">
        <mappermodel:InputPins>arg1</mappermodel:InputPins>
        <mappermodel:OutputPins>R</mappermodel:OutputPins>
        <mappermodel:Properties/>
      </mappermodel:FunctionGraphNode>
      <mappermodel:FunctionGraphNode label="If-Then-Else" type="41" x="545" y="59">
        <mappermodel:InputPins>bool,then,bool,else</mappermodel:InputPins>
        <mappermodel:OutputPins>R</mappermodel:OutputPins>
        <mappermodel:Properties/>
      </mappermodel:FunctionGraphNode>
      <mappermodel:FunctionGraphNode label="991231" type="22" x="76" y="65">
        <mappermodel:InputPins></mappermodel:InputPins>
        <mappermodel:OutputPins>str</mappermodel:OutputPins>
        <mappermodel:Properties/>
      </mappermodel:FunctionGraphNode>
      <mappermodel:FunctionGraphNode label="=" type="31" x="255" y="31">
        <mappermodel:InputPins>1,2</mappermodel:InputPins>
        <mappermodel:OutputPins>R</mappermodel:OutputPins>
        <mappermodel:Properties/>
      </mappermodel:FunctionGraphNode>
      <mappermodel:FunctionGraphNode label="NOT" type="39" x="456" y="22">
        <mappermodel:InputPins>1</mappermodel:InputPins>
        <mappermodel:OutputPins>R</mappermodel:OutputPins>
        <mappermodel:Properties/>
      </mappermodel:FunctionGraphNode>
      <mappermodel:Link inputID="2" inputIndex="0" outputID="1" outputIndex="0"/>
      <mappermodel:Link inputID="0" inputIndex="0" outputID="3" outputIndex="0"/>
      <mappermodel:Link inputID="3" inputIndex="1" outputID="2" outputIndex="0"/>
      <mappermodel:Link inputID="5" inputIndex="0" outputID="2" outputIndex="0"/>
      <mappermodel:Link inputID="5" inputIndex="1" outputID="4" outputIndex="0"/>
      <mappermodel:Link inputID="6" inputIndex="0" outputID="5" outputIndex="0"/>
      <mappermodel:Link inputID="3" inputIndex="0" outputID="6" outputIndex="0"/>
    </mappermodel:GraphModel>
    <mappermodel:GraphModel inputPins="1,2" outputNode="OUT_PORT:0,FinMessage:0,Block4:0,Document:0,MT910:0,F13a:0,[Choice]:0,F13D:0,Time:0" x="1078" y="52">
      <mappermodel:FunctionGraphNode label="991231" type="22" x="203" y="121">
        <mappermodel:InputPins></mappermodel:InputPins>
        <mappermodel:OutputPins>str</mappermodel:OutputPins>
        <mappermodel:Properties/>
      </mappermodel:FunctionGraphNode>
      <mappermodel:TreeGraphNode inputNode="IN_PORT:0,Envelope:0,Document:0,BkToCstmrDbtCdtNtfctn:0,[ONE MANY]:0,Ntfctn:0,[ONE MANY]:0,Ntry:0,BookgDt:0,[Choice]:0,DtTm:0" x="334" y="201">
        <mappermodel:InputPins>1st</mappermodel:InputPins>
        <mappermodel:OutputPins>1st</mappermodel:OutputPins>
      </mappermodel:TreeGraphNode>
      <mappermodel:FunctionGraphNode label="=" type="31" x="382" y="87">
        <mappermodel:InputPins>1,2</mappermodel:InputPins>
        <mappermodel:OutputPins>R</mappermodel:OutputPins>
        <mappermodel:Properties/>
      </mappermodel:FunctionGraphNode>
      <mappermodel:FunctionGraphNode label="NOT" type="39" x="583" y="78">
        <mappermodel:InputPins>1</mappermodel:InputPins>
        <mappermodel:OutputPins>R</mappermodel:OutputPins>
        <mappermodel:Properties/>
      </mappermodel:FunctionGraphNode>
      <mappermodel:FunctionGraphNode label="If-Then-Else" type="41" x="672" y="115">
        <mappermodel:InputPins>bool,then,bool,else</mappermodel:InputPins>
        <mappermodel:OutputPins>R</mappermodel:OutputPins>
        <mappermodel:Properties/>
      </mappermodel:FunctionGraphNode>
      <mappermodel:FunctionGraphNode label="MXToMT:com.fiorano.funclet.MXtoMT.MX_To_MTDateTimeOffset_Date(java.lang.String arg1)" type="69" x="663" y="203">
        <mappermodel:InputPins>arg1</mappermodel:InputPins>
        <mappermodel:OutputPins>R</mappermodel:OutputPins>
        <mappermodel:Properties/>
      </mappermodel:FunctionGraphNode>
      <mappermodel:FunctionGraphNode label="MXToMT:com.fiorano.funclet.MXtoMT.MX_To_MTDateTimeOffset_Time(java.lang.String arg1)" type="69" x="77" y="175">
        <mappermodel:InputPins>arg1</mappermodel:InputPins>
        <mappermodel:OutputPins>R</mappermodel:OutputPins>
        <mappermodel:Properties/>
      </mappermodel:FunctionGraphNode>
      <mappermodel:Link inputID="6" inputIndex="0" outputID="2" outputIndex="0"/>
      <mappermodel:Link inputID="3" inputIndex="0" outputID="6" outputIndex="0"/>
      <mappermodel:Link inputID="3" inputIndex="1" outputID="1" outputIndex="0"/>
      <mappermodel:Link inputID="4" inputIndex="0" outputID="3" outputIndex="0"/>
      <mappermodel:Link inputID="5" inputIndex="0" outputID="4" outputIndex="0"/>
      <mappermodel:Link inputID="0" inputIndex="0" outputID="5" outputIndex="0"/>
      <mappermodel:Link inputID="5" inputIndex="1" outputID="7" outputIndex="0"/>
      <mappermodel:Link inputID="7" inputIndex="0" outputID="2" outputIndex="0"/>
    </mappermodel:GraphModel>
    <mappermodel:GraphModel inputPins="1,2" outputNode="OUT_PORT:0,FinMessage:0,Block4:0,Document:0,MT910:0,F13a:0,[Choice]:0,F13D:0,Sign:0" x="1924" y="34">
      <mappermodel:FunctionGraphNode label="991231" type="22" x="1020" y="60">
        <mappermodel:InputPins></mappermodel:InputPins>
        <mappermodel:OutputPins>str</mappermodel:OutputPins>
        <mappermodel:Properties/>
      </mappermodel:FunctionGraphNode>
      <mappermodel:TreeGraphNode inputNode="IN_PORT:0,Envelope:0,Document:0,BkToCstmrDbtCdtNtfctn:0,[ONE MANY]:0,Ntfctn:0,[ONE MANY]:0,Ntry:0,BookgDt:0,[Choice]:0,DtTm:0" x="1151" y="140">
        <mappermodel:InputPins>1st</mappermodel:InputPins>
        <mappermodel:OutputPins>1st</mappermodel:OutputPins>
      </mappermodel:TreeGraphNode>
      <mappermodel:FunctionGraphNode label="=" type="31" x="1199" y="26">
        <mappermodel:InputPins>1,2</mappermodel:InputPins>
        <mappermodel:OutputPins>R</mappermodel:OutputPins>
        <mappermodel:Properties/>
      </mappermodel:FunctionGraphNode>
      <mappermodel:FunctionGraphNode label="NOT" type="39" x="1400" y="17">
        <mappermodel:InputPins>1</mappermodel:InputPins>
        <mappermodel:OutputPins>R</mappermodel:OutputPins>
        <mappermodel:Properties/>
      </mappermodel:FunctionGraphNode>
      <mappermodel:FunctionGraphNode label="If-Then-Else" type="41" x="1489" y="54">
        <mappermodel:InputPins>bool,then,bool,else</mappermodel:InputPins>
        <mappermodel:OutputPins>R</mappermodel:OutputPins>
        <mappermodel:Properties/>
      </mappermodel:FunctionGraphNode>
      <mappermodel:FunctionGraphNode label="MXToMT:com.fiorano.funclet.MXtoMT.MX_To_MTDateTimeOffset_Date(java.lang.String arg1)" type="69" x="1480" y="142">
        <mappermodel:InputPins>arg1</mappermodel:InputPins>
        <mappermodel:OutputPins>R</mappermodel:OutputPins>
        <mappermodel:Properties/>
      </mappermodel:FunctionGraphNode>
      <mappermodel:FunctionGraphNode label="MXToMT:com.fiorano.funclet.MXtoMT.MX_To_MTDateTimeOffset_Sign(java.lang.String arg1)" type="69" x="998" y="153">
        <mappermodel:InputPins>arg1</mappermodel:InputPins>
        <mappermodel:OutputPins>R</mappermodel:OutputPins>
        <mappermodel:Properties/>
      </mappermodel:FunctionGraphNode>
      <mappermodel:Link inputID="6" inputIndex="0" outputID="2" outputIndex="0"/>
      <mappermodel:Link inputID="3" inputIndex="0" outputID="6" outputIndex="0"/>
      <mappermodel:Link inputID="3" inputIndex="1" outputID="1" outputIndex="0"/>
      <mappermodel:Link inputID="4" inputIndex="0" outputID="3" outputIndex="0"/>
      <mappermodel:Link inputID="5" inputIndex="0" outputID="4" outputIndex="0"/>
      <mappermodel:Link inputID="0" inputIndex="0" outputID="5" outputIndex="0"/>
      <mappermodel:Link inputID="5" inputIndex="1" outputID="7" outputIndex="0"/>
      <mappermodel:Link inputID="7" inputIndex="0" outputID="2" outputIndex="0"/>
    </mappermodel:GraphModel>
    <mappermodel:GraphModel inputPins="1,2" outputNode="OUT_PORT:0,FinMessage:0,Block4:0,Document:0,MT910:0,F13a:0,[Choice]:0,F13D:0,Offset:0" x="1169" y="70">
      <mappermodel:FunctionGraphNode label="991231" type="22" x="442" y="112">
        <mappermodel:InputPins></mappermodel:InputPins>
        <mappermodel:OutputPins>str</mappermodel:OutputPins>
        <mappermodel:Properties/>
      </mappermodel:FunctionGraphNode>
      <mappermodel:TreeGraphNode inputNode="IN_PORT:0,Envelope:0,Document:0,BkToCstmrDbtCdtNtfctn:0,[ONE MANY]:0,Ntfctn:0,[ONE MANY]:0,Ntry:0,BookgDt:0,[Choice]:0,DtTm:0" x="573" y="192">
        <mappermodel:InputPins>1st</mappermodel:InputPins>
        <mappermodel:OutputPins>1st</mappermodel:OutputPins>
      </mappermodel:TreeGraphNode>
      <mappermodel:FunctionGraphNode label="=" type="31" x="621" y="78">
        <mappermodel:InputPins>1,2</mappermodel:InputPins>
        <mappermodel:OutputPins>R</mappermodel:OutputPins>
        <mappermodel:Properties/>
      </mappermodel:FunctionGraphNode>
      <mappermodel:FunctionGraphNode label="NOT" type="39" x="822" y="69">
        <mappermodel:InputPins>1</mappermodel:InputPins>
        <mappermodel:OutputPins>R</mappermodel:OutputPins>
        <mappermodel:Properties/>
      </mappermodel:FunctionGraphNode>
      <mappermodel:FunctionGraphNode label="If-Then-Else" type="41" x="911" y="106">
        <mappermodel:InputPins>bool,then,bool,else</mappermodel:InputPins>
        <mappermodel:OutputPins>R</mappermodel:OutputPins>
        <mappermodel:Properties/>
      </mappermodel:FunctionGraphNode>
      <mappermodel:FunctionGraphNode label="MXToMT:com.fiorano.funclet.MXtoMT.MX_To_MTDateTimeOffset_Date(java.lang.String arg1)" type="69" x="902" y="194">
        <mappermodel:InputPins>arg1</mappermodel:InputPins>
        <mappermodel:OutputPins>R</mappermodel:OutputPins>
        <mappermodel:Properties/>
      </mappermodel:FunctionGraphNode>
      <mappermodel:FunctionGraphNode label="MXToMT:com.fiorano.funclet.MXtoMT.MX_To_MTDateTimeOffset_Offset(java.lang.String arg1)" type="69" x="270" y="181">
        <mappermodel:InputPins>arg1</mappermodel:InputPins>
        <mappermodel:OutputPins>R</mappermodel:OutputPins>
        <mappermodel:Properties/>
      </mappermodel:FunctionGraphNode>
      <mappermodel:Link inputID="6" inputIndex="0" outputID="2" outputIndex="0"/>
      <mappermodel:Link inputID="3" inputIndex="0" outputID="6" outputIndex="0"/>
      <mappermodel:Link inputID="3" inputIndex="1" outputID="1" outputIndex="0"/>
      <mappermodel:Link inputID="4" inputIndex="0" outputID="3" outputIndex="0"/>
      <mappermodel:Link inputID="5" inputIndex="0" outputID="4" outputIndex="0"/>
      <mappermodel:Link inputID="0" inputIndex="0" outputID="5" outputIndex="0"/>
      <mappermodel:Link inputID="7" inputIndex="0" outputID="2" outputIndex="0"/>
      <mappermodel:Link inputID="5" inputIndex="1" outputID="7" outputIndex="0"/>
    </mappermodel:GraphModel>
    <mappermodel:GraphModel inputPins="1,2" outputNode="OUT_PORT:0,FinMessage:0,Block1:0,SessionNumber:0" x="-1" y="-1">
      <mappermodel:FunctionGraphNode label="0000" type="22" x="72" y="96">
        <mappermodel:InputPins></mappermodel:InputPins>
        <mappermodel:OutputPins>str</mappermodel:OutputPins>
        <mappermodel:Properties/>
      </mappermodel:FunctionGraphNode>
      <mappermodel:Link inputID="0" inputIndex="0" outputID="1" outputIndex="0"/>
    </mappermodel:GraphModel>
    <mappermodel:GraphModel inputPins="1,2" outputNode="OUT_PORT:0,FinMessage:0,Block1:0,SequenceNumber:0" x="-1" y="-1">
      <mappermodel:FunctionGraphNode label="000000" type="22" x="93" y="114">
        <mappermodel:InputPins></mappermodel:InputPins>
        <mappermodel:OutputPins>str</mappermodel:OutputPins>
        <mappermodel:Properties/>
      </mappermodel:FunctionGraphNode>
      <mappermodel:Link inputID="0" inputIndex="0" outputID="1" outputIndex="0"/>
    </mappermodel:GraphModel>
    <mappermodel:GraphModel inputPins="1,2" outputNode="OUT_PORT:0,FinMessage:0,Block2:0,[Choice]:0,MessagePriority:1" x="738" y="91">
      <mappermodel:TreeGraphNode inputNode="IN_PORT:0,Envelope:0,AppHdr:0,Prty:0" x="137" y="86">
        <mappermodel:InputPins>1st</mappermodel:InputPins>
        <mappermodel:OutputPins>1st</mappermodel:OutputPins>
      </mappermodel:TreeGraphNode>
      <mappermodel:FunctionGraphNode label="HIGH" type="22" x="317" y="131">
        <mappermodel:InputPins></mappermodel:InputPins>
        <mappermodel:OutputPins>str</mappermodel:OutputPins>
        <mappermodel:Properties/>
      </mappermodel:FunctionGraphNode>
      <mappermodel:FunctionGraphNode label="=" type="31" x="489" y="86">
        <mappermodel:InputPins>1,2</mappermodel:InputPins>
        <mappermodel:OutputPins>R</mappermodel:OutputPins>
        <mappermodel:Properties/>
      </mappermodel:FunctionGraphNode>
      <mappermodel:FunctionGraphNode label="U" type="22" x="236" y="184">
        <mappermodel:InputPins></mappermodel:InputPins>
        <mappermodel:OutputPins>str</mappermodel:OutputPins>
        <mappermodel:Properties/>
      </mappermodel:FunctionGraphNode>
      <mappermodel:FunctionGraphNode label="N" type="22" x="430" y="210">
        <mappermodel:InputPins></mappermodel:InputPins>
        <mappermodel:OutputPins>str</mappermodel:OutputPins>
        <mappermodel:Properties/>
      </mappermodel:FunctionGraphNode>
      <mappermodel:FunctionGraphNode label="If-Then-Else" type="41" x="630" y="119">
        <mappermodel:InputPins>bool,then,bool,else</mappermodel:InputPins>
        <mappermodel:OutputPins>R</mappermodel:OutputPins>
        <mappermodel:Properties/>
      </mappermodel:FunctionGraphNode>
      <mappermodel:Link inputID="3" inputIndex="0" outputID="1" outputIndex="0"/>
      <mappermodel:Link inputID="3" inputIndex="1" outputID="2" outputIndex="0"/>
      <mappermodel:Link inputID="6" inputIndex="0" outputID="3" outputIndex="0"/>
      <mappermodel:Link inputID="6" inputIndex="1" outputID="4" outputIndex="0"/>
      <mappermodel:Link inputID="6" inputIndex="3" outputID="5" outputIndex="0"/>
      <mappermodel:Link inputID="0" inputIndex="0" outputID="6" outputIndex="0"/>
    </mappermodel:GraphModel>
    <mappermodel:GraphModel inputPins="1,2" outputNode="OUT_PORT:0,FinMessage:0,Block1:0,LogicalTerminalAddress:0" x="685" y="82">
      <mappermodel:TreeGraphNode inputNode="IN_PORT:0,Envelope:0,AppHdr:0,To:0,[Choice]:0,FIId:0,FinInstnId:0,BICFI:0" x="131" y="164">
        <mappermodel:InputPins>1st</mappermodel:InputPins>
        <mappermodel:OutputPins>1st</mappermodel:OutputPins>
      </mappermodel:TreeGraphNode>
      <mappermodel:FunctionGraphNode label="MXToMT:com.fiorano.funclet.MXtoMT.MX_To_MT_BICFI_LogicalAddress(java.lang.String arg1)" type="69" x="356" y="228">
        <mappermodel:InputPins>arg1</mappermodel:InputPins>
        <mappermodel:OutputPins>R</mappermodel:OutputPins>
        <mappermodel:Properties/>
      </mappermodel:FunctionGraphNode>
      <mappermodel:Link inputID="2" inputIndex="0" outputID="1" outputIndex="0"/>
      <mappermodel:Link inputID="0" inputIndex="0" outputID="2" outputIndex="0"/>
    </mappermodel:GraphModel>
    <mappermodel:GraphModel inputPins="1,2" outputNode="OUT_PORT:0,FinMessage:0,Block2:0,[Choice]:0,OutputIdentifier:0" x="-1" y="-1">
      <mappermodel:FunctionGraphNode label="O" type="22" x="179" y="200">
        <mappermodel:InputPins></mappermodel:InputPins>
        <mappermodel:OutputPins>str</mappermodel:OutputPins>
        <mappermodel:Properties/>
      </mappermodel:FunctionGraphNode>
      <mappermodel:Link inputID="0" inputIndex="0" outputID="1" outputIndex="0"/>
    </mappermodel:GraphModel>
    <mappermodel:GraphModel inputPins="1,2" outputNode="OUT_PORT:0,FinMessage:0,Block2:0,[Choice]:0,MessageInputReference:0,SessionNumber:0" x="-1" y="-1">
      <mappermodel:FunctionGraphNode label="0000" type="22" x="142" y="217">
        <mappermodel:InputPins></mappermodel:InputPins>
        <mappermodel:OutputPins>str</mappermodel:OutputPins>
        <mappermodel:Properties/>
      </mappermodel:FunctionGraphNode>
      <mappermodel:Link inputID="0" inputIndex="0" outputID="1" outputIndex="0"/>
    </mappermodel:GraphModel>
    <mappermodel:GraphModel inputPins="1,2" outputNode="OUT_PORT:0,FinMessage:0,Block2:0,[Choice]:0,MessageInputReference:0,ISN:0" x="-1" y="-1">
      <mappermodel:FunctionGraphNode label="000000" type="22" x="103" y="177">
        <mappermodel:InputPins></mappermodel:InputPins>
        <mappermodel:OutputPins>str</mappermodel:OutputPins>
        <mappermodel:Properties/>
      </mappermodel:FunctionGraphNode>
      <mappermodel:Link inputID="0" inputIndex="0" outputID="1" outputIndex="0"/>
    </mappermodel:GraphModel>
    <mappermodel:GraphModel inputPins="1,2" outputNode="OUT_PORT:0,FinMessage:0,Block2:0,[Choice]:0,InputTime:0" x="994" y="20">
      <mappermodel:FunctionGraphNode label="OuputTime" type="22" x="20" y="20">
        <mappermodel:InputPins></mappermodel:InputPins>
        <mappermodel:OutputPins>str</mappermodel:OutputPins>
        <mappermodel:Properties/>
      </mappermodel:FunctionGraphNode>
      <mappermodel:FunctionGraphNode label="getStringProperty" type="144" x="216" y="20">
        <mappermodel:InputPins>name</mappermodel:InputPins>
        <mappermodel:OutputPins>string</mappermodel:OutputPins>
        <mappermodel:Properties/>
      </mappermodel:FunctionGraphNode>
      <mappermodel:FunctionGraphNode label="0000" type="22" x="533" y="84">
        <mappermodel:InputPins></mappermodel:InputPins>
        <mappermodel:OutputPins>str</mappermodel:OutputPins>
        <mappermodel:Properties/>
      </mappermodel:FunctionGraphNode>
      <mappermodel:FunctionGraphNode label="Length" type="21" x="533" y="20">
        <mappermodel:InputPins>str</mappermodel:InputPins>
        <mappermodel:OutputPins>num</mappermodel:OutputPins>
        <mappermodel:Properties/>
      </mappermodel:FunctionGraphNode>
      <mappermodel:FunctionGraphNode label="If-Then-Else" type="41" x="749" y="20">
        <mappermodel:InputPins>bool,then,bool,else</mappermodel:InputPins>
        <mappermodel:OutputPins>R</mappermodel:OutputPins>
        <mappermodel:Properties/>
      </mappermodel:FunctionGraphNode>
      <mappermodel:Link inputID="2" inputIndex="0" outputID="1" outputIndex="0"/>
      <mappermodel:Link inputID="4" inputIndex="0" outputID="2" outputIndex="0"/>
      <mappermodel:Link inputID="5" inputIndex="0" outputID="4" outputIndex="0"/>
      <mappermodel:Link inputID="5" inputIndex="1" outputID="2" outputIndex="0"/>
      <mappermodel:Link inputID="5" inputIndex="3" outputID="3" outputIndex="0"/>
      <mappermodel:Link inputID="0" inputIndex="0" outputID="5" outputIndex="0"/>
    </mappermodel:GraphModel>
    <mappermodel:GraphModel inputPins="1,2" outputNode="OUT_PORT:0,FinMessage:0,Block2:0,[Choice]:0,MessageInputReference:0,Date:0" x="993" y="20">
      <mappermodel:FunctionGraphNode label="OuputDate" type="22" x="20" y="20">
        <mappermodel:InputPins></mappermodel:InputPins>
        <mappermodel:OutputPins>str</mappermodel:OutputPins>
        <mappermodel:Properties/>
      </mappermodel:FunctionGraphNode>
      <mappermodel:FunctionGraphNode label="getStringProperty" type="144" x="215" y="20">
        <mappermodel:InputPins>name</mappermodel:InputPins>
        <mappermodel:OutputPins>string</mappermodel:OutputPins>
        <mappermodel:Properties/>
      </mappermodel:FunctionGraphNode>
      <mappermodel:FunctionGraphNode label="Length" type="21" x="532" y="20">
        <mappermodel:InputPins>str</mappermodel:InputPins>
        <mappermodel:OutputPins>num</mappermodel:OutputPins>
        <mappermodel:Properties/>
      </mappermodel:FunctionGraphNode>
      <mappermodel:FunctionGraphNode label="991231" type="22" x="532" y="84">
        <mappermodel:InputPins></mappermodel:InputPins>
        <mappermodel:OutputPins>str</mappermodel:OutputPins>
        <mappermodel:Properties/>
      </mappermodel:FunctionGraphNode>
      <mappermodel:FunctionGraphNode label="If-Then-Else" type="41" x="748" y="20">
        <mappermodel:InputPins>bool,then,bool,else</mappermodel:InputPins>
        <mappermodel:OutputPins>R</mappermodel:OutputPins>
        <mappermodel:Properties/>
      </mappermodel:FunctionGraphNode>
      <mappermodel:Link inputID="2" inputIndex="0" outputID="1" outputIndex="0"/>
      <mappermodel:Link inputID="5" inputIndex="3" outputID="4" outputIndex="0"/>
      <mappermodel:Link inputID="3" inputIndex="0" outputID="2" outputIndex="0"/>
      <mappermodel:Link inputID="5" inputIndex="0" outputID="3" outputIndex="0"/>
      <mappermodel:Link inputID="5" inputIndex="1" outputID="2" outputIndex="0"/>
      <mappermodel:Link inputID="0" inputIndex="0" outputID="5" outputIndex="0"/>
    </mappermodel:GraphModel>
    <mappermodel:GraphModel inputPins="1,2" outputNode="OUT_PORT:0,FinMessage:0,Block2:0,[Choice]:0,Date:0" x="994" y="20">
      <mappermodel:FunctionGraphNode label="991231" type="22" x="533" y="84">
        <mappermodel:InputPins></mappermodel:InputPins>
        <mappermodel:OutputPins>str</mappermodel:OutputPins>
        <mappermodel:Properties/>
      </mappermodel:FunctionGraphNode>
      <mappermodel:FunctionGraphNode label="OuputDate" type="22" x="20" y="20">
        <mappermodel:InputPins></mappermodel:InputPins>
        <mappermodel:OutputPins>str</mappermodel:OutputPins>
        <mappermodel:Properties/>
      </mappermodel:FunctionGraphNode>
      <mappermodel:FunctionGraphNode label="getStringProperty" type="144" x="216" y="20">
        <mappermodel:InputPins>name</mappermodel:InputPins>
        <mappermodel:OutputPins>string</mappermodel:OutputPins>
        <mappermodel:Properties/>
      </mappermodel:FunctionGraphNode>
      <mappermodel:FunctionGraphNode label="If-Then-Else" type="41" x="749" y="20">
        <mappermodel:InputPins>bool,then,bool,else</mappermodel:InputPins>
        <mappermodel:OutputPins>R</mappermodel:OutputPins>
        <mappermodel:Properties/>
      </mappermodel:FunctionGraphNode>
      <mappermodel:FunctionGraphNode label="Length" type="21" x="533" y="20">
        <mappermodel:InputPins>str</mappermodel:InputPins>
        <mappermodel:OutputPins>num</mappermodel:OutputPins>
        <mappermodel:Properties/>
      </mappermodel:FunctionGraphNode>
      <mappermodel:Link inputID="3" inputIndex="0" outputID="2" outputIndex="0"/>
      <mappermodel:Link inputID="0" inputIndex="0" outputID="4" outputIndex="0"/>
      <mappermodel:Link inputID="4" inputIndex="3" outputID="1" outputIndex="0"/>
      <mappermodel:Link inputID="5" inputIndex="0" outputID="3" outputIndex="0"/>
      <mappermodel:Link inputID="4" inputIndex="0" outputID="5" outputIndex="0"/>
      <mappermodel:Link inputID="4" inputIndex="1" outputID="3" outputIndex="0"/>
    </mappermodel:GraphModel>
    <mappermodel:GraphModel inputPins="1,2" outputNode="OUT_PORT:0,FinMessage:0,Block2:0,[Choice]:0,Time:0" x="994" y="20">
      <mappermodel:FunctionGraphNode label="0000" type="22" x="533" y="84">
        <mappermodel:InputPins></mappermodel:InputPins>
        <mappermodel:OutputPins>str</mappermodel:OutputPins>
        <mappermodel:Properties/>
      </mappermodel:FunctionGraphNode>
      <mappermodel:FunctionGraphNode label="getStringProperty" type="144" x="216" y="20">
        <mappermodel:InputPins>name</mappermodel:InputPins>
        <mappermodel:OutputPins>string</mappermodel:OutputPins>
        <mappermodel:Properties/>
      </mappermodel:FunctionGraphNode>
      <mappermodel:FunctionGraphNode label="OuputTime" type="22" x="20" y="20">
        <mappermodel:InputPins></mappermodel:InputPins>
        <mappermodel:OutputPins>str</mappermodel:OutputPins>
        <mappermodel:Properties/>
      </mappermodel:FunctionGraphNode>
      <mappermodel:FunctionGraphNode label="Length" type="21" x="533" y="20">
        <mappermodel:InputPins>str</mappermodel:InputPins>
        <mappermodel:OutputPins>num</mappermodel:OutputPins>
        <mappermodel:Properties/>
      </mappermodel:FunctionGraphNode>
      <mappermodel:FunctionGraphNode label="If-Then-Else" type="41" x="749" y="20">
        <mappermodel:InputPins>bool,then,bool,else</mappermodel:InputPins>
        <mappermodel:OutputPins>R</mappermodel:OutputPins>
        <mappermodel:Properties/>
      </mappermodel:FunctionGraphNode>
      <mappermodel:Link inputID="2" inputIndex="0" outputID="3" outputIndex="0"/>
      <mappermodel:Link inputID="4" inputIndex="0" outputID="2" outputIndex="0"/>
      <mappermodel:Link inputID="5" inputIndex="0" outputID="4" outputIndex="0"/>
      <mappermodel:Link inputID="5" inputIndex="1" outputID="2" outputIndex="0"/>
      <mappermodel:Link inputID="5" inputIndex="3" outputID="1" outputIndex="0"/>
      <mappermodel:Link inputID="0" inputIndex="0" outputID="5" outputIndex="0"/>
    </mappermodel:GraphModel>
    <mappermodel:GraphModel inputPins="1,2" outputNode="OUT_PORT:0,FinMessage:0,Block2:0,[Choice]:0,MessageInputReference:0,LTIdentifier:0" x="714" y="96">
      <mappermodel:TreeGraphNode inputNode="IN_PORT:0,Envelope:0,AppHdr:0,Fr:0,[Choice]:0,FIId:0,FinInstnId:0,BICFI:0" x="-1" y="-1">
        <mappermodel:InputPins>1st</mappermodel:InputPins>
        <mappermodel:OutputPins>1st</mappermodel:OutputPins>
      </mappermodel:TreeGraphNode>
      <mappermodel:FunctionGraphNode label="MXToMT:com.fiorano.funclet.MXtoMT.MX_To_MT_BICFI_LTIAddress(java.lang.String arg1)" type="69" x="323" y="186">
        <mappermodel:InputPins>arg1</mappermodel:InputPins>
        <mappermodel:OutputPins>R</mappermodel:OutputPins>
        <mappermodel:Properties/>
      </mappermodel:FunctionGraphNode>
      <mappermodel:Link inputID="2" inputIndex="0" outputID="1" outputIndex="0"/>
      <mappermodel:Link inputID="0" inputIndex="0" outputID="2" outputIndex="0"/>
    </mappermodel:GraphModel>
    <mappermodel:GraphModel inputPins="1,2" outputNode="OUT_PORT:0,FinMessage:0,Block2:0,[Choice]:0,MessageInputReference:0,BranchCode:0" x="1010" y="92">
      <mappermodel:TreeGraphNode inputNode="IN_PORT:0,Envelope:0,AppHdr:0,Fr:0,[Choice]:0,FIId:0,FinInstnId:0,BICFI:0" x="171" y="78">
        <mappermodel:InputPins>1st</mappermodel:InputPins>
        <mappermodel:OutputPins>1st</mappermodel:OutputPins>
      </mappermodel:TreeGraphNode>
      <mappermodel:FunctionGraphNode label="Length" type="21" x="403" y="73">
        <mappermodel:InputPins>str</mappermodel:InputPins>
        <mappermodel:OutputPins>num</mappermodel:OutputPins>
        <mappermodel:Properties/>
      </mappermodel:FunctionGraphNode>
      <mappermodel:FunctionGraphNode label="SubString-Offset-Length" type="26" x="254" y="202">
        <mappermodel:InputPins>str,offset,length</mappermodel:InputPins>
        <mappermodel:OutputPins>str</mappermodel:OutputPins>
        <mappermodel:Properties/>
      </mappermodel:FunctionGraphNode>
      <mappermodel:FunctionGraphNode label="2" type="22" x="98" y="214">
        <mappermodel:InputPins></mappermodel:InputPins>
        <mappermodel:OutputPins>str</mappermodel:OutputPins>
        <mappermodel:Properties/>
      </mappermodel:FunctionGraphNode>
      <mappermodel:FunctionGraphNode label="If-Then-Else" type="41" x="761" y="184">
        <mappermodel:InputPins>bool,then,bool,else</mappermodel:InputPins>
        <mappermodel:OutputPins>R</mappermodel:OutputPins>
        <mappermodel:Properties/>
      </mappermodel:FunctionGraphNode>
      <mappermodel:FunctionGraphNode label="11" type="22" x="326" y="153">
        <mappermodel:InputPins></mappermodel:InputPins>
        <mappermodel:OutputPins>str</mappermodel:OutputPins>
        <mappermodel:Properties/>
      </mappermodel:FunctionGraphNode>
      <mappermodel:FunctionGraphNode label=">=" type="35" x="517" y="134">
        <mappermodel:InputPins>1,2</mappermodel:InputPins>
        <mappermodel:OutputPins>R</mappermodel:OutputPins>
        <mappermodel:Properties/>
      </mappermodel:FunctionGraphNode>
      <mappermodel:FunctionGraphNode label="-" type="2" x="92" y="299">
        <mappermodel:InputPins>num1,num2</mappermodel:InputPins>
        <mappermodel:OutputPins>num</mappermodel:OutputPins>
        <mappermodel:Properties/>
      </mappermodel:FunctionGraphNode>
      <mappermodel:FunctionGraphNode label="XXX" type="22" x="410" y="320">
        <mappermodel:InputPins></mappermodel:InputPins>
        <mappermodel:OutputPins>str</mappermodel:OutputPins>
        <mappermodel:Properties/>
      </mappermodel:FunctionGraphNode>
      <mappermodel:Link inputID="7" inputIndex="1" outputID="6" outputIndex="0"/>
      <mappermodel:Link inputID="2" inputIndex="0" outputID="1" outputIndex="0"/>
      <mappermodel:Link inputID="7" inputIndex="0" outputID="2" outputIndex="0"/>
      <mappermodel:Link inputID="5" inputIndex="0" outputID="7" outputIndex="0"/>
      <mappermodel:Link inputID="3" inputIndex="0" outputID="1" outputIndex="0"/>
      <mappermodel:Link inputID="3" inputIndex="2" outputID="2" outputIndex="0"/>
      <mappermodel:Link inputID="8" inputIndex="0" outputID="2" outputIndex="0"/>
      <mappermodel:Link inputID="8" inputIndex="1" outputID="4" outputIndex="0"/>
      <mappermodel:Link inputID="3" inputIndex="1" outputID="8" outputIndex="0"/>
      <mappermodel:Link inputID="0" inputIndex="0" outputID="5" outputIndex="0"/>
      <mappermodel:Link inputID="5" inputIndex="1" outputID="3" outputIndex="0"/>
      <mappermodel:Link inputID="5" inputIndex="3" outputID="9" outputIndex="0"/>
    </mappermodel:GraphModel>
    <mappermodel:GraphModel inputPins="1,2" outputNode="OUT_PORT:0,FinMessage:0,Block2:0,[Choice]:0,MessageType:1" x="979" y="120">
      <mappermodel:FunctionGraphNode label="900" type="22" x="63" y="212">
        <mappermodel:InputPins></mappermodel:InputPins>
        <mappermodel:OutputPins>str</mappermodel:OutputPins>
        <mappermodel:Properties/>
      </mappermodel:FunctionGraphNode>
      <mappermodel:FunctionGraphNode label="910" type="22" x="58" y="169">
        <mappermodel:InputPins></mappermodel:InputPins>
        <mappermodel:OutputPins>str</mappermodel:OutputPins>
        <mappermodel:Properties/>
      </mappermodel:FunctionGraphNode>
      <mappermodel:FunctionGraphNode label="If-Then-Else" type="41" x="560" y="172">
        <mappermodel:InputPins>bool,then,bool,else</mappermodel:InputPins>
        <mappermodel:OutputPins>R</mappermodel:OutputPins>
        <mappermodel:Properties/>
      </mappermodel:FunctionGraphNode>
      <mappermodel:FunctionGraphNode label="OR" type="37" x="502" y="64">
        <mappermodel:InputPins>1,2,3</mappermodel:InputPins>
        <mappermodel:OutputPins>R</mappermodel:OutputPins>
        <mappermodel:Properties/>
      </mappermodel:FunctionGraphNode>
      <mappermodel:TreeGraphNode inputNode="IN_PORT:0,Envelope:0,Document:0,BkToCstmrDbtCdtNtfctn:0,[ONE MANY]:0,Ntfctn:0,[ONE MANY]:0,Ntry:0,[ZERO MANY]:1,NtryDtls:0,[ZERO MANY]:0,TxDtls:0,RltdPties:0,Dbtr:0,[Choice]:0,Pty:0" x="98" y="23">
        <mappermodel:InputPins>1st</mappermodel:InputPins>
        <mappermodel:OutputPins>1st</mappermodel:OutputPins>
      </mappermodel:TreeGraphNode>
      <mappermodel:FunctionGraphNode label="Length" type="21" x="286" y="30">
        <mappermodel:InputPins>str</mappermodel:InputPins>
        <mappermodel:OutputPins>num</mappermodel:OutputPins>
        <mappermodel:Properties/>
      </mappermodel:FunctionGraphNode>
      <mappermodel:TreeGraphNode inputNode="IN_PORT:0,Envelope:0,Document:0,BkToCstmrDbtCdtNtfctn:0,[ONE MANY]:0,Ntfctn:0,[ONE MANY]:0,Ntry:0,[ZERO MANY]:1,NtryDtls:0,[ZERO MANY]:0,TxDtls:0,RltdAgts:0,IntrmyAgt1:0" x="36" y="105">
        <mappermodel:InputPins>1st</mappermodel:InputPins>
        <mappermodel:OutputPins>1st</mappermodel:OutputPins>
      </mappermodel:TreeGraphNode>
      <mappermodel:FunctionGraphNode label="Length" type="21" x="274" y="116">
        <mappermodel:InputPins>str</mappermodel:InputPins>
        <mappermodel:OutputPins>num</mappermodel:OutputPins>
        <mappermodel:Properties/>
      </mappermodel:FunctionGraphNode>
      <mappermodel:Link inputID="0" inputIndex="0" outputID="3" outputIndex="0"/>
      <mappermodel:Link inputID="3" inputIndex="0" outputID="4" outputIndex="0"/>
      <mappermodel:Link inputID="6" inputIndex="0" outputID="5" outputIndex="0"/>
      <mappermodel:Link inputID="4" inputIndex="0" outputID="6" outputIndex="0"/>
      <mappermodel:Link inputID="8" inputIndex="0" outputID="7" outputIndex="0"/>
      <mappermodel:Link inputID="4" inputIndex="1" outputID="8" outputIndex="0"/>
      <mappermodel:Link inputID="3" inputIndex="3" outputID="2" outputIndex="0"/>
      <mappermodel:Link inputID="3" inputIndex="1" outputID="1" outputIndex="0"/>
    </mappermodel:GraphModel>
    <mappermodel:GraphModel inputPins="1,2" outputNode="OUT_PORT:0,FinMessage:0,Block2:0,[Choice]:0,MessageType:0" x="655" y="20">
      <mappermodel:TreeGraphNode inputNode="IN_PORT:0,Envelope:0,Document:0,BkToCstmrDbtCdtNtfctn:0,[ONE MANY]:0,Ntfctn:0,[ONE MANY]:0,Ntry:0,CdtDbtInd:0" x="20" y="20">
        <mappermodel:InputPins>1st</mappermodel:InputPins>
        <mappermodel:OutputPins>1st</mappermodel:OutputPins>
      </mappermodel:TreeGraphNode>
      <mappermodel:FunctionGraphNode label="!=" type="32" x="253" y="20">
        <mappermodel:InputPins>1,2</mappermodel:InputPins>
        <mappermodel:OutputPins>R</mappermodel:OutputPins>
        <mappermodel:Properties/>
      </mappermodel:FunctionGraphNode>
      <mappermodel:FunctionGraphNode label="If-Then-Else" type="41" x="410" y="20">
        <mappermodel:InputPins>bool,then,bool,else</mappermodel:InputPins>
        <mappermodel:OutputPins>R</mappermodel:OutputPins>
        <mappermodel:Properties/>
      </mappermodel:FunctionGraphNode>
      <mappermodel:FunctionGraphNode label="CRDT" type="22" x="20" y="82">
        <mappermodel:InputPins></mappermodel:InputPins>
        <mappermodel:OutputPins>str</mappermodel:OutputPins>
        <mappermodel:Properties/>
      </mappermodel:FunctionGraphNode>
      <mappermodel:FunctionGraphNode label="900" type="22" x="253" y="90">
        <mappermodel:InputPins></mappermodel:InputPins>
        <mappermodel:OutputPins>str</mappermodel:OutputPins>
        <mappermodel:Properties/>
      </mappermodel:FunctionGraphNode>
      <mappermodel:FunctionGraphNode label="910" type="22" x="253" y="154">
        <mappermodel:InputPins></mappermodel:InputPins>
        <mappermodel:OutputPins>str</mappermodel:OutputPins>
        <mappermodel:Properties/>
      </mappermodel:FunctionGraphNode>
      <mappermodel:Link inputID="2" inputIndex="0" outputID="1" outputIndex="0"/>
      <mappermodel:Link inputID="2" inputIndex="1" outputID="4" outputIndex="0"/>
      <mappermodel:Link inputID="3" inputIndex="0" outputID="2" outputIndex="0"/>
      <mappermodel:Link inputID="3" inputIndex="1" outputID="5" outputIndex="0"/>
      <mappermodel:Link inputID="0" inputIndex="0" outputID="3" outputIndex="0"/>
      <mappermodel:Link inputID="3" inputIndex="3" outputID="6" outputIndex="0"/>
    </mappermodel:GraphModel>
    <mappermodel:GraphModel inputPins="1,2" outputNode="OUT_PORT:0,FinMessage:0,Block2:0,[Choice]:0,DeliveryMonitoring:0" x="941" y="20">
      <mappermodel:TreeGraphNode inputNode="IN_PORT:0,Envelope:0,Document:0,BkToCstmrDbtCdtNtfctn:0,[ONE MANY]:0,Ntfctn:0,[ONE MANY]:0,Ntry:0,CdtDbtInd:0" x="20" y="20">
        <mappermodel:InputPins>1st</mappermodel:InputPins>
        <mappermodel:OutputPins>1st</mappermodel:OutputPins>
      </mappermodel:TreeGraphNode>
      <mappermodel:FunctionGraphNode label="CRDT" type="22" x="20" y="82">
        <mappermodel:InputPins></mappermodel:InputPins>
        <mappermodel:OutputPins>str</mappermodel:OutputPins>
        <mappermodel:Properties/>
      </mappermodel:FunctionGraphNode>
      <mappermodel:FunctionGraphNode label="MTType" type="22" x="410" y="20">
        <mappermodel:InputPins></mappermodel:InputPins>
        <mappermodel:OutputPins>str</mappermodel:OutputPins>
        <mappermodel:Properties/>
      </mappermodel:FunctionGraphNode>
      <mappermodel:FunctionGraphNode label="900" type="22" x="253" y="90">
        <mappermodel:InputPins></mappermodel:InputPins>
        <mappermodel:OutputPins>str</mappermodel:OutputPins>
        <mappermodel:Properties/>
      </mappermodel:FunctionGraphNode>
      <mappermodel:FunctionGraphNode label="!=" type="32" x="253" y="20">
        <mappermodel:InputPins>1,2</mappermodel:InputPins>
        <mappermodel:OutputPins>R</mappermodel:OutputPins>
        <mappermodel:Properties/>
      </mappermodel:FunctionGraphNode>
      <mappermodel:FunctionGraphNode label="If-Then-Else" type="41" x="410" y="84">
        <mappermodel:InputPins>bool,then,bool,else</mappermodel:InputPins>
        <mappermodel:OutputPins>R</mappermodel:OutputPins>
        <mappermodel:Properties/>
      </mappermodel:FunctionGraphNode>
      <mappermodel:FunctionGraphNode label="setStringProperty" type="136" x="655" y="20">
        <mappermodel:InputPins>name,value</mappermodel:InputPins>
        <mappermodel:OutputPins>R</mappermodel:OutputPins>
        <mappermodel:Properties/>
      </mappermodel:FunctionGraphNode>
      <mappermodel:Link inputID="5" inputIndex="0" outputID="1" outputIndex="0"/>
      <mappermodel:Link inputID="5" inputIndex="1" outputID="2" outputIndex="0"/>
      <mappermodel:Link inputID="6" inputIndex="0" outputID="5" outputIndex="0"/>
      <mappermodel:Link inputID="7" inputIndex="0" outputID="3" outputIndex="0"/>
      <mappermodel:Link inputID="7" inputIndex="1" outputID="6" outputIndex="0"/>
      <mappermodel:Link inputID="6" inputIndex="1" outputID="4" outputIndex="0"/>
      <mappermodel:Link inputID="0" inputIndex="0" outputID="7" outputIndex="0"/>
    </mappermodel:GraphModel>
    <mappermodel:GraphModel inputPins="1,2" outputNode="OUT_PORT:0,FinMessage:0,Block3:0,F103:0" x="941" y="20">
      <mappermodel:TreeGraphNode inputNode="IN_PORT:0,Envelope:0,Document:0,BkToCstmrDbtCdtNtfctn:0,[ONE MANY]:0,Ntfctn:0,[ONE MANY]:0,Ntry:0,CdtDbtInd:0" x="20" y="20">
        <mappermodel:InputPins>1st</mappermodel:InputPins>
        <mappermodel:OutputPins>1st</mappermodel:OutputPins>
      </mappermodel:TreeGraphNode>
      <mappermodel:FunctionGraphNode label="CRDT" type="22" x="20" y="82">
        <mappermodel:InputPins></mappermodel:InputPins>
        <mappermodel:OutputPins>str</mappermodel:OutputPins>
        <mappermodel:Properties/>
      </mappermodel:FunctionGraphNode>
      <mappermodel:FunctionGraphNode label="MTType" type="22" x="410" y="20">
        <mappermodel:InputPins></mappermodel:InputPins>
        <mappermodel:OutputPins>str</mappermodel:OutputPins>
        <mappermodel:Properties/>
      </mappermodel:FunctionGraphNode>
      <mappermodel:FunctionGraphNode label="900" type="22" x="253" y="90">
        <mappermodel:InputPins></mappermodel:InputPins>
        <mappermodel:OutputPins>str</mappermodel:OutputPins>
        <mappermodel:Properties/>
      </mappermodel:FunctionGraphNode>
      <mappermodel:FunctionGraphNode label="!=" type="32" x="253" y="20">
        <mappermodel:InputPins>1,2</mappermodel:InputPins>
        <mappermodel:OutputPins>R</mappermodel:OutputPins>
        <mappermodel:Properties/>
      </mappermodel:FunctionGraphNode>
      <mappermodel:FunctionGraphNode label="If-Then-Else" type="41" x="410" y="84">
        <mappermodel:InputPins>bool,then,bool,else</mappermodel:InputPins>
        <mappermodel:OutputPins>R</mappermodel:OutputPins>
        <mappermodel:Properties/>
      </mappermodel:FunctionGraphNode>
      <mappermodel:FunctionGraphNode label="setStringProperty" type="136" x="655" y="20">
        <mappermodel:InputPins>name,value</mappermodel:InputPins>
        <mappermodel:OutputPins>R</mappermodel:OutputPins>
        <mappermodel:Properties/>
      </mappermodel:FunctionGraphNode>
      <mappermodel:Link inputID="5" inputIndex="0" outputID="1" outputIndex="0"/>
      <mappermodel:Link inputID="5" inputIndex="1" outputID="2" outputIndex="0"/>
      <mappermodel:Link inputID="6" inputIndex="0" outputID="5" outputIndex="0"/>
      <mappermodel:Link inputID="7" inputIndex="0" outputID="3" outputIndex="0"/>
      <mappermodel:Link inputID="7" inputIndex="1" outputID="6" outputIndex="0"/>
      <mappermodel:Link inputID="6" inputIndex="1" outputID="4" outputIndex="0"/>
      <mappermodel:Link inputID="0" inputIndex="0" outputID="7" outputIndex="0"/>
    </mappermodel:GraphModel>
    <mappermodel:GraphModel inputPins="1,2,3,4" outputNode="OUT_PORT:0,FinMessage:0,Block3:0,F121:0" x="680" y="41">
      <mappermodel:FunctionGraphNode label="setStringProperty" type="136" x="292" y="196">
        <mappermodel:InputPins>name,value</mappermodel:InputPins>
        <mappermodel:OutputPins>R</mappermodel:OutputPins>
        <mappermodel:Properties/>
      </mappermodel:FunctionGraphNode>
      <mappermodel:FunctionGraphNode label="Truncated_Fields" type="22" x="66" y="163">
        <mappermodel:InputPins></mappermodel:InputPins>
        <mappermodel:OutputPins>str</mappermodel:OutputPins>
        <mappermodel:Properties/>
      </mappermodel:FunctionGraphNode>
      <mappermodel:FunctionGraphNode label="" type="22" x="25" y="217">
        <mappermodel:InputPins></mappermodel:InputPins>
        <mappermodel:OutputPins>str</mappermodel:OutputPins>
        <mappermodel:Properties/>
      </mappermodel:FunctionGraphNode>
      <mappermodel:Link inputID="1" inputIndex="0" outputID="2" outputIndex="0"/>
      <mappermodel:Link inputID="1" inputIndex="1" outputID="3" outputIndex="0"/>
      <mappermodel:Link inputID="0" inputIndex="1" outputID="1" outputIndex="0"/>
    </mappermodel:GraphModel>
  </mappermodel:Mappings>
  <mappermodel:Extensions>
    <mappermodel:Extension language="java" name="MXToMT">
      <mappermodel:Script>com.fiorano.funclet.MXtoMT</mappermodel:Script>
      <mappermodel:Function name="public static java.lang.String com.fiorano.funclet.MXtoMT.MX_To_MTDate(java.lang.String)">
        <mappermodel:Argument datatype="java.lang.String" name="arg1"/>
      </mappermodel:Function>
      <mappermodel:Function name="public static java.lang.String com.fiorano.funclet.MXtoMT.MX_To_MTDateTimeOffset_Date(java.lang.String)">
        <mappermodel:Argument datatype="java.lang.String" name="arg1"/>
      </mappermodel:Function>
      <mappermodel:Function name="public static java.lang.String com.fiorano.funclet.MXtoMT.MX_To_MTDateTimeOffset_Offset(java.lang.String)">
        <mappermodel:Argument datatype="java.lang.String" name="arg1"/>
      </mappermodel:Function>
      <mappermodel:Function name="public static java.lang.String com.fiorano.funclet.MXtoMT.MX_To_MTDateTimeOffset_Sign(java.lang.String)">
        <mappermodel:Argument datatype="java.lang.String" name="arg1"/>
      </mappermodel:Function>
      <mappermodel:Function name="public static java.lang.String com.fiorano.funclet.MXtoMT.MX_To_MTDateTimeOffset_Time(java.lang.String)">
        <mappermodel:Argument datatype="java.lang.String" name="arg1"/>
      </mappermodel:Function>
      <mappermodel:Function name="public static java.lang.String com.fiorano.funclet.MXtoMT.MX_To_MT_BICFI_LTIAddress(java.lang.String)">
        <mappermodel:Argument datatype="java.lang.String" name="arg1"/>
      </mappermodel:Function>
      <mappermodel:Function name="public static java.lang.String com.fiorano.funclet.MXtoMT.MX_To_MT_BICFI_LogicalAddress(java.lang.String)">
        <mappermodel:Argument datatype="java.lang.String" name="arg1"/>
      </mappermodel:Function>
      <mappermodel:Function name="public static java.lang.String com.fiorano.funclet.MXtoMT.mx2MTCurrencyAmount(java.lang.String)">
        <mappermodel:Argument datatype="java.lang.String" name="arg1"/>
      </mappermodel:Function>
    </mappermodel:Extension>
  </mappermodel:Extensions>
  <mappermodel:UserXSL index="1" node="OUT_PORT:0,FinMessage:0,Block4:0,Document:0,MT910:0,F50a:0,[Choice]:0,F50F:0,NameAndAddress:0,[ONE MANY]:0,Lines2to5:0">&lt;!--  &lt;xsl:value-of select=&quot;$ResultantMTAddressTable&quot; /> -->
&lt;xsl:value-of select=&quot;java:_setStringProperty($_TIF_MESSAGE_, 'Truncated_Fields', concat($TruncTemp,'F50F_NameAndAddress_Lines2to5ENDOFFIELDTAG',substring-after($ResultantMTAddressSplit,'ENDOFOUTPUT'),'ENDOFTRUNCATEDFIELD'))&quot;/></mappermodel:UserXSL>
  <mappermodel:UserXSL index="1" node="OUT_PORT:0,FinMessage:0,Block4:0,Document:0,MT910:0,F52a:0,[Choice]:0,F52D:0,NameAndAddress:0,[ONE MANY]:0,Line:0">&lt;xsl:value-of select=&quot;java:_setStringProperty($_TIF_MESSAGE_, 'Truncated_Fields', concat($TruncTemp,'F52D_NameAndAddress_LineENDOFFIELDTAG',substring-after($ResultantMTAddressTable,'ENDOFOUTPUT'),'ENDOFTRUNCATEDFIELD'))&quot;/></mappermodel:UserXSL>
  <mappermodel:UserXSL index="1" node="OUT_PORT:0,FinMessage:0,Block4:0,Document:0,MT910:0,F72a:0,[Choice]:0,F72:0,Narrative:0,[ONE MANY]:0,Line:0">&lt;xsl:value-of select=&quot;java:_setStringProperty($_TIF_MESSAGE_, 'Truncated_Fields', concat($TruncTemp,'F72_Narrative_LineENDOFFIELDTAG',substring-after($ResultantMTAddressTable,'ENDOFOUTPUT'),'ENDOFTRUNCATEDFIELD'))&quot;/></mappermodel:UserXSL>
  <mappermodel:UserXSL index="1" node="OUT_PORT:0,FinMessage:0,Block4:0,Document:0,MT910:0,F50a:0,[Choice]:0,F50K:0,NameAndAddress:0,[ONE MANY]:0,Line:0">&lt;xsl:value-of select=&quot;java:_setStringProperty($_TIF_MESSAGE_, 'Truncated_Fields', concat($TruncTemp,'F50K_NameAndAddress_LineENDOFFIELDTAG',substring-after($ResultantMTAddressTable,'ENDOFOUTPUT'),'ENDOFTRUNCATEDFIELD'))&quot;/></mappermodel:UserXSL>
  <mappermodel:UserXSL index="2" node="OUT_PORT:0,FinMessage:0,Block2:0">--></mappermodel:UserXSL>
  <mappermodel:UserXSL index="2" node="OUT_PORT:0,FinMessage:0,Block1:0">--></mappermodel:UserXSL>
  <mappermodel:UserXSL index="1" node="OUT_PORT:0,FinMessage:0,Block1:0">&lt;ns5:ApplicationIdentifier>&#xD;
          &lt;xsl:value-of select=&quot;'F'&quot;>&lt;/xsl:value-of>&#xD;
        &lt;/ns5:ApplicationIdentifier>&#xD;
        &lt;ns5:ServiceIdentifier>&#xD;
          &lt;xsl:value-of select=&quot;'01'&quot;>&lt;/xsl:value-of>&#xD;
        &lt;/ns5:ServiceIdentifier>&#xD;
        &lt;ns5:LogicalTerminalAddress>&#xD;
          &lt;xsl:variable name=&quot;if0&quot;>&#xD;
            &lt;xsl:choose>&#xD;
              &lt;xsl:when test=&quot;((java:_getStringProperty($_TIF_MESSAGE_, 'ApplicationMode'))!=('I') or not(string-length(java:_getStringProperty($_TIF_MESSAGE_, 'ApplicationMode'))))&quot;>&#xD;
                &lt;xsl:value-of select=&quot;$document_IN_PORT/ns1:Envelope/ns4:AppHdr/ns4:To/ns4:FIId/ns4:FinInstnId/ns4:BICFI&quot;>&lt;/xsl:value-of>&#xD;
              &lt;/xsl:when>&#xD;
              &lt;xsl:otherwise>&#xD;
                &lt;xsl:value-of select=&quot;$document_IN_PORT/ns1:Envelope/ns4:AppHdr/ns4:Fr/ns4:FIId/ns4:FinInstnId/ns4:BICFI&quot;>&lt;/xsl:value-of>&#xD;
              &lt;/xsl:otherwise>&#xD;
            &lt;/xsl:choose>&#xD;
          &lt;/xsl:variable>&#xD;
          &lt;xsl:value-of select=&quot;MXToMT:com.fiorano.funclet.MXtoMT.MX_To_MT_BICFI_LogicalAddress(string($if0))&quot;>&lt;/xsl:value-of>&#xD;
        &lt;/ns5:LogicalTerminalAddress>&#xD;
 &lt;ns5:SessionNumber>&#xD;
	&lt;xsl:value-of select=&quot;substring(java:_getStringProperty($_TIF_MESSAGE_, 'SequenceNumber'),'1','4')&quot;/>&#xD;
&lt;/ns5:SessionNumber>&#xD;
&lt;ns5:SequenceNumber>&#xD;
	&lt;xsl:value-of select=&quot;substring(java:_getStringProperty($_TIF_MESSAGE_, 'SequenceNumber'),'5','6')&quot;/>&#xD;
&lt;/ns5:SequenceNumber>&#xD;
&#xD;
&lt;!--</mappermodel:UserXSL>
  <mappermodel:UserXSL index="1" node="OUT_PORT:0,FinMessage:0,Block2:0">&lt;!-- User code ends here -->&#xD;
&#xD;
        &lt;ns5:InputIdentifier>&#xD;
          &lt;xsl:variable name=&quot;if1&quot;>&#xD;
            &lt;xsl:choose>&#xD;
              &lt;xsl:when test=&quot;(java:_getStringProperty($_TIF_MESSAGE_, 'ApplicationMode'))=('I')&quot;>&#xD;
                &lt;xsl:value-of select=&quot;'I'&quot;>&lt;/xsl:value-of>&#xD;
              &lt;/xsl:when>&#xD;
            &lt;/xsl:choose>&#xD;
          &lt;/xsl:variable>&#xD;
          &lt;xsl:value-of select=&quot;$if1&quot;>&lt;/xsl:value-of>&#xD;
        &lt;/ns5:InputIdentifier>&#xD;
        &lt;ns5:MessageType>&#xD;
          &lt;xsl:variable name=&quot;if2&quot;>&#xD;
            &lt;xsl:choose>&#xD;
              &lt;xsl:when test=&quot;(java:_getStringProperty($_TIF_MESSAGE_, 'ApplicationMode'))=('I')&quot;>&#xD;
                          &lt;xsl:variable name=&quot;if0&quot;>&#xD;
            &lt;xsl:choose>&#xD;
              &lt;xsl:when test=&quot;($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:CdtDbtInd)!=('CRDT')&quot;>&#xD;
                &lt;xsl:value-of select=&quot;'900'&quot;>&lt;/xsl:value-of>&#xD;
              &lt;/xsl:when>&#xD;
              &lt;xsl:otherwise>&#xD;
                &lt;xsl:value-of select=&quot;'910'&quot;>&lt;/xsl:value-of>&#xD;
              &lt;/xsl:otherwise>&#xD;
            &lt;/xsl:choose>&#xD;
          &lt;/xsl:variable>&#xD;
          &lt;xsl:value-of select=&quot;$if0&quot;>&lt;/xsl:value-of>&#xD;
              &lt;/xsl:when>&#xD;
            &lt;/xsl:choose>&#xD;
          &lt;/xsl:variable>&#xD;
          &lt;xsl:value-of select=&quot;$if2&quot;>&lt;/xsl:value-of>&#xD;
        &lt;/ns5:MessageType>&#xD;
        &lt;ns5:DestinationAddress>&#xD;
          &lt;xsl:variable name=&quot;if3&quot;>&#xD;
            &lt;xsl:choose>&#xD;
              &lt;xsl:when test=&quot;(java:_getStringProperty($_TIF_MESSAGE_, 'ApplicationMode'))=('I')&quot;>&#xD;
                &lt;xsl:value-of select=&quot;MX2MT:com.fiorano.funclet.MXtoMT.MX_To_MT_BICFI_LogicalAddress(string($document_IN_PORT/ns1:Envelope/ns4:AppHdr/ns4:To/ns4:FIId/ns4:FinInstnId/ns4:BICFI))&quot;>&lt;/xsl:value-of>&#xD;
              &lt;/xsl:when>&#xD;
            &lt;/xsl:choose>&#xD;
          &lt;/xsl:variable>&#xD;
          &lt;xsl:value-of select=&quot;$if3&quot;>&lt;/xsl:value-of>&#xD;
        &lt;/ns5:DestinationAddress>&#xD;
        &lt;ns5:MessagePriority>&#xD;
          &lt;xsl:variable name=&quot;if4&quot;>&#xD;
            &lt;xsl:choose>&#xD;
              &lt;xsl:when test=&quot;(java:_getStringProperty($_TIF_MESSAGE_, 'ApplicationMode'))=('I')&quot;>&#xD;
                &lt;xsl:variable name=&quot;if5&quot;>&#xD;
                  &lt;xsl:choose>&#xD;
                    &lt;xsl:when test=&quot;($document_IN_PORT/ns1:Envelope/ns4:AppHdr/ns4:Prty)=('HIGH')&quot;>&#xD;
                      &lt;xsl:value-of select=&quot;'U'&quot;>&lt;/xsl:value-of>&#xD;
                    &lt;/xsl:when>&#xD;
                    &lt;xsl:otherwise>&#xD;
                      &lt;xsl:value-of select=&quot;'N'&quot;>&lt;/xsl:value-of>&#xD;
                    &lt;/xsl:otherwise>&#xD;
                  &lt;/xsl:choose>&#xD;
                &lt;/xsl:variable>&#xD;
                &lt;xsl:value-of select=&quot;$if5&quot;>&lt;/xsl:value-of>&#xD;
              &lt;/xsl:when>&#xD;
            &lt;/xsl:choose>&#xD;
          &lt;/xsl:variable>&#xD;
          &lt;xsl:value-of select=&quot;$if4&quot;>&lt;/xsl:value-of>&#xD;
        &lt;/ns5:MessagePriority>&#xD;
        &lt;ns5:OutputIdentifier>&#xD;
          &lt;xsl:variable name=&quot;if6&quot;>&#xD;
            &lt;xsl:choose>&#xD;
              &lt;xsl:when test=&quot;((java:_getStringProperty($_TIF_MESSAGE_, 'ApplicationMode'))!=('I') or not(string-length(java:_getStringProperty($_TIF_MESSAGE_, 'ApplicationMode'))))&quot;>&#xD;
                &lt;xsl:value-of select=&quot;'O'&quot;>&lt;/xsl:value-of>&#xD;
              &lt;/xsl:when>&#xD;
            &lt;/xsl:choose>&#xD;
          &lt;/xsl:variable>&#xD;
          &lt;xsl:value-of select=&quot;$if6&quot;>&lt;/xsl:value-of>&#xD;
        &lt;/ns5:OutputIdentifier>&#xD;
        &lt;ns5:MessageType>&#xD;
          &lt;xsl:variable name=&quot;if7&quot;>&#xD;
            &lt;xsl:choose>&#xD;
              &lt;xsl:when test=&quot;((java:_getStringProperty($_TIF_MESSAGE_, 'ApplicationMode'))!=('I') or not(string-length(java:_getStringProperty($_TIF_MESSAGE_, 'ApplicationMode'))))&quot;>&#xD;
                          &lt;xsl:variable name=&quot;ifg0&quot;>&#xD;
            &lt;xsl:choose>&#xD;
              &lt;xsl:when test=&quot;($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:CdtDbtInd)!=('CRDT')&quot;>&#xD;
                &lt;xsl:value-of select=&quot;'900'&quot;>&lt;/xsl:value-of>&#xD;
              &lt;/xsl:when>&#xD;
              &lt;xsl:otherwise>&#xD;
                &lt;xsl:value-of select=&quot;'910'&quot;>&lt;/xsl:value-of>&#xD;
              &lt;/xsl:otherwise>&#xD;
            &lt;/xsl:choose>&#xD;
          &lt;/xsl:variable>&#xD;
          &lt;xsl:value-of select=&quot;$ifg0&quot;>&lt;/xsl:value-of>&#xD;
              &lt;/xsl:when>&#xD;
            &lt;/xsl:choose>&#xD;
          &lt;/xsl:variable>&#xD;
          &lt;xsl:value-of select=&quot;$if7&quot;>&lt;/xsl:value-of>&#xD;
        &lt;/ns5:MessageType>&#xD;
        &lt;ns5:InputTime>&#xD;
          &lt;xsl:variable name=&quot;if8&quot;>&#xD;
            &lt;xsl:choose>&#xD;
                &lt;xsl:when test=&quot;((java:_getStringProperty($_TIF_MESSAGE_, 'ApplicationMode'))!=('I') or not(string-length(java:_getStringProperty($_TIF_MESSAGE_, 'ApplicationMode')))) and string-length(java:_getStringProperty($_TIF_MESSAGE_, 'OutputTime'))&quot;>&#xD;
                  &lt;xsl:value-of select=&quot;java:_getStringProperty($_TIF_MESSAGE_, 'OutputTime')&quot;>&lt;/xsl:value-of>&#xD;
                &lt;/xsl:when>&#xD;
				&#xD;
				 &lt;xsl:when test=&quot;((java:_getStringProperty($_TIF_MESSAGE_, 'ApplicationMode'))!=('I') or not(string-length(java:_getStringProperty($_TIF_MESSAGE_, 'ApplicationMode')))) and (not(string-length(java:_getStringProperty($_TIF_MESSAGE_, 'OutputTime'))))&quot;>&#xD;
                   &lt;xsl:value-of select=&quot;'0000'&quot;>&lt;/xsl:value-of>&#xD;
                &lt;/xsl:when>&#xD;
              &lt;/xsl:choose>&#xD;
          &lt;/xsl:variable>&#xD;
          &lt;xsl:value-of select=&quot;$if8&quot;>&lt;/xsl:value-of>&#xD;
        &lt;/ns5:InputTime>&#xD;
        &lt;ns5:MessageInputReference>&#xD;
          &lt;ns5:Date>&#xD;
            &lt;xsl:variable name=&quot;if9&quot;>&#xD;
              &lt;xsl:choose>&#xD;
                &lt;xsl:when test=&quot;((java:_getStringProperty($_TIF_MESSAGE_, 'ApplicationMode'))!=('I') or not(string-length(java:_getStringProperty($_TIF_MESSAGE_, 'ApplicationMode')))) and string-length(java:_getStringProperty($_TIF_MESSAGE_, 'OutputDate'))&quot;>&#xD;
                  &lt;xsl:value-of select=&quot;java:_getStringProperty($_TIF_MESSAGE_, 'OutputDate')&quot;>&lt;/xsl:value-of>&#xD;
                &lt;/xsl:when>&#xD;
				&#xD;
				 &lt;xsl:when test=&quot;((java:_getStringProperty($_TIF_MESSAGE_, 'ApplicationMode'))!=('I') or not(string-length(java:_getStringProperty($_TIF_MESSAGE_, 'ApplicationMode')))) and (not(string-length(java:_getStringProperty($_TIF_MESSAGE_, 'OutputDate'))))&quot;>&#xD;
                   &lt;xsl:value-of select=&quot;'991231'&quot;>&lt;/xsl:value-of>&#xD;
                &lt;/xsl:when>&#xD;
              &lt;/xsl:choose>&#xD;
			  &#xD;
            &lt;/xsl:variable>&#xD;
            &lt;xsl:value-of select=&quot;$if9&quot;>&lt;/xsl:value-of>&#xD;
          &lt;/ns5:Date>&#xD;
          &lt;ns5:LTIdentifier>&#xD;
            &lt;xsl:variable name=&quot;if10&quot;>&#xD;
              &lt;xsl:choose>&#xD;
                &lt;xsl:when test=&quot;((java:_getStringProperty($_TIF_MESSAGE_, 'ApplicationMode'))!=('I') or not(string-length(java:_getStringProperty($_TIF_MESSAGE_, 'ApplicationMode'))))&quot;>&#xD;
                  &lt;xsl:value-of select=&quot;MXToMT:com.fiorano.funclet.MXtoMT.MX_To_MT_BICFI_LTIAddress(string($document_IN_PORT/ns1:Envelope/ns4:AppHdr/ns4:Fr/ns4:FIId/ns4:FinInstnId/ns4:BICFI))&quot;>&lt;/xsl:value-of>&#xD;
                &lt;/xsl:when>&#xD;
              &lt;/xsl:choose>&#xD;
            &lt;/xsl:variable>&#xD;
            &lt;xsl:value-of select=&quot;$if10&quot;>&lt;/xsl:value-of>&#xD;
          &lt;/ns5:LTIdentifier>&#xD;
          &lt;ns5:BranchCode>&#xD;
            &lt;xsl:variable name=&quot;if11&quot;>&#xD;
              &lt;xsl:choose>&#xD;
                &lt;xsl:when test=&quot;((java:_getStringProperty($_TIF_MESSAGE_, 'ApplicationMode'))!=('I') or not(string-length(java:_getStringProperty($_TIF_MESSAGE_, 'ApplicationMode'))))&quot;>&#xD;
                  &lt;xsl:variable name=&quot;if12&quot;>&#xD;
                    &lt;xsl:choose>&#xD;
                      &lt;xsl:when test=&quot;(string-length($document_IN_PORT/ns1:Envelope/ns4:AppHdr/ns4:Fr/ns4:FIId/ns4:FinInstnId/ns4:BICFI))&amp;gt;=('11')&quot;>&#xD;
                        &lt;xsl:value-of select=&quot;substring($document_IN_PORT/ns1:Envelope/ns4:AppHdr/ns4:Fr/ns4:FIId/ns4:FinInstnId/ns4:BICFI,(string-length($document_IN_PORT/ns1:Envelope/ns4:AppHdr/ns4:Fr/ns4:FIId/ns4:FinInstnId/ns4:BICFI))-('2'),string-length($document_IN_PORT/ns1:Envelope/ns4:AppHdr/ns4:Fr/ns4:FIId/ns4:FinInstnId/ns4:BICFI))&quot;>&lt;/xsl:value-of>&#xD;
                      &lt;/xsl:when>&#xD;
                      &lt;xsl:otherwise>&#xD;
                        &lt;xsl:value-of select=&quot;'XXX'&quot;>&lt;/xsl:value-of>&#xD;
                      &lt;/xsl:otherwise>&#xD;
                    &lt;/xsl:choose>&#xD;
                  &lt;/xsl:variable>&#xD;
                  &lt;xsl:value-of select=&quot;$if12&quot;>&lt;/xsl:value-of>&#xD;
                &lt;/xsl:when>&#xD;
              &lt;/xsl:choose>&#xD;
            &lt;/xsl:variable>&#xD;
            &lt;xsl:value-of select=&quot;$if11&quot;>&lt;/xsl:value-of>&#xD;
          &lt;/ns5:BranchCode>&#xD;
          &lt;ns5:SessionNumber>&#xD;
            &lt;xsl:variable name=&quot;if13&quot;>&#xD;
              &lt;xsl:choose>&#xD;
                &lt;xsl:when test=&quot;((java:_getStringProperty($_TIF_MESSAGE_, 'ApplicationMode'))!=('I') or not(string-length(java:_getStringProperty($_TIF_MESSAGE_, 'ApplicationMode'))))&quot;>&#xD;
                 	&lt;xsl:value-of select=&quot;substring(java:_getStringProperty($_TIF_MESSAGE_, 'SequenceNumber'),'1','4')&quot;/>&#xD;
                &lt;/xsl:when>&#xD;
              &lt;/xsl:choose>&#xD;
            &lt;/xsl:variable>&#xD;
            &lt;xsl:value-of select=&quot;$if13&quot;>&lt;/xsl:value-of>&#xD;
          &lt;/ns5:SessionNumber>&#xD;
          &lt;ns5:ISN>&#xD;
            &lt;xsl:variable name=&quot;if14&quot;>&#xD;
              &lt;xsl:choose>&#xD;
                &lt;xsl:when test=&quot;((java:_getStringProperty($_TIF_MESSAGE_, 'ApplicationMode'))!=('I') or not(string-length(java:_getStringProperty($_TIF_MESSAGE_, 'ApplicationMode'))))&quot;>&#xD;
                 	&lt;xsl:value-of select=&quot;substring(java:_getStringProperty($_TIF_MESSAGE_, 'SequenceNumber'),'5','6')&quot;/>&#xD;
                &lt;/xsl:when>&#xD;
              &lt;/xsl:choose>&#xD;
            &lt;/xsl:variable>&#xD;
            &lt;xsl:value-of select=&quot;$if14&quot;>&lt;/xsl:value-of>&#xD;
          &lt;/ns5:ISN>&#xD;
        &lt;/ns5:MessageInputReference>&#xD;
        &lt;ns5:Date>&#xD;
          &lt;xsl:variable name=&quot;if15&quot;>&#xD;
           &lt;xsl:choose>&#xD;
                &lt;xsl:when test=&quot;((java:_getStringProperty($_TIF_MESSAGE_, 'ApplicationMode'))!=('I') or not(string-length(java:_getStringProperty($_TIF_MESSAGE_, 'ApplicationMode')))) and string-length(java:_getStringProperty($_TIF_MESSAGE_, 'OutputDate'))&quot;>&#xD;
                  &lt;xsl:value-of select=&quot;java:_getStringProperty($_TIF_MESSAGE_, 'OutputDate')&quot;>&lt;/xsl:value-of>&#xD;
                &lt;/xsl:when>&#xD;
				&#xD;
				 &lt;xsl:when test=&quot;((java:_getStringProperty($_TIF_MESSAGE_, 'ApplicationMode'))!=('I') or not(string-length(java:_getStringProperty($_TIF_MESSAGE_, 'ApplicationMode')))) and (not(string-length(java:_getStringProperty($_TIF_MESSAGE_, 'OutputDate'))))&quot;>&#xD;
                   &lt;xsl:value-of select=&quot;'991231'&quot;>&lt;/xsl:value-of>&#xD;
                &lt;/xsl:when>&#xD;
              &lt;/xsl:choose>&#xD;
			       &#xD;
          &lt;/xsl:variable>&#xD;
          &lt;xsl:value-of select=&quot;$if15&quot;>&lt;/xsl:value-of>&#xD;
        &lt;/ns5:Date>&#xD;
        &lt;ns5:Time>&#xD;
          &lt;xsl:variable name=&quot;if16&quot;>&#xD;
            &lt;xsl:choose>&#xD;
                &lt;xsl:when test=&quot;((java:_getStringProperty($_TIF_MESSAGE_, 'ApplicationMode'))!=('I') or not(string-length(java:_getStringProperty($_TIF_MESSAGE_, 'ApplicationMode')))) and string-length(java:_getStringProperty($_TIF_MESSAGE_, 'OutputTime'))&quot;>&#xD;
                  &lt;xsl:value-of select=&quot;java:_getStringProperty($_TIF_MESSAGE_, 'OutputTime')&quot;>&lt;/xsl:value-of>&#xD;
                &lt;/xsl:when>&#xD;
				&#xD;
				 &lt;xsl:when test=&quot;((java:_getStringProperty($_TIF_MESSAGE_, 'ApplicationMode'))!=('I') or not(string-length(java:_getStringProperty($_TIF_MESSAGE_, 'ApplicationMode')))) and (not(string-length(java:_getStringProperty($_TIF_MESSAGE_, 'OutputTime'))))&quot;>&#xD;
                   &lt;xsl:value-of select=&quot;'0000'&quot;>&lt;/xsl:value-of>&#xD;
                &lt;/xsl:when>&#xD;
              &lt;/xsl:choose>&#xD;
          &lt;/xsl:variable>&#xD;
          &lt;xsl:value-of select=&quot;$if16&quot;>&lt;/xsl:value-of>&#xD;
        &lt;/ns5:Time>&#xD;
        &lt;ns5:MessagePriority>&#xD;
          &lt;xsl:variable name=&quot;if17&quot;>&#xD;
            &lt;xsl:choose>&#xD;
              &lt;xsl:when test=&quot;((java:_getStringProperty($_TIF_MESSAGE_, 'ApplicationMode'))!=('I') or not(string-length(java:_getStringProperty($_TIF_MESSAGE_, 'ApplicationMode'))))&quot;>&#xD;
                &lt;xsl:variable name=&quot;if18&quot;>&#xD;
                  &lt;xsl:choose>&#xD;
                    &lt;xsl:when test=&quot;($document_IN_PORT/ns1:Envelope/ns4:AppHdr/ns4:Prty)=('HIGH')&quot;>&#xD;
                      &lt;xsl:value-of select=&quot;'U'&quot;>&lt;/xsl:value-of>&#xD;
                    &lt;/xsl:when>&#xD;
                    &lt;xsl:otherwise>&#xD;
                      &lt;xsl:value-of select=&quot;'N'&quot;>&lt;/xsl:value-of>&#xD;
                    &lt;/xsl:otherwise>&#xD;
                  &lt;/xsl:choose>&#xD;
                &lt;/xsl:variable>&#xD;
                &lt;xsl:value-of select=&quot;$if18&quot;>&lt;/xsl:value-of>&#xD;
              &lt;/xsl:when>&#xD;
            &lt;/xsl:choose>&#xD;
          &lt;/xsl:variable>&#xD;
          &lt;xsl:value-of select=&quot;$if17&quot;>&lt;/xsl:value-of>&#xD;
        &lt;/ns5:MessagePriority>&#xD;
&lt;!--</mappermodel:UserXSL>
  <mappermodel:UserXSL index="1" node="OUT_PORT:0,FinMessage:0,Block4:0,Document:0,MT910:0,F56a:0,[Choice]:0,F56D:0,NameAndAddress:0,[ONE MANY]:0,Line:0">&lt;xsl:value-of select=&quot;java:_setStringProperty($_TIF_MESSAGE_, 'Truncated_Fields', concat($TruncTemp,'F56D_NameAndAddress_LineENDOFFIELDTAG',substring-after($ResultantMTAddressTable,'ENDOFOUTPUT'),'ENDOFTRUNCATEDFIELD'))&quot;/></mappermodel:UserXSL>
  <mappermodel:UserXSL index="0" node="OUT_PORT:0,FinMessage:0,Block4:0,Document:0,MT910:0,F72a:0,[Choice]:0,F72:0,Narrative:0,[ONE MANY]:0,Line:0">&lt;xsl:variable name=&quot;LineSeparator&quot;>
	&lt;xsl:value-of select=&quot;'ENDOFFLINE'&quot;/>
&lt;/xsl:variable>

&lt;xsl:variable name=&quot;ResultantMTAddressTable&quot;>
	&lt;xsl:value-of select=&quot;MXToMT:com.fiorano.funclet.MXtoMT.MX_To_MT_TransactionInformationwithTruncate(string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:AddtlTxInf),string($LineSeparator))&quot;/>
		
&lt;/xsl:variable>
&lt;xsl:call-template name=&quot;tokenize2&quot;>
	&lt;xsl:with-param name=&quot;text&quot; select=&quot;substring-before($ResultantMTAddressTable,'ENDOFOUTPUT')&quot;/>
	&lt;xsl:with-param name=&quot;separator&quot; select=&quot;$LineSeparator&quot;/>
&lt;/xsl:call-template>
&lt;xsl:variable name=&quot;TruncTemp&quot;>
  &lt;xsl:value-of select=&quot;java:_getStringProperty($_TIF_MESSAGE_, 'Truncated_Fields')&quot;/>
&lt;/xsl:variable></mappermodel:UserXSL>
  <mappermodel:UserXSL index="1" node="OUT_PORT:0,FinMessage:0,Block4:0,Document:0,MT910:0,F20a:0,[Choice]:0,F20:0">&lt;xsl:variable name=&quot;Resultant&quot;>
&lt;xsl:value-of select=&quot;MXToMT:com.fiorano.funclet.MXtoMT.mx2MT_TR001withTruncate(string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:GrpHdr/ns3:MsgId))&quot;>&lt;/xsl:value-of>
&lt;/xsl:variable>
&lt;xsl:value-of select=&quot;normalize-space(substring-before($Resultant,'ENDOFOUTPUT'))&quot;/>
&lt;xsl:variable name=&quot;TruncTemp&quot;>
  &lt;xsl:value-of select=&quot;java:_getStringProperty($_TIF_MESSAGE_, 'Truncated_Fields')&quot;/>
&lt;/xsl:variable>
&lt;xsl:value-of select=&quot;java:_setStringProperty($_TIF_MESSAGE_, 'Truncated_Fields', concat($TruncTemp,'F20_ENDOFFIELDTAG',substring-after($Resultant,'ENDOFOUTPUT'),'ENDOFTRUNCATEDFIELD'))&quot;/></mappermodel:UserXSL>
  <mappermodel:UserXSL index="1" node="OUT_PORT:0,FinMessage:0,Block3:0,F121:0">&lt;xsl:value-of select=&quot;java:_setStringProperty($_TIF_MESSAGE_, 'UETR_ID', $document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:GrpHdr/ns3:MsgId)&quot;>&lt;/xsl:value-of></mappermodel:UserXSL>
  <mappermodel:UserXSL index="1" node="OUT_PORT:0,FinMessage:0,Block5:0,SYS:0,MIR:0,LTIdentifier:0">&lt;xsl:variable name=&quot;TruncatedWithLimitter&quot;>
&lt;xsl:value-of select=&quot;(concat(java:_getStringProperty($_TIF_MESSAGE_, 'Truncated_Fields'),'ENDOFTRUNK'))&quot;>&lt;/xsl:value-of>
&lt;/xsl:variable>
&lt;xsl:variable name=&quot;Truncated_Additional&quot;>
&lt;xsl:value-of select=&quot;(concat($TruncatedWithLimitter,java:_getStringProperty($_TIF_MESSAGE_, 'Additional_Fields')))&quot;>&lt;/xsl:value-of>
&lt;/xsl:variable>
&lt;xsl:value-of select=&quot;java:_setStringProperty($_TIF_MESSAGE_, 'File_Truncated', java:com.fiorano.xslt.functions.base64.Base64.getEncodedString(MXToMT:com.fiorano.funclet.MXtoMT.generateReadableData
(string(concat($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:GrpHdr/ns3:MsgId,'ENDOFUETR',$Truncated_Additional)))))&quot;>&lt;/xsl:value-of></mappermodel:UserXSL>
  <mappermodel:UserXSL index="1" node="OUT_PORT:0,FinMessage:0,Block5:0,PAC:0">&lt;xsl:if test=&quot;java:_getBooleanProperty($_TIF_MESSAGE_, 'isIncludeAdditionalDetails')&quot;>
&lt;xsl:variable name=&quot;settedString&quot;>
&lt;xsl:value-of select=&quot;'//Acct//Ntry//'&quot;/>
&lt;/xsl:variable>
&lt;xsl:variable name=&quot;settedString1&quot;>
&lt;xsl:value-of select=&quot;'//IBAN//Id//AnyBIC//'&quot;/>
&lt;/xsl:variable>
&lt;xsl:variable name=&quot;settedString2&quot;>
&lt;xsl:value-of select=&quot;'//Amount//CdtDbtInd//BookgDt//ValDt//NtryDtls//'&quot;/>
&lt;/xsl:variable>
&lt;xsl:variable name=&quot;settedString3&quot;>
&lt;xsl:value-of select=&quot;'//RltdPties//RltdAgts//RltdDts//ValDt//NtryDtls//'&quot;/>
&lt;/xsl:variable>
&lt;xsl:variable name=&quot;settedString4&quot;>
&lt;xsl:value-of select=&quot;'//Dbtr//DbtrAcct//'&quot;/>
&lt;/xsl:variable>
&lt;xsl:variable name=&quot;settedString5&quot;>
&lt;xsl:value-of select=&quot;'//DbtrAgt//IntrmyAgt1//'&quot;/>
&lt;/xsl:variable>
&lt;xsl:variable name=&quot;settedString6&quot;>
&lt;xsl:value-of select=&quot;'//IntrBkSttl//'&quot;/>
&lt;/xsl:variable>
&lt;xsl:variable name=&quot;settedString7&quot;>
&lt;xsl:value-of select=&quot;'//Pty//AnyBIC//'&quot;/>
&lt;/xsl:variable>
&lt;xsl:variable name=&quot;settedString8&quot;>
&lt;xsl:value-of select=&quot;'//IBAN//Id//Cd//'&quot;/>
&lt;/xsl:variable>
&lt;xsl:variable name=&quot;settedString9&quot;>
&lt;xsl:value-of select=&quot;'//BICFI//'&quot;/>
&lt;/xsl:variable>
&lt;xsl:variable name=&quot;settedString10&quot;>
&lt;xsl:value-of select=&quot;''&quot;/>
&lt;/xsl:variable>
&lt;xsl:variable name=&quot;settedString11&quot;>
&lt;xsl:value-of select=&quot;'//InstrId//EndToEndId//UETR//'&quot;/>
&lt;/xsl:variable>
&lt;xsl:call-template name=&quot;dynamicAdditionalData&quot;>
&lt;xsl:with-param name=&quot;roottag&quot; select = &quot;$document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn&quot; />
&lt;xsl:with-param name = &quot;splitups&quot; select = &quot;$settedString&quot; />
&lt;/xsl:call-template>
&lt;xsl:call-template name=&quot;dynamicAdditionalData&quot;>
&lt;xsl:with-param name=&quot;roottag&quot; select = &quot;$document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Acct&quot; />
&lt;xsl:with-param name = &quot;splitups&quot; select = &quot;$settedString1&quot; />
&lt;/xsl:call-template>
&lt;xsl:call-template name=&quot;dynamicAdditionalData&quot;>
&lt;xsl:with-param name=&quot;roottag&quot; select = &quot;$document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry&quot; />
&lt;xsl:with-param name = &quot;splitups&quot; select = &quot;$settedString2&quot; />
&lt;/xsl:call-template>
&lt;xsl:call-template name=&quot;dynamicAdditionalData&quot;>
&lt;xsl:with-param name=&quot;roottag&quot; select = &quot;$document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls&quot; />
&lt;xsl:with-param name = &quot;splitups&quot; select = &quot;$settedString3&quot; />
&lt;/xsl:call-template>
&lt;xsl:call-template name=&quot;dynamicAdditionalData&quot;>
&lt;xsl:with-param name=&quot;roottag&quot; select = &quot;$document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties&quot; />
&lt;xsl:with-param name = &quot;splitups&quot; select = &quot;$settedString4&quot; />
&lt;/xsl:call-template>
&lt;xsl:call-template name=&quot;dynamicAdditionalData&quot;>
&lt;xsl:with-param name=&quot;roottag&quot; select = &quot;$document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdAgts&quot; />
&lt;xsl:with-param name = &quot;splitups&quot; select = &quot;$settedString5&quot; />
&lt;/xsl:call-template>
&lt;xsl:call-template name=&quot;dynamicAdditionalData&quot;>
&lt;xsl:with-param name=&quot;roottag&quot; select = &quot;$document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdDts&quot; />
&lt;xsl:with-param name = &quot;splitups&quot; select = &quot;$settedString6&quot; />
&lt;/xsl:call-template>
&lt;xsl:call-template name=&quot;dynamicAdditionalData&quot;>
&lt;xsl:with-param name=&quot;roottag&quot; select = &quot;$document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr&quot; />
&lt;xsl:with-param name = &quot;splitups&quot; select = &quot;$settedString7&quot; />
&lt;/xsl:call-template>
&lt;xsl:call-template name=&quot;dynamicAdditionalData&quot;>
&lt;xsl:with-param name=&quot;roottag&quot; select = &quot;$document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:DbtrAcct&quot; />
&lt;xsl:with-param name = &quot;splitups&quot; select = &quot;$settedString8&quot; />
&lt;/xsl:call-template>
&lt;xsl:call-template name=&quot;dynamicAdditionalData&quot;>
&lt;xsl:with-param name=&quot;roottag&quot; select = &quot;$document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdAgts/ns3:DbtrAgt&quot; />
&lt;xsl:with-param name = &quot;splitups&quot; select = &quot;$settedString9&quot; />
&lt;/xsl:call-template>
&lt;xsl:call-template name=&quot;dynamicAdditionalData&quot;>
&lt;xsl:with-param name=&quot;roottag&quot; select = &quot;$document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:Refs&quot; />
&lt;xsl:with-param name = &quot;splitups&quot; select = &quot;$settedString11&quot; />
&lt;/xsl:call-template>
&lt;xsl:call-template name=&quot;dynamicAdditionalData&quot;>
&lt;xsl:with-param name=&quot;roottag&quot; select = &quot;$document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdAgts/ns3:IntrmyAgt1&quot; />
&lt;xsl:with-param name = &quot;splitups&quot; select = &quot;$settedString10&quot; />
&lt;/xsl:call-template>
&lt;/xsl:if></mappermodel:UserXSL>
  <mappermodel:UserXSL index="1" node="OUT_PORT:0,FinMessage:0,Block3:0,F113:0">&lt;xsl:value-of select=&quot;java:_setBooleanProperty($_TIF_MESSAGE_, 'isIncludeAdditionalDetails', '1')&quot;>&lt;/xsl:value-of></mappermodel:UserXSL>
  <mappermodel:UserXSL index="1" node="OUT_PORT:0">&lt;xsl:template name=&quot;tokenize&quot;>
 &lt;xsl:param name=&quot;text&quot; select=&quot;.&quot;/>
 &lt;xsl:param name=&quot;separator&quot; select=&quot;'ENDOFFLINE'&quot;/>
        &lt;xsl:choose>
            &lt;xsl:when test=&quot;not(contains($text, $separator))&quot;>
                &lt;ns2:Lines2to5>
                    &lt;xsl:value-of select=&quot;normalize-space($text)&quot;/>
                &lt;/ns2:Lines2to5>
            &lt;/xsl:when>
            &lt;xsl:otherwise>
               &lt;ns2:Lines2to5>
                    &lt;xsl:value-of select=&quot;normalize-space(substring-before($text, $separator))&quot;/>
               &lt;/ns2:Lines2to5>
                &lt;xsl:call-template name=&quot;tokenize&quot;>
                    &lt;xsl:with-param name=&quot;text&quot; select=&quot;substring-after($text, $separator)&quot;/>
                &lt;/xsl:call-template>
            &lt;/xsl:otherwise>
        &lt;/xsl:choose>
&lt;/xsl:template>

&lt;xsl:template name=&quot;tokenize2&quot;>
 &lt;xsl:param name=&quot;text&quot; select=&quot;.&quot;/>
 &lt;xsl:param name=&quot;separator&quot; select=&quot;'ENDOFFLINE'&quot;/>
        &lt;xsl:choose>
            &lt;xsl:when test=&quot;not(contains($text, $separator))&quot;>
                &lt;ns2:Line>
                    &lt;xsl:value-of select=&quot;normalize-space($text)&quot;/>
                &lt;/ns2:Line>
            &lt;/xsl:when>
            &lt;xsl:otherwise>
               &lt;ns2:Line>
                    &lt;xsl:value-of select=&quot;normalize-space(substring-before($text, $separator))&quot;/>
               &lt;/ns2:Line>
                &lt;xsl:call-template name=&quot;tokenize2&quot;>
                    &lt;xsl:with-param name=&quot;text&quot; select=&quot;substring-after($text, $separator)&quot;/>
                &lt;/xsl:call-template>
            &lt;/xsl:otherwise>
        &lt;/xsl:choose>
&lt;/xsl:template>


 &lt;xsl:template name=&quot;tokenize3&quot;>
 &lt;xsl:param name=&quot;text&quot; select=&quot;.&quot;/>
 &lt;xsl:param name=&quot;LineSeparator&quot; select=&quot;'ENDOFFLINE'&quot;/>
 &lt;xsl:param name=&quot;VarSeparator&quot; select=&quot;'ENDOFFVAR'&quot;/>
        &lt;xsl:choose>
        &lt;xsl:when test=&quot;not(string-length($text))&quot;>
        &lt;/xsl:when>
            &lt;xsl:when test=&quot;not(contains($text, $LineSeparator))&quot;>
            &lt;ns2:Lines2to5>
                &lt;ns2:Number>
                &lt;xsl:value-of select=&quot;normalize-space(substring-before($text, $VarSeparator))&quot;/>
                &lt;/ns2:Number>
                
                &lt;xsl:variable name=&quot;Cdval&quot;>
                &lt;xsl:value-of select=&quot;substring-after($text, $VarSeparator)&quot;/>
                &lt;/xsl:variable>
                
                &lt;ns2:Details>
                &lt;xsl:value-of select=&quot;normalize-space(substring-before($Cdval, $VarSeparator))&quot;/>
                &lt;/ns2:Details>

                &lt;/ns2:Lines2to5>
            &lt;/xsl:when>
           &lt;xsl:when test=&quot;((contains($text, $LineSeparator))) &quot;>
              
              &lt;ns2:Lines2to5>
                &lt;ns2:Number>
                &lt;xsl:value-of select=&quot;normalize-space(substring-before($text, $VarSeparator))&quot;/>
                &lt;/ns2:Number>
                
                &lt;xsl:variable name=&quot;Cdval1&quot;>
                &lt;xsl:value-of select=&quot;substring-after($text, $VarSeparator)&quot;/>
                &lt;/xsl:variable>
                
                &lt;ns2:Details>
                &lt;xsl:value-of select=&quot;normalize-space(substring-before($Cdval1, $VarSeparator))&quot;/>
                &lt;/ns2:Details>

                &lt;/ns2:Lines2to5>
                &lt;xsl:call-template name=&quot;tokenize3&quot;>
                    &lt;xsl:with-param name=&quot;text&quot; select=&quot;substring-after($text, $LineSeparator)&quot;/>
                &lt;/xsl:call-template>
            &lt;/xsl:when>
        &lt;/xsl:choose>
&lt;/xsl:template>
&lt;xsl:param name=&quot;_TIF_MESSAGE_&quot;>&lt;/xsl:param>
&lt;!--The list of Extensions defined by user-->
 
  &lt;xsl:template name=&quot;myFunction&quot;>
  &lt;xsl:param name = &quot;splitups&quot;/>
  &lt;xsl:for-each select=&quot;*&quot;>
  &lt;xsl:variable name=&quot;tag&quot;>
  &lt;xsl:value-of select=&quot;local-name()&quot;>&lt;/xsl:value-of>
  &lt;/xsl:variable>

  &lt;xsl:choose>
&lt;xsl:when test=&quot;starts-with(substring-after($splitups,$tag),'/') and  MX2MT:com.fiorano.funclet.MXtoMT.endsWith(substring-before($splitups,$tag),'/')='true' &quot;>
    &lt;/xsl:when>
    &lt;xsl:otherwise>
&lt;xsl:value-of select=&quot;'&amp;#xd;&amp;#xa;'&quot;/>
      &lt;xsl:variable name=&quot;tagFullForm&quot;>
  &lt;xsl:value-of select=&quot;MX2MT:com.fiorano.funclet.MXtoMT.fullFormGenerator(local-name())&quot;>&lt;/xsl:value-of>
&lt;/xsl:variable>&lt;xsl:if test=&quot;count(child::*)>0&quot;>-----------------Start of &lt;xsl:value-of select=&quot;$tagFullForm&quot;/> Details-----------------&lt;/xsl:if>&lt;xsl:if test=&quot;count(child::*)=0&quot;>&lt;xsl:value-of select=&quot;'&amp;#xd;&amp;#xa;'&quot;/>&lt;xsl:value-of select=&quot;$tagFullForm&quot;/>:&lt;/xsl:if>&lt;xsl:call-template name=&quot;myFunction&quot; >&lt;xsl:with-param name = &quot;splitups&quot; select=&quot;$splitups&quot;/>&lt;/xsl:call-template>&lt;xsl:if test = &quot;count(child::*)=0&quot;>&lt;xsl:value-of select=&quot;.&quot;/>
&lt;/xsl:if>
&lt;xsl:if test=&quot;count(child::*)>0&quot;>&lt;xsl:value-of select=&quot;'&amp;#xd;&amp;#xa;'&quot;/>-----------------End of &lt;xsl:value-of select=&quot;$tagFullForm&quot;/> Details-----------------&lt;xsl:value-of select=&quot;'&amp;#xd;&amp;#xa;'&quot;/>&lt;/xsl:if>
    &lt;/xsl:otherwise>                
&lt;/xsl:choose> 
&lt;/xsl:for-each>
  &lt;/xsl:template>
   &lt;xsl:template name=&quot;dynamicAdditionalData&quot;>
  &lt;xsl:param name=&quot;roottag&quot;/>
  &lt;xsl:param name=&quot;splitups&quot;/>
  &lt;xsl:variable name=&quot;AdditionalData&quot;>
    &lt;xsl:for-each select=&quot;$roottag&quot;>
      &lt;xsl:variable name=&quot;tagFullForm&quot;>
        &lt;xsl:value-of select=&quot;MX2MT:com.fiorano.funclet.MXtoMT.fullFormGenerator(local-name())&quot;>&lt;/xsl:value-of>
      &lt;/xsl:variable>
-----------------Start of &lt;xsl:value-of select=&quot;$tagFullForm&quot;/> Details-----------------&lt;xsl:call-template name=&quot;myFunction&quot;>
        &lt;xsl:with-param name=&quot;splitups&quot; select=&quot;$splitups&quot;/>
      &lt;/xsl:call-template>
-----------------End of &lt;xsl:value-of select=&quot;$tagFullForm&quot;/> Details-----------------&lt;/xsl:for-each>
&lt;xsl:value-of select=&quot;'&amp;#xd;&amp;#xa;'&quot;/>
&lt;xsl:value-of select=&quot;'&amp;#xd;&amp;#xa;'&quot;/>

  &lt;/xsl:variable>
  &lt;xsl:variable name=&quot;settedString&quot;>
        &lt;xsl:value-of select=&quot;java:_getStringProperty($_TIF_MESSAGE_, 'Additional_Fields')&quot;/>
      &lt;/xsl:variable>
  &lt;xsl:variable name=&quot;AdditionalDataWithLimitter&quot;>
    &lt;xsl:choose>
      &lt;xsl:when test=&quot;$settedString !=null or not(normalize-space($settedString)='')&quot;>
        &lt;xsl:value-of select=&quot;(concat($settedString,$AdditionalData))&quot;/>
      &lt;/xsl:when>
      &lt;xsl:otherwise>
        &lt;xsl:value-of select=&quot;$AdditionalData&quot;/>
      &lt;/xsl:otherwise>
    &lt;/xsl:choose>
  &lt;/xsl:variable>
  &lt;xsl:value-of select=&quot;java:_setStringProperty($_TIF_MESSAGE_, 'Additional_Fields',$AdditionalDataWithLimitter)&quot;/>
&lt;/xsl:template></mappermodel:UserXSL>
  <mappermodel:UserXSL index="1" node="OUT_PORT:0,FinMessage:0,Block4:0,Document:0,MT910:0,F21a:0,[Choice]:0,F21:0">&lt;xsl:variable name=&quot;Resultant&quot;>
&lt;xsl:value-of select=&quot;MXToMT:com.fiorano.funclet.MXtoMT.mx2MT_Camt054_MT900_MT910_TR002withTruncate(string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:Refs/ns3:EndToEndId),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:Refs/ns3:InstrId))&quot;>&lt;/xsl:value-of>
&lt;/xsl:variable>
&lt;xsl:value-of select=&quot;normalize-space(substring-before($Resultant,'ENDOFOUTPUT'))&quot;/>
&lt;xsl:variable name=&quot;TruncTemp&quot;>
  &lt;xsl:value-of select=&quot;java:_getStringProperty($_TIF_MESSAGE_, 'Truncated_Fields')&quot;/>
&lt;/xsl:variable>
&lt;xsl:value-of select=&quot;java:_setStringProperty($_TIF_MESSAGE_, 'Truncated_Fields', concat($TruncTemp,'F21_ENDOFFIELDTAG',substring-after($Resultant,'ENDOFOUTPUT'),'ENDOFTRUNCATEDFIELD'))&quot;/></mappermodel:UserXSL>
  <mappermodel:UserXSL index="0" node="OUT_PORT:0,FinMessage:0,Block4:0,Document:0,MT910:0,F50a:0,[Choice]:0,F50K:0">&lt;/xsl:when>
&lt;xsl:otherwise></mappermodel:UserXSL>
  <mappermodel:UserXSL index="3" node="OUT_PORT:0,FinMessage:0,Block4:0,Document:0,MT910:0,F50a:0,[Choice]:0,F50K:0">&lt;/xsl:otherwise>
&lt;/xsl:choose></mappermodel:UserXSL>
  <mappermodel:UserXSL index="0" node="OUT_PORT:0,FinMessage:0,Block4:0,Document:0,MT910:0,F50a:0,[Choice]:0,F50F:0">&lt;xsl:choose>
&lt;xsl:when test=&quot;(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Pty)and ('CRDT')=($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:CdtDbtInd) and(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Pty/ns3:PstlAdr/ns3:Ctry)))&quot;></mappermodel:UserXSL>
  <mappermodel:UserXSL index="1" node="OUT_PORT:0,FinMessage:0,Block4:0,Document:0,MT910:0,F50a:0,[Choice]:0,F50F:0,PartyIdentifier:0,[Choice]:0,Code:0">&lt;xsl:choose>
&lt;xsl:when test=&quot;(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Pty)and ('CRDT')=($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:CdtDbtInd) and(not(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Pty/ns3:Id/ns3:OrgId/ns3:AnyBIC)))  and (not(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:DbtrAcct/ns3:Id/ns3:IBAN))) and (not(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:DbtrAcct/ns3:Id/ns3:Othr/ns3:Id))) and ((string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Pty/ns3:Id/ns3:OrgId/ns3:Othr/ns3:Id)) or (string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Pty/ns3:Id/ns3:PrvtId/ns3:Othr/ns3:Id))) and (string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Pty/ns3:PstlAdr/ns3:AdrLine)) and(('NOTPROVIDED')!=($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Pty/ns3:PstlAdr/ns3:AdrLine)) and (('true')=(MXToMT:com.fiorano.funclet.MXtoMT.MX_To_MTAddressLineType(string($AppendedPostalAddress),string($LineSeparator)))))&quot;>
                           &lt;xsl:value-of select=&quot;MXToMT:com.fiorano.funclet.MXtoMT.MX_To_MTFATFIdentification_MTSchemeCode(string($OrgIdentifierTable),string($PrivateOrgIdentifierTable),string($LineSeparator),string($VariableSeparator),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Pty/ns3:PstlAdr/ns3:Ctry),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Pty/ns3:CtryOfRes))&quot;/>
                        &lt;/xsl:when>
					
						
						&lt;xsl:when test=&quot;(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Pty)and ('CRDT')=($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:CdtDbtInd) and(not(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Pty/ns3:Id/ns3:OrgId/ns3:AnyBIC))) and (not(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:DbtrAcct/ns3:Id/ns3:IBAN))) and (not(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:DbtrAcct/ns3:Id/ns3:Othr/ns3:Id))) and ((string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Pty/ns3:Id/ns3:OrgId/ns3:Othr/ns3:Id)) or (string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Pty/ns3:Id/ns3:PrvtId/ns3:Othr/ns3:Id))) and (string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Pty/ns3:Nm)) and (string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Pty/ns3:PstlAdr/ns3:Ctry)) and (not(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Pty/ns3:PstlAdr/ns3:AdrLine))))&quot;>
						&lt;xsl:value-of select=&quot;MXToMT:com.fiorano.funclet.MXtoMT.MX_To_MTFATFIdentification_MTSchemeCode(string($OrgIdentifierTable),string($PrivateOrgIdentifierTable),string($LineSeparator),string($VariableSeparator),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Pty/ns3:PstlAdr/ns3:Ctry),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Pty/ns3:CtryOfRes))&quot;/>
                        &lt;/xsl:when>					
&lt;/xsl:choose></mappermodel:UserXSL>
  <mappermodel:UserXSL index="1" node="OUT_PORT:0,FinMessage:0,Block4:0,Document:0,MT910:0,F50a:0,[Choice]:0,F50F:0,PartyIdentifier:0,[Choice]:0,CountryCode:0">&lt;xsl:choose>
 
 &lt;xsl:when test=&quot;(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Pty)and ('CRDT')=($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:CdtDbtInd) and(not(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Pty/ns3:Id/ns3:OrgId/ns3:AnyBIC))) and (not(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:DbtrAcct/ns3:Id/ns3:IBAN))) and (not(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:DbtrAcct/ns3:Id/ns3:Othr/ns3:Id))) and ((string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Pty/ns3:Id/ns3:OrgId/ns3:Othr/ns3:Id)) or (string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Pty/ns3:Id/ns3:PrvtId/ns3:Othr/ns3:Id))) and (string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Pty/ns3:PstlAdr/ns3:AdrLine)) and(('NOTPROVIDED')!=($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Pty/ns3:PstlAdr/ns3:AdrLine)) and (('true')=(MXToMT:com.fiorano.funclet.MXtoMT.MX_To_MTAddressLineType(string($AppendedPostalAddress),string($LineSeparator)))))&quot;>
                           &lt;xsl:value-of select=&quot;MXToMT:com.fiorano.funclet.MXtoMT.MX_To_MTFATFIdentification_MTCountryCode(string($OrgIdentifierTable),string($PrivateOrgIdentifierTable),string($LineSeparator),string($VariableSeparator),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Pty/ns3:PstlAdr/ns3:Ctry),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Pty/ns3:CtryOfRes))&quot;/>
                        &lt;/xsl:when>
						
	
						
						&lt;xsl:when test=&quot;(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Pty)and ('CRDT')=($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:CdtDbtInd) and(not(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Pty/ns3:Id/ns3:OrgId/ns3:AnyBIC))) and (not(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:DbtrAcct/ns3:Id/ns3:IBAN))) and (not(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:DbtrAcct/ns3:Id/ns3:Othr/ns3:Id))) and ((string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Pty/ns3:Id/ns3:OrgId/ns3:Othr/ns3:Id)) or (string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Pty/ns3:Id/ns3:PrvtId/ns3:Othr/ns3:Id))) and (string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Pty/ns3:Nm)) and (string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Pty/ns3:PstlAdr/ns3:Ctry)) and (not(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Pty/ns3:PstlAdr/ns3:AdrLine))))&quot;>
						&lt;xsl:value-of select=&quot;MXToMT:com.fiorano.funclet.MXtoMT.MX_To_MTFATFIdentification_MTCountryCode(string($OrgIdentifierTable),string($PrivateOrgIdentifierTable),string($LineSeparator),string($VariableSeparator),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Pty/ns3:PstlAdr/ns3:Ctry),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Pty/ns3:CtryOfRes))&quot;/>
                        &lt;/xsl:when>
						
				
						
						&lt;/xsl:choose></mappermodel:UserXSL>
  <mappermodel:UserXSL index="1" node="OUT_PORT:0,FinMessage:0,Block4:0,Document:0,MT910:0,F50a:0,[Choice]:0,F50F:0,PartyIdentifier:0,[Choice]:0,Identifier:0">&lt;xsl:choose>

 &lt;xsl:when test=&quot;(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Pty)and ('CRDT')=($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:CdtDbtInd) and(not(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Pty/ns3:Id/ns3:OrgId/ns3:AnyBIC))) and (not(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:DbtrAcct/ns3:Id/ns3:IBAN))) and (not(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:DbtrAcct/ns3:Id/ns3:Othr/ns3:Id))) and ((string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Pty/ns3:Id/ns3:OrgId/ns3:Othr/ns3:Id)) or (string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Pty/ns3:Id/ns3:PrvtId/ns3:Othr/ns3:Id))) and (string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Pty/ns3:PstlAdr/ns3:AdrLine)) and(('NOTPROVIDED')!=($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Pty/ns3:PstlAdr/ns3:AdrLine)) and (('true')=(MXToMT:com.fiorano.funclet.MXtoMT.MX_To_MTAddressLineType(string($AppendedPostalAddress),string($LineSeparator)))))&quot;>
                           &lt;xsl:value-of select=&quot;MXToMT:com.fiorano.funclet.MXtoMT.MX_To_MTFATFIdentification_MTPartyIdentifier(string($OrgIdentifierTable),string($PrivateOrgIdentifierTable),string($LineSeparator),string($VariableSeparator),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Pty/ns3:PstlAdr/ns3:Ctry),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Pty/ns3:CtryOfRes))&quot;/>
                        &lt;/xsl:when>
						
						
						
						
						&lt;xsl:when test=&quot;(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Pty)and ('CRDT')=($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:CdtDbtInd) and(not(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Pty/ns3:Id/ns3:OrgId/ns3:AnyBIC))) and (not(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:DbtrAcct/ns3:Id/ns3:IBAN))) and (not(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:DbtrAcct/ns3:Id/ns3:Othr/ns3:Id))) and ((string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Pty/ns3:Id/ns3:OrgId/ns3:Othr/ns3:Id)) or (string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Pty/ns3:Id/ns3:PrvtId/ns3:Othr/ns3:Id))) and (string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Pty/ns3:Nm)) and (string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Pty/ns3:PstlAdr/ns3:Ctry)) and (not(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Pty/ns3:PstlAdr/ns3:AdrLine))))&quot;>
						&lt;xsl:value-of select=&quot;MXToMT:com.fiorano.funclet.MXtoMT.MX_To_MTFATFIdentification_MTPartyIdentifier(string($OrgIdentifierTable),string($PrivateOrgIdentifierTable),string($LineSeparator),string($VariableSeparator),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Pty/ns3:PstlAdr/ns3:Ctry),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Pty/ns3:CtryOfRes))&quot;/>
                        &lt;/xsl:when>
						
						
						&lt;/xsl:choose></mappermodel:UserXSL>
  <mappermodel:UserXSL index="1" node="OUT_PORT:0,FinMessage:0,Block4:0,Document:0,MT910:0,F50a:0,[Choice]:0,F50K:0,Account:0">&lt;xsl:variable name=&quot;Resultant&quot;>
&lt;xsl:choose>
		
		&lt;xsl:when test=&quot;(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Pty)and ('CRDT')=($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:CdtDbtInd) and(not(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Pty/ns3:Id/ns3:OrgId/ns3:AnyBIC))) and ((string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:DbtrAcct/ns3:Id/ns3:Othr/ns3:Id)) or (string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:DbtrAcct/ns3:Id/ns3:IBAN))) and((string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Pty/ns3:Id/ns3:OrgId/ns3:Othr/ns3:Id)) or (string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Pty/ns3:Id/ns3:PrvtId/ns3:Othr/ns3:Id))) and (string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Pty/ns3:PstlAdr/ns3:AdrLine)) and(('NOTPROVIDED')!=($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Pty/ns3:PstlAdr/ns3:AdrLine)))&quot;>
			&lt;xsl:value-of select=&quot;MXToMT:com.fiorano.funclet.MXtoMT.mx2MTAccountwithTruncate(string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:DbtrAcct/ns3:Id/ns3:IBAN),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:DbtrAcct/ns3:Id/ns3:Othr/ns3:Id),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:DbtrAcct/ns3:Id/ns3:Othr/ns3:SchmeNm/ns3:Cd))&quot;>&lt;/xsl:value-of>
                      &lt;/xsl:when>
					  
					  
					  &lt;xsl:when test=&quot;(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Pty)and ('CRDT')=($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:CdtDbtInd) and(not(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Pty/ns3:Id/ns3:OrgId/ns3:AnyBIC))) and ((string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:DbtrAcct/ns3:Id/ns3:Othr/ns3:Id)) or (string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:DbtrAcct/ns3:Id/ns3:IBAN))) and not((string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Pty/ns3:Nm))) and not((string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Pty/ns3:PstlAdr/ns3:Ctry)))	and not((string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Pty/ns3:PstlAdr/ns3:AdrLine))))&quot;>
			&lt;xsl:value-of select=&quot;MXToMT:com.fiorano.funclet.MXtoMT.mx2MTAccountwithTruncate(string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:DbtrAcct/ns3:Id/ns3:IBAN),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:DbtrAcct/ns3:Id/ns3:Othr/ns3:Id),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:DbtrAcct/ns3:Id/ns3:Othr/ns3:SchmeNm/ns3:Cd))&quot;>&lt;/xsl:value-of>
                      &lt;/xsl:when>

&lt;xsl:when test=&quot;(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Agt)and ('CRDT')=($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:CdtDbtInd) and(not(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Agt/ns3:FinInstnId/ns3:BICFI))) and ((string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:DbtrAcct/ns3:Id/ns3:Othr/ns3:Id)) or (string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:DbtrAcct/ns3:Id/ns3:IBAN))) and (string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Agt/ns3:FinInstnId/ns3:PstlAdr/ns3:AdrLine)) and(('NOTPROVIDED')!=($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Agt/ns3:FinInstnId/ns3:PstlAdr/ns3:AdrLine)))&quot;>
			&lt;xsl:value-of select=&quot;MXToMT:com.fiorano.funclet.MXtoMT.mx2MTAccountwithTruncate(string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:DbtrAcct/ns3:Id/ns3:IBAN),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:DbtrAcct/ns3:Id/ns3:Othr/ns3:Id),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:DbtrAcct/ns3:Id/ns3:Othr/ns3:SchmeNm/ns3:Cd))&quot;>&lt;/xsl:value-of>
		&lt;/xsl:when>

&lt;xsl:when test=&quot;(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Agt)and ('CRDT')=($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:CdtDbtInd) and(not(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Agt/ns3:FinInstnId/ns3:BICFI)))and ((string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:DbtrAcct/ns3:Id/ns3:Othr/ns3:Id)) or (string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:DbtrAcct/ns3:Id/ns3:IBAN))) and(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Agt/ns3:FinInstnId/ns3:PstlAdr/ns3:Ctry)) and(not(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Agt/ns3:FinInstnId/ns3:PstlAdr/ns3:AdrLine))))&quot;>
&lt;xsl:value-of select=&quot;MXToMT:com.fiorano.funclet.MXtoMT.mx2MTAccountwithTruncate(string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:DbtrAcct/ns3:Id/ns3:IBAN),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:DbtrAcct/ns3:Id/ns3:Othr/ns3:Id),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:DbtrAcct/ns3:Id/ns3:Othr/ns3:SchmeNm/ns3:Cd))&quot;>&lt;/xsl:value-of>
		&lt;/xsl:when>

&lt;xsl:when test=&quot;(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Agt)and ('CRDT')=($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:CdtDbtInd) and(not(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Agt/ns3:FinInstnId/ns3:BICFI))) and ((string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:DbtrAcct/ns3:Id/ns3:Othr/ns3:Id)) or (string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:DbtrAcct/ns3:Id/ns3:IBAN))) and(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Agt/ns3:FinInstnId/ns3:Nm))and (not(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Agt/ns3:FinInstnId/ns3:PstlAdr/ns3:Ctry))) and(not(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Agt/ns3:FinInstnId/ns3:PstlAdr/ns3:AdrLine))))&quot;>
&lt;xsl:value-of select=&quot;MXToMT:com.fiorano.funclet.MXtoMT.mx2MTAccountwithTruncate(string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:DbtrAcct/ns3:Id/ns3:IBAN),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:DbtrAcct/ns3:Id/ns3:Othr/ns3:Id),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:DbtrAcct/ns3:Id/ns3:Othr/ns3:SchmeNm/ns3:Cd))&quot;>&lt;/xsl:value-of>
		&lt;/xsl:when>

&lt;xsl:when test=&quot;(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Agt)and ('CRDT')=($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:CdtDbtInd) and(not(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Agt/ns3:FinInstnId/ns3:BICFI))) and(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Agt/ns3:FinInstnId/ns3:ClrSysMmbId))and ((string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:DbtrAcct/ns3:Id/ns3:Othr/ns3:Id)) or (string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:DbtrAcct/ns3:Id/ns3:IBAN))) and(not(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Agt/ns3:FinInstnId/ns3:Nm)))and (not(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Agt/ns3:FinInstnId/ns3:PstlAdr/ns3:Ctry))) and(not(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Agt/ns3:FinInstnId/ns3:PstlAdr/ns3:AdrLine))))&quot;>
&lt;xsl:value-of select=&quot;MXToMT:com.fiorano.funclet.MXtoMT.mx2MTAccountwithTruncate(string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:DbtrAcct/ns3:Id/ns3:IBAN),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:DbtrAcct/ns3:Id/ns3:Othr/ns3:Id),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:DbtrAcct/ns3:Id/ns3:Othr/ns3:SchmeNm/ns3:Cd))&quot;>&lt;/xsl:value-of>
		&lt;/xsl:when>


&lt;xsl:when test=&quot;(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Agt)and ('CRDT')=($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:CdtDbtInd) and(not(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Agt/ns3:FinInstnId/ns3:BICFI))) and(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Agt/ns3:FinInstnId/ns3:ClrSysMmbId)) and(not(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:DbtrAcct/ns3:Id/ns3:Othr/ns3:Id))) and(not(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:DbtrAcct/ns3:Id/ns3:IBAN))) and(not(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Agt/ns3:FinInstnId/ns3:Nm)))and (not(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Agt/ns3:FinInstnId/ns3:PstlAdr/ns3:Ctry))) and(not(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Agt/ns3:FinInstnId/ns3:PstlAdr/ns3:AdrLine))))&quot;>
&lt;xsl:value-of select=&quot;'NOTPROVIDEDENDOFOUTPUT'&quot;/>
		&lt;/xsl:when>
					  
					  
&lt;/xsl:choose>
&lt;/xsl:variable>
&lt;xsl:value-of select=&quot;normalize-space(substring-before($Resultant,'ENDOFOUTPUT'))&quot;/>
&lt;xsl:variable name=&quot;TruncTemp&quot;>
  &lt;xsl:value-of select=&quot;java:_getStringProperty($_TIF_MESSAGE_, 'Truncated_Fields')&quot;/>
&lt;/xsl:variable>
&lt;xsl:value-of select=&quot;java:_setStringProperty($_TIF_MESSAGE_, 'Truncated_Fields', concat($TruncTemp,'F50K_Account_ENDOFFIELDTAG',substring-after($Resultant,'ENDOFOUTPUT'),'ENDOFTRUNCATEDFIELD'))&quot;/></mappermodel:UserXSL>
  <mappermodel:UserXSL index="1" node="OUT_PORT:0,FinMessage:0,Block4:0,Document:0,MT910:0,F50a:0,[Choice]:0,F50A:0">&lt;ns2:Account>
 &lt;xsl:variable name=&quot;if21&quot;>
                    &lt;xsl:choose>
                      &lt;xsl:when test=&quot;(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Pty/ns3:Id/ns3:OrgId/ns3:AnyBIC) 
					  and string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Pty)
					  and ('CRDT')=($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:CdtDbtInd))&quot;>
                        &lt;xsl:variable name=&quot;if22&quot;>
                          &lt;xsl:choose>
                            &lt;xsl:when test=&quot;(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:DbtrAcct/ns3:Id/ns3:Othr/ns3:Id) or string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:DbtrAcct/ns3:Id/ns3:IBAN))&quot;>
                              &lt;xsl:value-of select=&quot;MXToMT:com.fiorano.funclet.MXtoMT.mx2MTAccountwithTruncate(string
							  ($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:DbtrAcct/ns3:Id/ns3:IBAN),
							  string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:DbtrAcct/ns3:Id/ns3:Othr/ns3:Id),
							  string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:DbtrAcct/ns3:Id/ns3:Othr/ns3:SchmeNm/ns3:Cd))&quot;>
							  &lt;/xsl:value-of>
                            &lt;/xsl:when>
                          &lt;/xsl:choose>
                        &lt;/xsl:variable>
&lt;xsl:value-of select=&quot;normalize-space(substring-before($if22,'ENDOFOUTPUT'))&quot;/>
&lt;xsl:variable name=&quot;TruncTemp&quot;>
  &lt;xsl:value-of select=&quot;java:_getStringProperty($_TIF_MESSAGE_, 'Truncated_Fields')&quot;/>
&lt;/xsl:variable>
&lt;xsl:value-of select=&quot;java:_setStringProperty($_TIF_MESSAGE_, 'Truncated_Fields', concat($TruncTemp,'F50A_AccountENDOFFIELDTAG',substring-after($if22,'ENDOFOUTPUT'),'ENDOFTRUNCATEDFIELD'))&quot;/>
                      &lt;/xsl:when>
                    &lt;/xsl:choose>
                  &lt;/xsl:variable>
                  &lt;xsl:value-of select=&quot;$if21&quot;>&lt;/xsl:value-of>
&lt;xsl:variable name=&quot;debtorAcct&quot;>
 &lt;xsl:choose>
&lt;xsl:when test=&quot;(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Agt)and ('CRDT')=($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:CdtDbtInd) and (string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Agt/ns3:FinInstnId/ns3:BICFI)) and (string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:DbtrAcct/ns3:Id/ns3:Othr/ns3:Id) or string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:DbtrAcct/ns3:Id/ns3:IBAN)))&quot;>
                        &lt;xsl:value-of select=&quot;MXToMT:com.fiorano.funclet.MXtoMT.mx2MTAccountwithTruncate(string
							  ($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:DbtrAcct/ns3:Id/ns3:IBAN),
							  string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:DbtrAcct/ns3:Id/ns3:Othr/ns3:Id),
							  string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:DbtrAcct/ns3:Id/ns3:Othr/ns3:SchmeNm/ns3:Cd))&quot;>
							  &lt;/xsl:value-of>
                      &lt;/xsl:when>
&lt;/xsl:choose>
 &lt;/xsl:variable>
&lt;xsl:value-of select=&quot;normalize-space(substring-before($debtorAcct,'ENDOFOUTPUT'))&quot;/>
&lt;xsl:variable name=&quot;TruncTemp&quot;>
  &lt;xsl:value-of select=&quot;java:_getStringProperty($_TIF_MESSAGE_, 'Truncated_Fields')&quot;/>
&lt;/xsl:variable>
&lt;xsl:value-of select=&quot;java:_setStringProperty($_TIF_MESSAGE_, 'Truncated_Fields', concat($TruncTemp,'F50A_AccountENDOFFIELDTAG',substring-after($debtorAcct,'ENDOFOUTPUT'),'ENDOFTRUNCATEDFIELD'))&quot;/>
				  &lt;/ns2:Account>
				  
 &lt;ns2:IdentifierCode>
 
                    &lt;xsl:choose>
                      &lt;xsl:when test=&quot;(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Pty)and ('CRDT')=($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:CdtDbtInd) and (string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Pty/ns3:Id/ns3:OrgId/ns3:AnyBIC)))&quot;>
                        &lt;xsl:value-of select=&quot;$document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Pty/ns3:Id/ns3:OrgId/ns3:AnyBIC&quot;>
						&lt;/xsl:value-of>
                      &lt;/xsl:when>

&lt;xsl:when test=&quot;(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Agt)and ('CRDT')=($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:CdtDbtInd) and (string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Agt/ns3:FinInstnId/ns3:BICFI)))&quot;>
                        &lt;xsl:value-of select=&quot;$document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Agt/ns3:FinInstnId/ns3:BICFI&quot;>
						&lt;/xsl:value-of>
                      &lt;/xsl:when>
                    &lt;/xsl:choose>              
&lt;/ns2:IdentifierCode></mappermodel:UserXSL>
  <mappermodel:UserXSL index="1" node="OUT_PORT:0,FinMessage:0,Block4:0,Document:0,MT910:0,F50a:0">&lt;xsl:variable name=&quot;LineSeparator&quot;>
	&lt;xsl:value-of select=&quot;'ENDOFFLINE'&quot;/>
&lt;/xsl:variable>
&lt;xsl:variable name=&quot;VariableSeparator&quot;>
	&lt;xsl:value-of select=&quot;'ENDOFFVAR'&quot;/>
&lt;/xsl:variable>
&lt;xsl:variable name=&quot;AppendedPostalAddress&quot;>
	&lt;xsl:for-each select=&quot;$document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Pty/ns3:PstlAdr/ns3:AdrLine&quot;>
		&lt;xsl:value-of select=&quot;.&quot;/>
		&lt;xsl:value-of select=&quot;$LineSeparator&quot;/>
	&lt;/xsl:for-each>
&lt;/xsl:variable>
&lt;xsl:variable name=&quot;OrgIdentifierTable&quot;>
	&lt;xsl:for-each select=&quot;$document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Pty/ns3:Id/ns3:OrgId/ns3:Othr&quot;>
		&lt;xsl:value-of select=&quot;./ns3:Id&quot;/>
		&lt;xsl:value-of select=&quot;$VariableSeparator&quot;/>
		&lt;xsl:value-of select=&quot;./ns3:SchmeNm/ns3:Cd&quot;/>
		&lt;xsl:value-of select=&quot;$VariableSeparator&quot;/>
		&lt;xsl:value-of select=&quot;./ns3:Issr&quot;/>
		&lt;xsl:value-of select=&quot;$VariableSeparator&quot;/>
		&lt;xsl:value-of select=&quot;$LineSeparator&quot;/>
	&lt;/xsl:for-each>
&lt;/xsl:variable>
&lt;xsl:variable name=&quot;PrivateOrgIdentifierTable&quot;>
	&lt;xsl:for-each select=&quot;$document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Pty/ns3:Id/ns3:PrvtId/ns3:Othr&quot;>
		&lt;xsl:value-of select=&quot;./ns3:Id&quot;/>
		&lt;xsl:value-of select=&quot;$VariableSeparator&quot;/>
		&lt;xsl:value-of select=&quot;./ns3:SchmeNm/ns3:Cd&quot;/>
		&lt;xsl:value-of select=&quot;$VariableSeparator&quot;/>
		&lt;xsl:value-of select=&quot;./ns3:Issr&quot;/>
		&lt;xsl:value-of select=&quot;$VariableSeparator&quot;/>
		&lt;xsl:value-of select=&quot;$LineSeparator&quot;/>
	&lt;/xsl:for-each>
&lt;/xsl:variable></mappermodel:UserXSL>
  <mappermodel:UserXSL index="0" node="OUT_PORT:0,FinMessage:0,Block4:0,Document:0,MT910:0,F50a:0,[Choice]:0,F50K:0,NameAndAddress:0,[ONE MANY]:0,Line:0">&lt;xsl:variable name=&quot;DbtrAgtAppendedPostalAddress&quot;>
&lt;xsl:choose>
&lt;xsl:when test=&quot;(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Agt/ns3:FinInstnId/ns3:PstlAdr/ns3:Ctry))&quot;>
	&lt;xsl:for-each select=&quot;$document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Agt/ns3:FinInstnId/ns3:PstlAdr&quot;>
		&lt;xsl:value-of select=&quot;./ns3:StrtNm&quot;/>
&lt;xsl:value-of select=&quot;$VariableSeparator&quot;/>
&lt;xsl:value-of select=&quot;./ns3:BldgNb&quot;/>
&lt;xsl:value-of select=&quot;$VariableSeparator&quot;/>
&lt;xsl:value-of select=&quot;./ns3:BldgNm&quot;/>
&lt;xsl:value-of select=&quot;$VariableSeparator&quot;/>
&lt;xsl:value-of select=&quot;./ns3:Flr&quot;/>
&lt;xsl:value-of select=&quot;$VariableSeparator&quot;/>
&lt;xsl:value-of select=&quot;./ns3:PstBx&quot;/>
&lt;xsl:value-of select=&quot;$VariableSeparator&quot;/>
&lt;xsl:value-of select=&quot;./ns3:Room&quot;/>
&lt;xsl:value-of select=&quot;$VariableSeparator&quot;/>
&lt;xsl:value-of select=&quot;./ns3:Dept&quot;/>
&lt;xsl:value-of select=&quot;$VariableSeparator&quot;/>
&lt;xsl:value-of select=&quot;./ns3:SubDept&quot;/>
&lt;xsl:value-of select=&quot;$VariableSeparator&quot;/>
&lt;xsl:value-of select=&quot;'/'&quot;/>
&lt;xsl:value-of select=&quot;./ns3:Ctry&quot;/>
&lt;xsl:value-of select=&quot;'/'&quot;/>
&lt;xsl:value-of select=&quot;$VariableSeparator&quot;/>
&lt;xsl:value-of select=&quot;./ns3:TwnNm&quot;/>
&lt;xsl:value-of select=&quot;$VariableSeparator&quot;/>
&lt;xsl:value-of select=&quot;./ns3:PstCd&quot;/>
&lt;xsl:value-of select=&quot;$VariableSeparator&quot;/>
&lt;xsl:value-of select=&quot;./ns3:CtrySubDvsn&quot;/>
&lt;xsl:value-of select=&quot;$VariableSeparator&quot;/>
&lt;xsl:value-of select=&quot;./ns3:TwnLctnNm&quot;/>
&lt;xsl:value-of select=&quot;$VariableSeparator&quot;/>
&lt;xsl:value-of select=&quot;./ns3:DstrctNm&quot;/>
&lt;xsl:value-of select=&quot;$VariableSeparator&quot;/>
		&lt;xsl:value-of select=&quot;$LineSeparator&quot;/>
	&lt;/xsl:for-each>
&lt;/xsl:when>
&lt;xsl:otherwise>

	&lt;xsl:for-each select=&quot;$document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Agt/ns3:FinInstnId/ns3:PstlAdr/ns3:AdrLine&quot;>
		&lt;xsl:value-of select=&quot;.&quot;/>
		&lt;xsl:value-of select=&quot;$LineSeparator&quot;/>
	&lt;/xsl:for-each>

&lt;/xsl:otherwise>
&lt;/xsl:choose>
&lt;/xsl:variable>
&lt;xsl:variable name=&quot;ResultantMTAddressTable&quot;>
&lt;xsl:choose>


&lt;xsl:when test=&quot;(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Agt/ns3:FinInstnId/ns3:PstlAdr/ns3:Ctry))&quot;>

&lt;xsl:choose>

&lt;xsl:when test=&quot;(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Agt)and ('CRDT')=($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:CdtDbtInd) and(not(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Agt/ns3:FinInstnId/ns3:BICFI))) or(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Agt/ns3:FinInstnId/ns3:ClrSysMmbId))and(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Agt/ns3:FinInstnId/ns3:PstlAdr/ns3:Ctry))and (string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Agt/ns3:FinInstnId/ns3:PstlAdr/ns3:AdrLine)) and(('NOTPROVIDED')!=($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Agt/ns3:FinInstnId/ns3:PstlAdr/ns3:AdrLine)))&quot;>
			&lt;xsl:value-of select=&quot;MXToMT:com.fiorano.funclet.MXtoMT.MX_To_MT_Camt054_FinancialInstitutionNameAndUnstructuredPostalAddresswithTruncate(string($DbtrAgtAppendedPostalAddress),string($LineSeparator),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Agt/ns3:FinInstnId/ns3:Nm))&quot;/>
		&lt;/xsl:when>

&lt;xsl:when test=&quot;(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Agt)and ('CRDT')=($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:CdtDbtInd) and(not(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Agt/ns3:FinInstnId/ns3:BICFI))) and(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Agt/ns3:FinInstnId/ns3:PstlAdr/ns3:Ctry))and(not(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Agt/ns3:FinInstnId/ns3:PstlAdr/ns3:AdrLine))))&quot;>
			&lt;xsl:value-of select=&quot;MXToMT:com.fiorano.funclet.MXtoMT.MX_To_MTFinancialInstitutionNameAndStructuredAddresswithTruncate(string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Agt/ns3:FinInstnId/ns3:Nm),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Agt/ns3:FinInstnId/ns3:PstlAdr/ns3:Dept),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Agt/ns3:FinInstnId/ns3:PstlAdr/ns3:SubDept),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Agt/ns3:FinInstnId/ns3:PstlAdr/ns3:StrtNm),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Agt/ns3:FinInstnId/ns3:PstlAdr/ns3:BldgNb),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Agt/ns3:FinInstnId/ns3:PstlAdr/ns3:BldgNm),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Agt/ns3:FinInstnId/ns3:PstlAdr/ns3:PstBx),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Agt/ns3:FinInstnId/ns3:PstlAdr/ns3:Flr),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Agt/ns3:FinInstnId/ns3:PstlAdr/ns3:Room),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Agt/ns3:FinInstnId/ns3:PstlAdr/ns3:PstCd),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Agt/ns3:FinInstnId/ns3:PstlAdr/ns3:TwnNm),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Agt/ns3:FinInstnId/ns3:PstlAdr/ns3:TwnLctnNm),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Agt/ns3:FinInstnId/ns3:PstlAdr/ns3:DstrctNm),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Agt/ns3:FinInstnId/ns3:PstlAdr/ns3:CtrySubDvsn),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Agt/ns3:FinInstnId/ns3:PstlAdr/ns3:Ctry),string($LineSeparator))&quot;/>
		&lt;/xsl:when>


&lt;xsl:when test=&quot;(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Agt)and ('CRDT')=($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:CdtDbtInd) and(not(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Agt/ns3:FinInstnId/ns3:BICFI))) or (string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Agt/ns3:FinInstnId/ns3:ClrSysMmbId))and(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Agt/ns3:FinInstnId/ns3:Nm))and(not(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Agt/ns3:FinInstnId/ns3:PstlAdr/ns3:AdrLine))))&quot;>
			&lt;xsl:value-of select=&quot;MXToMT:com.fiorano.funclet.MXtoMT.MX_To_MT_Camt054_FinancialInstitutionNameAndUnstructuredPostalAddresswithTruncate(string($DbtrAgtAppendedPostalAddress),string($LineSeparator),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Agt/ns3:FinInstnId/ns3:Nm))&quot;/>
		&lt;/xsl:when>


		 
		&lt;/xsl:choose>
&lt;/xsl:when>

&lt;xsl:otherwise>
&lt;xsl:choose>
		
		&lt;xsl:when test=&quot;(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Pty)and ('CRDT')=($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:CdtDbtInd) and(not(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Pty/ns3:Id/ns3:OrgId/ns3:AnyBIC))) and((string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Pty/ns3:Id/ns3:OrgId/ns3:Othr/ns3:Id)) or (string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Pty/ns3:Id/ns3:PrvtId/ns3:Othr/ns3:Id))) and (string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Pty/ns3:Nm)) and not((string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Pty/ns3:PstlAdr/ns3:Ctry))) and (not(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Pty/ns3:PstlAdr/ns3:AdrLine))))&quot;>
			&lt;xsl:value-of select=&quot;MXToMT:com.fiorano.funclet.MXtoMT.MX_To_MTPartyNameAndUnstructuredAddresswithTruncate(string($AppendedPostalAddress),string($LineSeparator),
			string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Pty/ns3:Nm))&quot;/>
		&lt;/xsl:when>
	
		
		&lt;xsl:when test=&quot;(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Pty)and ('CRDT')=($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:CdtDbtInd) and(not(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Pty/ns3:Id/ns3:OrgId/ns3:AnyBIC))) and((string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Pty/ns3:Id/ns3:OrgId/ns3:Othr/ns3:Id)) or (string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Pty/ns3:Id/ns3:PrvtId/ns3:Othr/ns3:Id))) and (string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Pty/ns3:PstlAdr/ns3:AdrLine)) and (string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Pty/ns3:Nm)) and not((string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Pty/ns3:PstlAdr/ns3:Ctry))) and(('NOTPROVIDED')!=($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Pty/ns3:PstlAdr/ns3:AdrLine)))&quot;>
			&lt;xsl:value-of select=&quot;MXToMT:com.fiorano.funclet.MXtoMT.MX_To_MTPartyNameAndUnstructuredAddresswithTruncate(string($AppendedPostalAddress),string($LineSeparator),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Pty/ns3:Nm))&quot;/>
		&lt;/xsl:when>
		
		
		&lt;xsl:when test=&quot;(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Pty)and ('CRDT')=($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:CdtDbtInd) and(not(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Pty/ns3:Id/ns3:OrgId/ns3:AnyBIC))) and (string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Pty/ns3:PstlAdr/ns3:AdrLine)) and (string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Pty/ns3:Nm)) and not((string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Pty/ns3:PstlAdr/ns3:Ctry))) and(('NOTPROVIDED')!=($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Pty/ns3:PstlAdr/ns3:AdrLine)))&quot;>
			&lt;xsl:value-of select=&quot;MXToMT:com.fiorano.funclet.MXtoMT.MX_To_MTPartyNameAndUnstructuredAddresswithTruncate(string($AppendedPostalAddress),string($LineSeparator),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Pty/ns3:Nm))&quot;/>
		&lt;/xsl:when>
		
		&lt;xsl:when test=&quot;(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Pty)and ('CRDT')=($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:CdtDbtInd) and(not(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Pty/ns3:Id/ns3:OrgId/ns3:AnyBIC))) and not((string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Pty/ns3:PstlAdr/ns3:AdrLine))) and (string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Pty/ns3:Nm)) and not((string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Pty/ns3:PstlAdr/ns3:Ctry))))&quot;>
			&lt;xsl:value-of select=&quot;MXToMT:com.fiorano.funclet.MXtoMT.MX_To_MTPartyNameAndUnstructuredAddresswithTruncate(string($AppendedPostalAddress),string($LineSeparator),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Pty/ns3:Nm))&quot;/>
		&lt;/xsl:when>
			
		
		&lt;xsl:when test=&quot;(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Pty)and ('CRDT')=($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:CdtDbtInd) and(not(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Pty/ns3:Id/ns3:OrgId/ns3:AnyBIC))) and not(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Pty/ns3:PstlAdr/ns3:AdrLine)) and not((string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Pty/ns3:Nm))) and not((string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Pty/ns3:PstlAdr/ns3:Ctry))) and (string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Pty)))&quot;>
			&lt;xsl:value-of select=&quot;'NOTPROVIDEDENDOFOUTPUT'&quot;/>
		&lt;/xsl:when>




&lt;xsl:when test=&quot;(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Agt)and ('CRDT')=($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:CdtDbtInd) and(not(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Agt/ns3:FinInstnId/ns3:BICFI)))and (not(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Agt/ns3:FinInstnId/ns3:PstlAdr/ns3:Ctry)))and (string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Agt/ns3:FinInstnId/ns3:PstlAdr/ns3:AdrLine)) and(('NOTPROVIDED')!=($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Agt/ns3:FinInstnId/ns3:PstlAdr/ns3:AdrLine)))&quot;>
			&lt;xsl:value-of select=&quot;MXToMT:com.fiorano.funclet.MXtoMT.MX_To_MTFinancialInstitutionNameAndUnstructuredAddresswithTruncate(string($DbtrAgtAppendedPostalAddress),string($LineSeparator),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Agt/ns3:FinInstnId/ns3:Nm))&quot;/>
		&lt;/xsl:when>



&lt;xsl:when test=&quot;(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Agt)and ('CRDT')=($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:CdtDbtInd) and(not(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Agt/ns3:FinInstnId/ns3:BICFI))) and(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Agt/ns3:FinInstnId/ns3:Nm))and (not(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Agt/ns3:FinInstnId/ns3:PstlAdr/ns3:Ctry)))and(not(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Agt/ns3:FinInstnId/ns3:PstlAdr/ns3:AdrLine))))&quot;>
			&lt;xsl:value-of select=&quot;MXToMT:com.fiorano.funclet.MXtoMT.MX_To_MTFinancialInstitutionNameAndUnstructuredAddresswithTruncate(string($DbtrAgtAppendedPostalAddress),string($LineSeparator),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Agt/ns3:FinInstnId/ns3:Nm))&quot;/>
		&lt;/xsl:when>



&lt;xsl:when test=&quot;(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Agt)and ('CRDT')=($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:CdtDbtInd) and(not(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Agt/ns3:FinInstnId/ns3:BICFI))) and(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Agt/ns3:FinInstnId/ns3:ClrSysMmbId)) and(not(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Agt/ns3:FinInstnId/ns3:Nm)))and (not(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Agt/ns3:FinInstnId/ns3:PstlAdr/ns3:Ctry))) and(not(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Agt/ns3:FinInstnId/ns3:PstlAdr/ns3:AdrLine))))&quot;>

&lt;xsl:value-of select=&quot;concat(MXToMT:com.fiorano.funclet.MXtoMT.mx2MTClearingIdentifier(string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Agt/ns3:FinInstnId/ns3:ClrSysMmbId/ns3:ClrSysId/ns3:Cd),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Agt/ns3:FinInstnId/ns3:ClrSysMmbId/ns3:MmbId),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Agt/ns3:FinInstnId/ns3:BICFI)),'ENDOFOUTPUT')&quot;/>
		&lt;/xsl:when>



		&lt;/xsl:choose>

&lt;/xsl:otherwise>


&lt;/xsl:choose>
&lt;/xsl:variable>


&lt;xsl:call-template name=&quot;tokenize2&quot;>
	&lt;xsl:with-param name=&quot;text&quot; select=&quot;substring-before($ResultantMTAddressTable,'ENDOFOUTPUT')&quot;/>
&lt;/xsl:call-template>
&lt;xsl:variable name=&quot;TruncTemp&quot;>
  &lt;xsl:value-of select=&quot;java:_getStringProperty($_TIF_MESSAGE_, 'Truncated_Fields')&quot;/>
&lt;/xsl:variable></mappermodel:UserXSL>
  <mappermodel:UserXSL index="1" node="OUT_PORT:0,FinMessage:0,Block4:0,Document:0,MT910:0,F52a:0">&lt;xsl:variable name=&quot;LineSeparator&quot;>
	&lt;xsl:value-of select=&quot;'ENDOFFLINE'&quot;/>
&lt;/xsl:variable>
&lt;xsl:variable name=&quot;AppendedPostalAddress&quot;>
	&lt;xsl:for-each select=&quot;$document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Agt/ns3:FinInstnId/ns3:PstlAdr/ns3:AdrLine&quot;>
		&lt;xsl:value-of select=&quot;.&quot;/>
		&lt;xsl:value-of select=&quot;$LineSeparator&quot;/>
	&lt;/xsl:for-each>
&lt;/xsl:variable>

&lt;xsl:variable name=&quot;AppendedDbtrAgentPostalAddress&quot;>
	&lt;xsl:for-each select=&quot;$document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdAgts/ns3:DbtrAgt/ns3:FinInstnId/ns3:PstlAdr/ns3:AdrLine&quot;>
		&lt;xsl:value-of select=&quot;.&quot;/>
		&lt;xsl:value-of select=&quot;$LineSeparator&quot;/>
	&lt;/xsl:for-each>
&lt;/xsl:variable></mappermodel:UserXSL>
  <mappermodel:UserXSL index="1" node="OUT_PORT:0,FinMessage:0,Block4:0,Document:0,MT910:0,F52a:0,[Choice]:0,F52A:0,PartyIdentifier:0">&lt;xsl:variable name=&quot;Resultant&quot;>

&lt;xsl:choose>
		&lt;xsl:when test=&quot;(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Agt) and ('DBIT')=($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:CdtDbtInd) and (not(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdAgts/ns3:DbtrAgt))))&quot;>


&lt;xsl:value-of select=&quot;MXToMT:com.fiorano.funclet.MXtoMT.optionAPartyIdentifierwithTruncate(string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Agt/ns3:FinInstnId/ns3:BICFI),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Agt/ns3:FinInstnId/ns3:ClrSysMmbId),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Agt/ns3:FinInstnId/ns3:ClrSysMmbId/ns3:MmbId),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Agt/ns3:FinInstnId/ns3:Nm),string($AppendedPostalAddress),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Agt/ns3:FinInstnId/ns3:ClrSysMmbId/ns3:ClrSysId/ns3:Cd),string(null),string(null),string(null),string(null),string(false),string(false),string(false),string(null),string($LineSeparator),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Agt/ns3:FinInstnId/ns3:PstlAdr/ns3:Dept),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Agt/ns3:FinInstnId/ns3:PstlAdr/ns3:SubDept),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Agt/ns3:FinInstnId/ns3:PstlAdr/ns3:StrtNm),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Agt/ns3:FinInstnId/ns3:PstlAdr/ns3:BldgNb),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Agt/ns3:FinInstnId/ns3:PstlAdr/ns3:BldgNm),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Agt/ns3:FinInstnId/ns3:PstlAdr/ns3:PstBx),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Agt/ns3:FinInstnId/ns3:PstlAdr/ns3:Flr),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Agt/ns3:FinInstnId/ns3:PstlAdr/ns3:Room),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Agt/ns3:FinInstnId/ns3:PstlAdr/ns3:PstCd),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Agt/ns3:FinInstnId/ns3:PstlAdr/ns3:TwnNm),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Agt/ns3:FinInstnId/ns3:PstlAdr/ns3:TwnLctnNm),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Agt/ns3:FinInstnId/ns3:PstlAdr/ns3:DstrctNm),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Agt/ns3:FinInstnId/ns3:PstlAdr/ns3:CtrySubDvsn),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Agt/ns3:FinInstnId/ns3:PstlAdr/ns3:Ctry))&quot;>&lt;/xsl:value-of>

		&lt;/xsl:when>

&lt;xsl:when test=&quot;(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdAgts/ns3:DbtrAgt))&quot;>

&lt;xsl:value-of select=&quot;MXToMT:com.fiorano.funclet.MXtoMT.optionAPartyIdentifierwithTruncate(string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdAgts/ns3:DbtrAgt/ns3:FinInstnId/ns3:BICFI),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdAgts/ns3:DbtrAgt/ns3:FinInstnId/ns3:ClrSysMmbId),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdAgts/ns3:DbtrAgt/ns3:FinInstnId/ns3:ClrSysMmbId/ns3:MmbId),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdAgts/ns3:DbtrAgt/ns3:FinInstnId/ns3:Nm),string($AppendedDbtrAgentPostalAddress),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdAgts/ns3:DbtrAgt/ns3:FinInstnId/ns3:ClrSysMmbId/ns3:ClrSysId/ns3:Cd),string(null),string(null),string(null),string(null),string(false),string(false),string(false),string(null),string($LineSeparator),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdAgts/ns3:DbtrAgt/ns3:FinInstnId/ns3:PstlAdr/ns3:Dept),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdAgts/ns3:DbtrAgt/ns3:FinInstnId/ns3:PstlAdr/ns3:SubDept),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdAgts/ns3:DbtrAgt/ns3:FinInstnId/ns3:PstlAdr/ns3:StrtNm),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdAgts/ns3:DbtrAgt/ns3:FinInstnId/ns3:PstlAdr/ns3:BldgNb),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdAgts/ns3:DbtrAgt/ns3:FinInstnId/ns3:PstlAdr/ns3:BldgNm),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdAgts/ns3:DbtrAgt/ns3:FinInstnId/ns3:PstlAdr/ns3:PstBx),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdAgts/ns3:DbtrAgt/ns3:FinInstnId/ns3:PstlAdr/ns3:Flr),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdAgts/ns3:DbtrAgt/ns3:FinInstnId/ns3:PstlAdr/ns3:Room),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdAgts/ns3:DbtrAgt/ns3:FinInstnId/ns3:PstlAdr/ns3:PstCd),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdAgts/ns3:DbtrAgt/ns3:FinInstnId/ns3:PstlAdr/ns3:TwnNm),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdAgts/ns3:DbtrAgt/ns3:FinInstnId/ns3:PstlAdr/ns3:TwnLctnNm),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdAgts/ns3:DbtrAgt/ns3:FinInstnId/ns3:PstlAdr/ns3:DstrctNm),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdAgts/ns3:DbtrAgt/ns3:FinInstnId/ns3:PstlAdr/ns3:CtrySubDvsn),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdAgts/ns3:DbtrAgt/ns3:FinInstnId/ns3:PstlAdr/ns3:Ctry))&quot;>&lt;/xsl:value-of>

	&lt;/xsl:when>

&lt;/xsl:choose>
	
&lt;/xsl:variable>
&lt;xsl:call-template name=&quot;tokenize2&quot;>
	&lt;xsl:with-param name=&quot;text&quot; select=&quot;substring-before($Resultant,'ENDOFOUTPUT')&quot;/>
&lt;/xsl:call-template>
&lt;xsl:variable name=&quot;TruncTemp&quot;>
  &lt;xsl:value-of select=&quot;java:_getStringProperty($_TIF_MESSAGE_, 'Truncated_Fields')&quot;/>
&lt;/xsl:variable>
&lt;xsl:value-of select=&quot;java:_setStringProperty($_TIF_MESSAGE_, 'Truncated_Fields', concat($TruncTemp,'F52APartyIdentifier_ENDOFFIELDTAG',substring-after($Resultant,'ENDOFOUTPUT'),'ENDOFTRUNCATEDFIELD'))&quot;/></mappermodel:UserXSL>
  <mappermodel:UserXSL index="1" node="OUT_PORT:0,FinMessage:0,Block4:0,Document:0,MT910:0,F52a:0,[Choice]:0,F52D:0,PartyIdentifier:0">&lt;xsl:variable name=&quot;Resultant&quot;>

&lt;xsl:choose>
		
		&lt;xsl:when test=&quot;(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Agt) and ('DBIT')=($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:CdtDbtInd) and (not(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdAgts/ns3:DbtrAgt))))&quot;>

&lt;xsl:value-of select=&quot;MXToMT:com.fiorano.funclet.MXtoMT.optionDPartyIdentifierwithTruncate(string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Agt/ns3:FinInstnId/ns3:BICFI),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Agt/ns3:FinInstnId/ns3:ClrSysMmbId),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Agt/ns3:FinInstnId/ns3:ClrSysMmbId/ns3:MmbId),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Agt/ns3:FinInstnId/ns3:Nm),string($AppendedPostalAddress),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Agt/ns3:FinInstnId/ns3:ClrSysMmbId/ns3:ClrSysId/ns3:Cd),string(null),string(null),string(null),string(null),string(false),string(false),string(false),string(null),string($LineSeparator),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Agt/ns3:FinInstnId/ns3:PstlAdr/ns3:Dept),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Agt/ns3:FinInstnId/ns3:PstlAdr/ns3:SubDept),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Agt/ns3:FinInstnId/ns3:PstlAdr/ns3:StrtNm),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Agt/ns3:FinInstnId/ns3:PstlAdr/ns3:BldgNb),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Agt/ns3:FinInstnId/ns3:PstlAdr/ns3:BldgNm),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Agt/ns3:FinInstnId/ns3:PstlAdr/ns3:PstBx),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Agt/ns3:FinInstnId/ns3:PstlAdr/ns3:Flr),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Agt/ns3:FinInstnId/ns3:PstlAdr/ns3:Room),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Agt/ns3:FinInstnId/ns3:PstlAdr/ns3:PstCd),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Agt/ns3:FinInstnId/ns3:PstlAdr/ns3:TwnNm),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Agt/ns3:FinInstnId/ns3:PstlAdr/ns3:TwnLctnNm),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Agt/ns3:FinInstnId/ns3:PstlAdr/ns3:DstrctNm),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Agt/ns3:FinInstnId/ns3:PstlAdr/ns3:CtrySubDvsn),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Agt/ns3:FinInstnId/ns3:PstlAdr/ns3:Ctry))&quot;>&lt;/xsl:value-of>

	&lt;/xsl:when>

&lt;xsl:when test=&quot;(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdAgts/ns3:DbtrAgt))&quot;>

&lt;xsl:value-of select=&quot;MXToMT:com.fiorano.funclet.MXtoMT.optionDPartyIdentifierwithTruncate(string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdAgts/ns3:DbtrAgt/ns3:FinInstnId/ns3:BICFI),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdAgts/ns3:DbtrAgt/ns3:FinInstnId/ns3:ClrSysMmbId),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdAgts/ns3:DbtrAgt/ns3:FinInstnId/ns3:ClrSysMmbId/ns3:MmbId),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdAgts/ns3:DbtrAgt/ns3:FinInstnId/ns3:Nm),string($AppendedDbtrAgentPostalAddress),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdAgts/ns3:DbtrAgt/ns3:FinInstnId/ns3:ClrSysMmbId/ns3:ClrSysId/ns3:Cd),string(null),string(null),string(null),string(null),string(false),string(false),string(false),string(null),string($LineSeparator),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdAgts/ns3:DbtrAgt/ns3:FinInstnId/ns3:PstlAdr/ns3:Dept),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdAgts/ns3:DbtrAgt/ns3:FinInstnId/ns3:PstlAdr/ns3:SubDept),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdAgts/ns3:DbtrAgt/ns3:FinInstnId/ns3:PstlAdr/ns3:StrtNm),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdAgts/ns3:DbtrAgt/ns3:FinInstnId/ns3:PstlAdr/ns3:BldgNb),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdAgts/ns3:DbtrAgt/ns3:FinInstnId/ns3:PstlAdr/ns3:BldgNm),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdAgts/ns3:DbtrAgt/ns3:FinInstnId/ns3:PstlAdr/ns3:PstBx),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdAgts/ns3:DbtrAgt/ns3:FinInstnId/ns3:PstlAdr/ns3:Flr),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdAgts/ns3:DbtrAgt/ns3:FinInstnId/ns3:PstlAdr/ns3:Room),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdAgts/ns3:DbtrAgt/ns3:FinInstnId/ns3:PstlAdr/ns3:PstCd),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdAgts/ns3:DbtrAgt/ns3:FinInstnId/ns3:PstlAdr/ns3:TwnNm),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdAgts/ns3:DbtrAgt/ns3:FinInstnId/ns3:PstlAdr/ns3:TwnLctnNm),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdAgts/ns3:DbtrAgt/ns3:FinInstnId/ns3:PstlAdr/ns3:DstrctNm),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdAgts/ns3:DbtrAgt/ns3:FinInstnId/ns3:PstlAdr/ns3:CtrySubDvsn),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdAgts/ns3:DbtrAgt/ns3:FinInstnId/ns3:PstlAdr/ns3:Ctry))&quot;>&lt;/xsl:value-of>

	&lt;/xsl:when>

&lt;/xsl:choose>

&lt;/xsl:variable>
&lt;xsl:call-template name=&quot;tokenize2&quot;>
	&lt;xsl:with-param name=&quot;text&quot; select=&quot;substring-before($Resultant,'ENDOFOUTPUT')&quot;/>
&lt;/xsl:call-template>
&lt;xsl:variable name=&quot;TruncTemp&quot;>
  &lt;xsl:value-of select=&quot;java:_getStringProperty($_TIF_MESSAGE_, 'Truncated_Fields')&quot;/>
&lt;/xsl:variable>
&lt;xsl:value-of select=&quot;java:_setStringProperty($_TIF_MESSAGE_, 'Truncated_Fields', concat($TruncTemp,'F52DPartyIdentifier_ENDOFFIELDTAG',substring-after($Resultant,'ENDOFOUTPUT'),'ENDOFTRUNCATEDFIELD'))&quot;/></mappermodel:UserXSL>
  <mappermodel:UserXSL index="0" node="OUT_PORT:0,FinMessage:0,Block4:0,Document:0,MT910:0,F52a:0,[Choice]:0,F52D:0,NameAndAddress:0,[ONE MANY]:0,Line:0">&lt;xsl:variable name=&quot;ResultantMTAddressTable&quot;>
&lt;xsl:choose>
		
		&lt;xsl:when test=&quot;(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Agt) and ('DBIT')=($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:CdtDbtInd) and (not(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdAgts/ns3:DbtrAgt))))&quot;>

                  &lt;xsl:value-of select=&quot;MXToMT:com.fiorano.funclet.MXtoMT.optionDNameAndAddresswithTruncate(string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Agt/ns3:FinInstnId/ns3:BICFI),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Agt/ns3:FinInstnId/ns3:ClrSysMmbId),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Agt/ns3:FinInstnId/ns3:ClrSysMmbId/ns3:MmbId),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Agt/ns3:FinInstnId/ns3:Nm),string($AppendedPostalAddress),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Agt/ns3:FinInstnId/ns3:ClrSysMmbId/ns3:ClrSysId/ns3:Cd),string(null),string(null),string(null),string(null),string(false),string(false),string(false),string(null),string($LineSeparator),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Agt/ns3:FinInstnId/ns3:PstlAdr/ns3:Dept),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Agt/ns3:FinInstnId/ns3:PstlAdr/ns3:SubDept),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Agt/ns3:FinInstnId/ns3:PstlAdr/ns3:StrtNm),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Agt/ns3:FinInstnId/ns3:PstlAdr/ns3:BldgNb),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Agt/ns3:FinInstnId/ns3:PstlAdr/ns3:BldgNm),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Agt/ns3:FinInstnId/ns3:PstlAdr/ns3:PstBx),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Agt/ns3:FinInstnId/ns3:PstlAdr/ns3:Flr),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Agt/ns3:FinInstnId/ns3:PstlAdr/ns3:Room),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Agt/ns3:FinInstnId/ns3:PstlAdr/ns3:PstCd),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Agt/ns3:FinInstnId/ns3:PstlAdr/ns3:TwnNm),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Agt/ns3:FinInstnId/ns3:PstlAdr/ns3:TwnLctnNm),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Agt/ns3:FinInstnId/ns3:PstlAdr/ns3:DstrctNm),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Agt/ns3:FinInstnId/ns3:PstlAdr/ns3:CtrySubDvsn),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Agt/ns3:FinInstnId/ns3:PstlAdr/ns3:Ctry))&quot;>&lt;/xsl:value-of>

&lt;/xsl:when>

&lt;xsl:when test=&quot;(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdAgts/ns3:DbtrAgt))&quot;>

                  &lt;xsl:value-of select=&quot;MXToMT:com.fiorano.funclet.MXtoMT.optionDNameAndAddresswithTruncate(string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdAgts/ns3:DbtrAgt/ns3:FinInstnId/ns3:BICFI),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdAgts/ns3:DbtrAgt/ns3:FinInstnId/ns3:ClrSysMmbId),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdAgts/ns3:DbtrAgt/ns3:FinInstnId/ns3:ClrSysMmbId/ns3:MmbId),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdAgts/ns3:DbtrAgt/ns3:FinInstnId/ns3:Nm),string($AppendedDbtrAgentPostalAddress),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdAgts/ns3:DbtrAgt/ns3:FinInstnId/ns3:ClrSysMmbId/ns3:ClrSysId/ns3:Cd),string(null),string(null),string(null),string(null),string(false),string(false),string(false),string(null),string($LineSeparator),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdAgts/ns3:DbtrAgt/ns3:FinInstnId/ns3:PstlAdr/ns3:Dept),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdAgts/ns3:DbtrAgt/ns3:FinInstnId/ns3:PstlAdr/ns3:SubDept),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdAgts/ns3:DbtrAgt/ns3:FinInstnId/ns3:PstlAdr/ns3:StrtNm),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdAgts/ns3:DbtrAgt/ns3:FinInstnId/ns3:PstlAdr/ns3:BldgNb),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdAgts/ns3:DbtrAgt/ns3:FinInstnId/ns3:PstlAdr/ns3:BldgNm),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdAgts/ns3:DbtrAgt/ns3:FinInstnId/ns3:PstlAdr/ns3:PstBx),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdAgts/ns3:DbtrAgt/ns3:FinInstnId/ns3:PstlAdr/ns3:Flr),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdAgts/ns3:DbtrAgt/ns3:FinInstnId/ns3:PstlAdr/ns3:Room),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdAgts/ns3:DbtrAgt/ns3:FinInstnId/ns3:PstlAdr/ns3:PstCd),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdAgts/ns3:DbtrAgt/ns3:FinInstnId/ns3:PstlAdr/ns3:TwnNm),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdAgts/ns3:DbtrAgt/ns3:FinInstnId/ns3:PstlAdr/ns3:TwnLctnNm),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdAgts/ns3:DbtrAgt/ns3:FinInstnId/ns3:PstlAdr/ns3:DstrctNm),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdAgts/ns3:DbtrAgt/ns3:FinInstnId/ns3:PstlAdr/ns3:CtrySubDvsn),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdAgts/ns3:DbtrAgt/ns3:FinInstnId/ns3:PstlAdr/ns3:Ctry))&quot;>&lt;/xsl:value-of>

&lt;/xsl:when>

&lt;xsl:when test=&quot;(not(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Agt)) and ('CRDT')=($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:CdtDbtInd) and(not(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Pty)))and (not(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdAgts/ns3:DbtrAgt))))&quot;>
&lt;xsl:value-of select=&quot;'NOTPROVIDEDENDOFOUTPUT'&quot;/>
		&lt;/xsl:when>

&lt;/xsl:choose>


&lt;/xsl:variable>
&lt;xsl:call-template name=&quot;tokenize2&quot;>
	&lt;xsl:with-param name=&quot;text&quot; select=&quot;substring-before($ResultantMTAddressTable,'ENDOFOUTPUT')&quot;/>
&lt;/xsl:call-template>
&lt;xsl:variable name=&quot;TruncTemp&quot;>
  &lt;xsl:value-of select=&quot;java:_getStringProperty($_TIF_MESSAGE_, 'Truncated_Fields')&quot;/>
&lt;/xsl:variable></mappermodel:UserXSL>
  <mappermodel:UserXSL index="1" node="OUT_PORT:0,FinMessage:0,Block4:0,Document:0,MT910:0,F56a:0">&lt;xsl:choose>
		&lt;xsl:when test=&quot;(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdAgts/ns3:IntrmyAgt1) and ('CRDT')=($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:CdtDbtInd))&quot;>
&lt;xsl:variable name=&quot;LineSeparator&quot;>
	&lt;xsl:value-of select=&quot;'ENDOFFLINE'&quot;/>
&lt;/xsl:variable>
&lt;xsl:variable name=&quot;AppendedPostalAddress&quot;>
	&lt;xsl:for-each select=&quot;$document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdAgts/ns3:IntrmyAgt1/ns3:FinInstnId/ns3:PstlAdr/ns3:AdrLine&quot;>
		&lt;xsl:value-of select=&quot;.&quot;/>
		&lt;xsl:value-of select=&quot;$LineSeparator&quot;/>
	&lt;/xsl:for-each>
&lt;/xsl:variable></mappermodel:UserXSL>
  <mappermodel:UserXSL index="2" node="OUT_PORT:0,FinMessage:0,Block4:0,Document:0,MT910:0,F56a:0">&lt;/xsl:when>
&lt;/xsl:choose></mappermodel:UserXSL>
  <mappermodel:UserXSL index="1" node="OUT_PORT:0,FinMessage:0,Block4:0,Document:0,MT910:0,F56a:0,[Choice]:0,F56A:0,PartyIdentifier:0">&lt;xsl:variable name=&quot;Resultant&quot;>
&lt;xsl:value-of select=&quot;MXToMT:com.fiorano.funclet.MXtoMT.optionAPartyIdentifierwithTruncate(string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdAgts/ns3:IntrmyAgt1/ns3:FinInstnId/ns3:BICFI),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdAgts/ns3:IntrmyAgt1/ns3:FinInstnId/ns3:ClrSysMmbId),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdAgts/ns3:IntrmyAgt1/ns3:FinInstnId/ns3:ClrSysMmbId/ns3:MmbId),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdAgts/ns3:IntrmyAgt1/ns3:FinInstnId/ns3:Nm),string($AppendedPostalAddress),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdAgts/ns3:IntrmyAgt1/ns3:FinInstnId/ns3:ClrSysMmbId/ns3:ClrSysId/ns3:Cd),string(null),string(null),string(null),string(null),string(false),string(false),string(false),string(null),string($LineSeparator),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdAgts/ns3:IntrmyAgt1/ns3:FinInstnId/ns3:PstlAdr/ns3:Dept),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdAgts/ns3:IntrmyAgt1/ns3:FinInstnId/ns3:PstlAdr/ns3:SubDept),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdAgts/ns3:IntrmyAgt1/ns3:FinInstnId/ns3:PstlAdr/ns3:StrtNm),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdAgts/ns3:IntrmyAgt1/ns3:FinInstnId/ns3:PstlAdr/ns3:BldgNb),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdAgts/ns3:IntrmyAgt1/ns3:FinInstnId/ns3:PstlAdr/ns3:BldgNm),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdAgts/ns3:IntrmyAgt1/ns3:FinInstnId/ns3:PstlAdr/ns3:PstBx),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdAgts/ns3:IntrmyAgt1/ns3:FinInstnId/ns3:PstlAdr/ns3:Flr),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdAgts/ns3:IntrmyAgt1/ns3:FinInstnId/ns3:PstlAdr/ns3:Room),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdAgts/ns3:IntrmyAgt1/ns3:FinInstnId/ns3:PstlAdr/ns3:PstCd),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdAgts/ns3:IntrmyAgt1/ns3:FinInstnId/ns3:PstlAdr/ns3:TwnNm),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdAgts/ns3:IntrmyAgt1/ns3:FinInstnId/ns3:PstlAdr/ns3:TwnLctnNm),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdAgts/ns3:IntrmyAgt1/ns3:FinInstnId/ns3:PstlAdr/ns3:DstrctNm),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdAgts/ns3:IntrmyAgt1/ns3:FinInstnId/ns3:PstlAdr/ns3:CtrySubDvsn),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdAgts/ns3:IntrmyAgt1/ns3:FinInstnId/ns3:PstlAdr/ns3:Ctry))&quot;>&lt;/xsl:value-of>

&lt;/xsl:variable>
&lt;xsl:call-template name=&quot;tokenize2&quot;>
	&lt;xsl:with-param name=&quot;text&quot; select=&quot;substring-before($Resultant,'ENDOFOUTPUT')&quot;/>
&lt;/xsl:call-template>
&lt;xsl:variable name=&quot;TruncTemp&quot;>
  &lt;xsl:value-of select=&quot;java:_getStringProperty($_TIF_MESSAGE_, 'Truncated_Fields')&quot;/>
&lt;/xsl:variable>
&lt;xsl:value-of select=&quot;java:_setStringProperty($_TIF_MESSAGE_, 'Truncated_Fields', concat($TruncTemp,'F56APartyIdentifier_ENDOFFIELDTAG',substring-after($Resultant,'ENDOFOUTPUT'),'ENDOFTRUNCATEDFIELD'))&quot;/></mappermodel:UserXSL>
  <mappermodel:UserXSL index="1" node="OUT_PORT:0,FinMessage:0,Block4:0,Document:0,MT910:0,F56a:0,[Choice]:0,F56A:0,IdentifierCode:0">&lt;xsl:variable name=&quot;if27&quot;>
                    &lt;xsl:choose>
                      &lt;xsl:when test=&quot;(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdAgts/ns3:IntrmyAgt1/ns3:FinInstnId/ns3:BICFI) and string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdAgts/ns3:IntrmyAgt1) and ('CRDT')=($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:CdtDbtInd))&quot;>
                        &lt;xsl:value-of select=&quot;$document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdAgts/ns3:IntrmyAgt1/ns3:FinInstnId/ns3:BICFI&quot;>&lt;/xsl:value-of>
                      &lt;/xsl:when>
                    &lt;/xsl:choose>
                  &lt;/xsl:variable>
                  &lt;xsl:value-of select=&quot;$if27&quot;>&lt;/xsl:value-of></mappermodel:UserXSL>
  <mappermodel:UserXSL index="0" node="OUT_PORT:0,FinMessage:0,Block4:0,Document:0,MT910:0,F56a:0,[Choice]:0,F56D:0,NameAndAddress:0,[ONE MANY]:0,Line:0">&lt;xsl:variable name=&quot;ResultantMTAddressTable&quot;>


                  &lt;xsl:value-of select=&quot;MXToMT:com.fiorano.funclet.MXtoMT.optionDNameAndAddresswithTruncate(string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdAgts/ns3:IntrmyAgt1/ns3:FinInstnId/ns3:BICFI),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdAgts/ns3:IntrmyAgt1/ns3:FinInstnId/ns3:ClrSysMmbId),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdAgts/ns3:IntrmyAgt1/ns3:FinInstnId/ns3:ClrSysMmbId/ns3:MmbId),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdAgts/ns3:IntrmyAgt1/ns3:FinInstnId/ns3:Nm),string($AppendedPostalAddress),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdAgts/ns3:IntrmyAgt1/ns3:FinInstnId/ns3:ClrSysMmbId/ns3:ClrSysId/ns3:Cd),string(null),string(null),string(null),string(null),string(false),string(false),string(false),string(null),string($LineSeparator),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdAgts/ns3:IntrmyAgt1/ns3:FinInstnId/ns3:PstlAdr/ns3:Dept),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdAgts/ns3:IntrmyAgt1/ns3:FinInstnId/ns3:PstlAdr/ns3:SubDept),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdAgts/ns3:IntrmyAgt1/ns3:FinInstnId/ns3:PstlAdr/ns3:StrtNm),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdAgts/ns3:IntrmyAgt1/ns3:FinInstnId/ns3:PstlAdr/ns3:BldgNb),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdAgts/ns3:IntrmyAgt1/ns3:FinInstnId/ns3:PstlAdr/ns3:BldgNm),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdAgts/ns3:IntrmyAgt1/ns3:FinInstnId/ns3:PstlAdr/ns3:PstBx),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdAgts/ns3:IntrmyAgt1/ns3:FinInstnId/ns3:PstlAdr/ns3:Flr),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdAgts/ns3:IntrmyAgt1/ns3:FinInstnId/ns3:PstlAdr/ns3:Room),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdAgts/ns3:IntrmyAgt1/ns3:FinInstnId/ns3:PstlAdr/ns3:PstCd),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdAgts/ns3:IntrmyAgt1/ns3:FinInstnId/ns3:PstlAdr/ns3:TwnNm),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdAgts/ns3:IntrmyAgt1/ns3:FinInstnId/ns3:PstlAdr/ns3:TwnLctnNm),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdAgts/ns3:IntrmyAgt1/ns3:FinInstnId/ns3:PstlAdr/ns3:DstrctNm),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdAgts/ns3:IntrmyAgt1/ns3:FinInstnId/ns3:PstlAdr/ns3:CtrySubDvsn),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdAgts/ns3:IntrmyAgt1/ns3:FinInstnId/ns3:PstlAdr/ns3:Ctry))&quot;>&lt;/xsl:value-of>


&lt;/xsl:variable>
&lt;xsl:call-template name=&quot;tokenize2&quot;>
	&lt;xsl:with-param name=&quot;text&quot; select=&quot;substring-before($ResultantMTAddressTable,'ENDOFOUTPUT')&quot;/>
&lt;/xsl:call-template>
&lt;xsl:variable name=&quot;TruncTemp&quot;>
  &lt;xsl:value-of select=&quot;java:_getStringProperty($_TIF_MESSAGE_, 'Truncated_Fields')&quot;/>
&lt;/xsl:variable></mappermodel:UserXSL>
  <mappermodel:UserXSL index="1" node="OUT_PORT:0,FinMessage:0,Block4:0,Document:0,MT910:0,F56a:0,[Choice]:0,F56D:0,PartyIdentifier:0">&lt;xsl:variable name=&quot;Resultant&quot;>

&lt;xsl:value-of select=&quot;MXToMT:com.fiorano.funclet.MXtoMT.optionDPartyIdentifierwithTruncate(string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdAgts/ns3:IntrmyAgt1/ns3:FinInstnId/ns3:BICFI),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdAgts/ns3:IntrmyAgt1/ns3:FinInstnId/ns3:ClrSysMmbId),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdAgts/ns3:IntrmyAgt1/ns3:FinInstnId/ns3:ClrSysMmbId/ns3:MmbId),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdAgts/ns3:IntrmyAgt1/ns3:FinInstnId/ns3:Nm),string($AppendedPostalAddress),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdAgts/ns3:IntrmyAgt1/ns3:FinInstnId/ns3:ClrSysMmbId/ns3:ClrSysId/ns3:Cd),string(null),string(null),string(null),string(null),string(false),string(false),string(false),string(null),string($LineSeparator),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdAgts/ns3:IntrmyAgt1/ns3:FinInstnId/ns3:PstlAdr/ns3:Dept),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdAgts/ns3:IntrmyAgt1/ns3:FinInstnId/ns3:PstlAdr/ns3:SubDept),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdAgts/ns3:IntrmyAgt1/ns3:FinInstnId/ns3:PstlAdr/ns3:StrtNm),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdAgts/ns3:IntrmyAgt1/ns3:FinInstnId/ns3:PstlAdr/ns3:BldgNb),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdAgts/ns3:IntrmyAgt1/ns3:FinInstnId/ns3:PstlAdr/ns3:BldgNm),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdAgts/ns3:IntrmyAgt1/ns3:FinInstnId/ns3:PstlAdr/ns3:PstBx),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdAgts/ns3:IntrmyAgt1/ns3:FinInstnId/ns3:PstlAdr/ns3:Flr),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdAgts/ns3:IntrmyAgt1/ns3:FinInstnId/ns3:PstlAdr/ns3:Room),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdAgts/ns3:IntrmyAgt1/ns3:FinInstnId/ns3:PstlAdr/ns3:PstCd),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdAgts/ns3:IntrmyAgt1/ns3:FinInstnId/ns3:PstlAdr/ns3:TwnNm),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdAgts/ns3:IntrmyAgt1/ns3:FinInstnId/ns3:PstlAdr/ns3:TwnLctnNm),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdAgts/ns3:IntrmyAgt1/ns3:FinInstnId/ns3:PstlAdr/ns3:DstrctNm),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdAgts/ns3:IntrmyAgt1/ns3:FinInstnId/ns3:PstlAdr/ns3:CtrySubDvsn),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdAgts/ns3:IntrmyAgt1/ns3:FinInstnId/ns3:PstlAdr/ns3:Ctry))&quot;>&lt;/xsl:value-of>

&lt;/xsl:variable>
&lt;xsl:call-template name=&quot;tokenize2&quot;>
	&lt;xsl:with-param name=&quot;text&quot; select=&quot;substring-before($Resultant,'ENDOFOUTPUT')&quot;/>
&lt;/xsl:call-template>
&lt;xsl:variable name=&quot;TruncTemp&quot;>
  &lt;xsl:value-of select=&quot;java:_getStringProperty($_TIF_MESSAGE_, 'Truncated_Fields')&quot;/>
&lt;/xsl:variable>
&lt;xsl:value-of select=&quot;java:_setStringProperty($_TIF_MESSAGE_, 'Truncated_Fields', concat($TruncTemp,'F56DPartyIdentifier_ENDOFFIELDTAG',substring-after($Resultant,'ENDOFOUTPUT'),'ENDOFTRUNCATEDFIELD'))&quot;/></mappermodel:UserXSL>
  <mappermodel:UserXSL index="1" node="OUT_PORT:0,FinMessage:0,Block4:0,Document:0,MT910:0,F52a:0,[Choice]:0,F52A:0,IdentifierCode:0">&lt;xsl:variable name=&quot;if21&quot;>
                    &lt;xsl:choose>
                      &lt;xsl:when test=&quot;(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Agt) and ('DBIT')=($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:CdtDbtInd) and (string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Agt/ns3:FinInstnId/ns3:BICFI)))&quot;>
                        &lt;xsl:value-of select=&quot;$document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Agt/ns3:FinInstnId/ns3:BICFI&quot;>&lt;/xsl:value-of>
                      &lt;/xsl:when>
                      &lt;xsl:when test=&quot;string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdAgts/ns3:DbtrAgt/ns3:FinInstnId/ns3:BICFI)&quot;>
                        &lt;xsl:value-of select=&quot;$document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdAgts/ns3:DbtrAgt/ns3:FinInstnId/ns3:BICFI&quot;>&lt;/xsl:value-of>
                      &lt;/xsl:when>
                    &lt;/xsl:choose>
                  &lt;/xsl:variable>
                  &lt;xsl:value-of select=&quot;$if21&quot;>&lt;/xsl:value-of></mappermodel:UserXSL>
  <mappermodel:UserXSL index="1" node="OUT_PORT:0,FinMessage:0,Block4:0,Document:0,MT910:0,F50a:0,[Choice]:0,F50F:0,PartyIdentifier:0,[Choice]:0,Account:0">&lt;xsl:variable name=&quot;Resultant&quot;>
&lt;xsl:choose>				
						
&lt;xsl:when test=&quot;(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Pty)and ('CRDT')=($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:CdtDbtInd) and (not(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Pty/ns3:Id/ns3:OrgId/ns3:AnyBIC))) and ((string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:DbtrAcct/ns3:Id/ns3:Othr/ns3:Id)) or (string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:DbtrAcct/ns3:Id/ns3:IBAN))) and (string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Pty/ns3:PstlAdr/ns3:AdrLine)) and(('NOTPROVIDED')!=($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Pty/ns3:PstlAdr/ns3:AdrLine)) and (('true')=(MXToMT:com.fiorano.funclet.MXtoMT.MX_To_MTAddressLineType(string($AppendedPostalAddress),string($LineSeparator)))))&quot;>
   &lt;xsl:value-of select=&quot;MXToMT:com.fiorano.funclet.MXtoMT.mx2MTAccountwithTruncate(string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:DbtrAcct/ns3:Id/ns3:IBAN),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:DbtrAcct/ns3:Id/ns3:Othr/ns3:Id),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:DbtrAcct/ns3:Id/ns3:Othr/ns3:SchmeNm/ns3:Cd))&quot;>&lt;/xsl:value-of>
                    &lt;/xsl:when>
						
					&lt;xsl:when test=&quot;(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Pty)and ('CRDT')=($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:CdtDbtInd) and(not(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Pty/ns3:Id/ns3:OrgId/ns3:AnyBIC))) and(not(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:DbtrAcct/ns3:Id/ns3:IBAN))) and(not(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:DbtrAcct/ns3:Id/ns3:Othr/ns3:Id))) and((string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Pty/ns3:Id/ns3:OrgId/ns3:Othr/ns3:Id)) or(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Pty/ns3:Id/ns3:PrvtId/ns3:Othr/ns3:Id))) and (string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Pty/ns3:PstlAdr/ns3:AdrLine)) and(('NOTPROVIDED')!=($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Pty/ns3:PstlAdr/ns3:AdrLine)) and (('true')=(MXToMT:com.fiorano.funclet.MXtoMT.MX_To_MTAddressLineType(string($AppendedPostalAddress),string($LineSeparator)))))&quot;>
                           &lt;xsl:value-of select=&quot;concat(MXToMT:com.fiorano.funclet.MXtoMT.MX_To_MTFATFIdentification_MTAccountVal(string($OrgIdentifierTable),string($PrivateOrgIdentifierTable),string($LineSeparator),string($VariableSeparator),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Pty/ns3:PstlAdr/ns3:Ctry),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Pty/ns3:CtryOfRes)),'ENDOFOUTPUT')&quot;/>
                        &lt;/xsl:when>
						
&lt;xsl:when test=&quot;(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Pty)and ('CRDT')=($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:CdtDbtInd) and(not(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Pty/ns3:Id/ns3:OrgId/ns3:AnyBIC))) and (not(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:DbtrAcct/ns3:Id/ns3:Othr/ns3:Id))) and (not(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Pty/ns3:Id/ns3:PrvtId/ns3:Othr/ns3:Id))) and (not(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Pty/ns3:Id/ns3:OrgId/ns3:Othr/ns3:Id))) and (string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Pty/ns3:PstlAdr/ns3:AdrLine)) and(('NOTPROVIDED')!=($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Pty/ns3:PstlAdr/ns3:AdrLine)) and (('true')=(MXToMT:com.fiorano.funclet.MXtoMT.MX_To_MTAddressLineType(string($AppendedPostalAddress),string($LineSeparator)))))&quot;>
                          &lt;xsl:value-of select=&quot;'NOTPROVIDEDENDOFOUTPUT'&quot;>&lt;/xsl:value-of>
						  &lt;/xsl:when>
						
						
						&lt;xsl:when test=&quot;(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Pty)and ('CRDT')=($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:CdtDbtInd) and(not(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Pty/ns3:Id/ns3:OrgId/ns3:AnyBIC))) and ((string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:DbtrAcct/ns3:Id/ns3:Othr/ns3:Id)) or (string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:DbtrAcct/ns3:Id/ns3:IBAN))) and (string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Pty/ns3:Nm)) and (string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Pty/ns3:PstlAdr/ns3:Ctry)) and (not(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Pty/ns3:PstlAdr/ns3:AdrLine))))&quot;>
						 &lt;xsl:value-of select=&quot;MXToMT:com.fiorano.funclet.MXtoMT.mx2MTAccountwithTruncate(string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:DbtrAcct/ns3:Id/ns3:IBAN),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:DbtrAcct/ns3:Id/ns3:Othr/ns3:Id),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:DbtrAcct/ns3:Id/ns3:Othr/ns3:SchmeNm/ns3:Cd))&quot;>
						 &lt;/xsl:value-of>
                        &lt;/xsl:when>
						
						&lt;xsl:when test=&quot;(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Pty)and ('CRDT')=($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:CdtDbtInd) and(not(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Pty/ns3:Id/ns3:OrgId/ns3:AnyBIC))) and (not(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:DbtrAcct/ns3:Id/ns3:IBAN))) and (not(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:DbtrAcct/ns3:Id/ns3:Othr/ns3:Id))) and ((string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Pty/ns3:Id/ns3:OrgId/ns3:Othr/ns3:Id)) or (string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Pty/ns3:Id/ns3:PrvtId/ns3:Othr/ns3:Id))) and (string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Pty/ns3:Nm)) and (string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Pty/ns3:PstlAdr/ns3:Ctry)) and (not(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Pty/ns3:PstlAdr/ns3:AdrLine))))&quot;>
						&lt;xsl:value-of select=&quot;concat(MXToMT:com.fiorano.funclet.MXtoMT.MX_To_MTFATFIdentification_MTAccountVal(string($OrgIdentifierTable),string($PrivateOrgIdentifierTable),string($LineSeparator),string($VariableSeparator),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Pty/ns3:PstlAdr/ns3:Ctry),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Pty/ns3:CtryOfRes)),'ENDOFOUTPUT')&quot;/>
                        &lt;/xsl:when>


&lt;xsl:when test=&quot;(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Pty)and ('CRDT')=($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:CdtDbtInd) and(not(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Pty/ns3:Id/ns3:OrgId/ns3:AnyBIC))) and (not(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:DbtrAcct/ns3:Id/ns3:Othr/ns3:Id))) and (not(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Pty/ns3:Id/ns3:PrvtId/ns3:Othr/ns3:Id))) and (not(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Pty/ns3:Id/ns3:OrgId/ns3:Othr/ns3:Id))) and (string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Pty/ns3:Nm)) and (string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Pty/ns3:PstlAdr/ns3:Ctry)) and (not(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Pty/ns3:PstlAdr/ns3:AdrLine))))&quot;>
						 &lt;xsl:value-of select=&quot;'NOTPROVIDEDENDOFOUTPUT'&quot;>&lt;/xsl:value-of>
                        &lt;/xsl:when>
						
&lt;xsl:when test=&quot;(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Pty)and ('CRDT')=($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:CdtDbtInd) and(not(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Pty/ns3:Id/ns3:OrgId/ns3:AnyBIC))) and (not(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:DbtrAcct/ns3:Id/ns3:Othr/ns3:Id))) and (not(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Pty/ns3:Id/ns3:PrvtId/ns3:Othr/ns3:Id))) and (not(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Pty/ns3:Id/ns3:OrgId/ns3:Othr/ns3:Id))) and(not(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Pty/ns3:Nm))) and (string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Pty/ns3:PstlAdr/ns3:Ctry)) and (not(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Pty/ns3:PstlAdr/ns3:AdrLine))))&quot;>
						 &lt;xsl:value-of select=&quot;'NOTPROVIDEDENDOFOUTPUT'&quot;>&lt;/xsl:value-of>
                        &lt;/xsl:when>
					
						&lt;/xsl:choose>
						&lt;/xsl:variable>
&lt;xsl:value-of select=&quot;normalize-space(substring-before($Resultant,'ENDOFOUTPUT'))&quot;/>
&lt;xsl:variable name=&quot;TruncTemp&quot;>
  &lt;xsl:value-of select=&quot;java:_getStringProperty($_TIF_MESSAGE_, 'Truncated_Fields')&quot;/>
&lt;/xsl:variable>
&lt;xsl:value-of select=&quot;java:_setStringProperty($_TIF_MESSAGE_, 'Truncated_Fields', concat($TruncTemp,'F50F_Account_ENDOFFIELDTAG',substring-after($Resultant,'ENDOFOUTPUT'),'ENDOFTRUNCATEDFIELD'))&quot;/></mappermodel:UserXSL>
  <mappermodel:UserXSL index="0" node="OUT_PORT:0,FinMessage:0,Block4:0,Document:0,MT910:0,F50a:0,[Choice]:0,F50F:0,NameAndAddress:0,[ONE MANY]:0,Lines2to5:0">&lt;xsl:variable name=&quot;MTPartyIndentifier&quot;>
	&lt;xsl:choose>
 
												
				 &lt;xsl:when test=&quot;(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Pty)and ('CRDT')=($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:CdtDbtInd) and(not(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Pty/ns3:Id/ns3:OrgId/ns3:AnyBIC)))and (not(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:DbtrAcct/ns3:Id/ns3:IBAN))) and (not(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:DbtrAcct/ns3:Id/ns3:Othr/ns3:Id))) and ((string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Pty/ns3:Id/ns3:OrgId/ns3:Othr/ns3:Id)) or (string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Pty/ns3:Id/ns3:PrvtId/ns3:Othr/ns3:Id))) and (string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Pty/ns3:PstlAdr/ns3:AdrLine)) and(('NOTPROVIDED')!=($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Pty/ns3:PstlAdr/ns3:AdrLine)) and (('true')=(MXToMT:com.fiorano.funclet.MXtoMT.MX_To_MTAddressLineType(string($AppendedPostalAddress),string($LineSeparator)))))&quot;>
                           &lt;xsl:value-of select=&quot;MXToMT:com.fiorano.funclet.MXtoMT.MX_To_MTFATFIdentification_MTSchemeCode(string($OrgIdentifierTable),string($PrivateOrgIdentifierTable),string($LineSeparator),string($VariableSeparator),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Pty/ns3:PstlAdr/ns3:Ctry),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Pty/ns3:CtryOfRes))&quot;/>
                 &lt;/xsl:when>
						
						 &lt;xsl:when test=&quot;(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Pty)and ('CRDT')=($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:CdtDbtInd) and(not(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Pty/ns3:Id/ns3:OrgId/ns3:AnyBIC))) and (not(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:DbtrAcct/ns3:Id/ns3:IBAN))) and (not(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:DbtrAcct/ns3:Id/ns3:Othr/ns3:Id))) and ((string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Pty/ns3:Id/ns3:OrgId/ns3:Othr/ns3:Id)) or (string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Pty/ns3:Id/ns3:PrvtId/ns3:Othr/ns3:Id))) and (string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Pty/ns3:Nm)) and (not(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Pty/ns3:PstlAdr/ns3:AdrLine))))&quot;>
						&lt;xsl:value-of select=&quot;MXToMT:com.fiorano.funclet.MXtoMT.MX_To_MTFATFIdentification_MTSchemeCode(string($OrgIdentifierTable),string($PrivateOrgIdentifierTable),string($LineSeparator),string($VariableSeparator),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Pty/ns3:PstlAdr/ns3:Ctry),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Pty/ns3:CtryOfRes))&quot;/>
                        &lt;/xsl:when>
						
								
			
&lt;/xsl:choose>
&lt;/xsl:variable>

&lt;xsl:variable name=&quot;ResultantMTAddressTable&quot;>
	&lt;xsl:choose>

		 &lt;xsl:when test=&quot;(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Pty)and ('CRDT')=($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:CdtDbtInd) and(not(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Pty/ns3:Id/ns3:OrgId/ns3:AnyBIC))) and (string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Pty/ns3:PstlAdr/ns3:AdrLine)) and(('NOTPROVIDED')!=($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Pty/ns3:PstlAdr/ns3:AdrLine)) and (('true')=(MXToMT:com.fiorano.funclet.MXtoMT.MX_To_MTAddressLineType(string($AppendedPostalAddress),string($LineSeparator)))))&quot;>
		 &lt;xsl:value-of select=&quot;MXToMT:com.fiorano.funclet.MXtoMT.MX_To_MTFATFNameAndAddress2withTruncate(string($AppendedPostalAddress),string($LineSeparator),string($VariableSeparator),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Pty/ns3:Nm),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Pty/ns3:Id/ns3:OrgId/ns3:LEI),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Pty/ns3:Id/ns3:PrvtId/ns3:DtAndPlcOfBirth/ns3:BirthDt),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Pty/ns3:Id/ns3:PrvtId/ns3:DtAndPlcOfBirth/ns3:CityOfBirth),string($OrgIdentifierTable),string($PrivateOrgIdentifierTable),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Pty/ns3:PstlAdr/ns3:Ctry),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Pty/ns3:CtryOfRes),string($MTPartyIndentifier),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:DbtrAcct/ns3:Id/ns3:IBAN),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:DbtrAcct/ns3:Id/ns3:Othr/ns3:Id))&quot;/>
		&lt;/xsl:when>
	
		&lt;xsl:when test=&quot;(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Pty)and ('CRDT')=($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:CdtDbtInd) and(not(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Pty/ns3:Id/ns3:OrgId/ns3:AnyBIC))) and (string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Pty/ns3:Nm)) and (string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Pty/ns3:PstlAdr/ns3:Ctry)) and (not(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Pty/ns3:PstlAdr/ns3:AdrLine))))&quot;>
		
			&lt;xsl:value-of select=&quot;MXToMT:com.fiorano.funclet.MXtoMT.MX_To_MTFATFNameAndAddresswithTruncate(string($AppendedPostalAddress),string($LineSeparator),string($VariableSeparator),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Pty/ns3:Nm),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Pty/ns3:Id/ns3:OrgId/ns3:LEI),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Pty/ns3:Id/ns3:PrvtId/ns3:DtAndPlcOfBirth/ns3:BirthDt),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Pty/ns3:Id/ns3:PrvtId/ns3:DtAndPlcOfBirth/ns3:CityOfBirth),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Pty/ns3:Id/ns3:PrvtId/ns3:DtAndPlcOfBirth/ns3:CtryOfBirth),string($OrgIdentifierTable),string($PrivateOrgIdentifierTable),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Pty/ns3:CtryOfRes),string($MTPartyIndentifier),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:DbtrAcct/ns3:Id/ns3:IBAN),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:DbtrAcct/ns3:Id/ns3:Othr/ns3:Id),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Pty/ns3:PstlAdr/ns3:Dept),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Pty/ns3:PstlAdr/ns3:SubDept),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Pty/ns3:PstlAdr/ns3:StrtNm),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Pty/ns3:PstlAdr/ns3:BldgNb),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Pty/ns3:PstlAdr/ns3:BldgNm),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Pty/ns3:PstlAdr/ns3:Flr),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Pty/ns3:PstlAdr/ns3:PstBx),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Pty/ns3:PstlAdr/ns3:Room),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Pty/ns3:PstlAdr/ns3:PstCd),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Pty/ns3:PstlAdr/ns3:TwnNm),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Pty/ns3:PstlAdr/ns3:TwnLctnNm),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Pty/ns3:PstlAdr/ns3:DstrctNm),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Pty/ns3:PstlAdr/ns3:CtrySubDvsn),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Pty/ns3:PstlAdr/ns3:Ctry))&quot;/>
		&lt;/xsl:when>
		
		
&lt;xsl:when test=&quot;(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Pty)and ('CRDT')=($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:CdtDbtInd) and(not(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Pty/ns3:Id/ns3:OrgId/ns3:AnyBIC))) and(not(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Pty/ns3:Nm))) and(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Pty/ns3:PstlAdr/ns3:Ctry)) and (not(string-length($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Pty/ns3:PstlAdr/ns3:AdrLine))))&quot;>
		
			&lt;xsl:value-of select=&quot;MXToMT:com.fiorano.funclet.MXtoMT.MX_To_MTFATFNameAndAddresswithTruncate(string($AppendedPostalAddress),string($LineSeparator),string($VariableSeparator),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Pty/ns3:Nm),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Pty/ns3:Id/ns3:OrgId/ns3:LEI),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Pty/ns3:Id/ns3:PrvtId/ns3:DtAndPlcOfBirth/ns3:BirthDt),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Pty/ns3:Id/ns3:PrvtId/ns3:DtAndPlcOfBirth/ns3:CityOfBirth),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Pty/ns3:Id/ns3:PrvtId/ns3:DtAndPlcOfBirth/ns3:CtryOfBirth),string($OrgIdentifierTable),string($PrivateOrgIdentifierTable),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Pty/ns3:CtryOfRes),string($MTPartyIndentifier),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:DbtrAcct/ns3:Id/ns3:IBAN),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:DbtrAcct/ns3:Id/ns3:Othr/ns3:Id),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Pty/ns3:PstlAdr/ns3:Dept),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Pty/ns3:PstlAdr/ns3:SubDept),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Pty/ns3:PstlAdr/ns3:StrtNm),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Pty/ns3:PstlAdr/ns3:BldgNb),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Pty/ns3:PstlAdr/ns3:BldgNm),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Pty/ns3:PstlAdr/ns3:Flr),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Pty/ns3:PstlAdr/ns3:PstBx),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Pty/ns3:PstlAdr/ns3:Room),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Pty/ns3:PstlAdr/ns3:PstCd),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Pty/ns3:PstlAdr/ns3:TwnNm),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Pty/ns3:PstlAdr/ns3:TwnLctnNm),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Pty/ns3:PstlAdr/ns3:DstrctNm),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Pty/ns3:PstlAdr/ns3:CtrySubDvsn),string($document_IN_PORT/ns1:Envelope/ns3:Document/ns3:BkToCstmrDbtCdtNtfctn/ns3:Ntfctn/ns3:Ntry/ns3:NtryDtls/ns3:TxDtls/ns3:RltdPties/ns3:Dbtr/ns3:Pty/ns3:PstlAdr/ns3:Ctry))&quot;/>
		&lt;/xsl:when>

	&lt;/xsl:choose>
&lt;/xsl:variable>


&lt;xsl:variable name=&quot;ResultantMTAddressSplit&quot;>
&lt;xsl:choose>
&lt;xsl:when test=&quot;(string-length($ResultantMTAddressTable))&quot;>
	&lt;xsl:value-of select=&quot;MXToMT:com.fiorano.funclet.MXtoMT.SplitAddresstoNumberDetailswithTruncate(string($ResultantMTAddressTable),string($LineSeparator),string($VariableSeparator))&quot;/>
&lt;/xsl:when>
&lt;/xsl:choose>
&lt;/xsl:variable>
&lt;xsl:call-template name=&quot;tokenize3&quot;>
	&lt;xsl:with-param name=&quot;text&quot; select=&quot;substring-before($ResultantMTAddressSplit,'ENDOFOUTPUT')&quot;/>
&lt;/xsl:call-template>
&lt;xsl:variable name=&quot;TruncTemp&quot;>
  &lt;xsl:value-of select=&quot;java:_getStringProperty($_TIF_MESSAGE_, 'Truncated_Fields')&quot;/>
&lt;/xsl:variable></mappermodel:UserXSL>
</mappermodel:MapperProject>